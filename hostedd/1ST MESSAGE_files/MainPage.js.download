define("global/elements/PromoBlock/PromoBlockSlide",["underscore","BackboneX","global/userProfile"],function(e,t,n){var r=t.View.extend({_classes:function(){return e.defaults({active:"promoblock__item_active_yes",moving:"promoblock__item_moving_yes"},this._super())},_initProperties:function(){this._super(),this._startParams=this.options.startParams,this._hideParams=this.options.hideParams},stopAnimation:function(){return this.$el.stop(!0,!0),this},setAsBackground:function(){return this.$el.removeClass(this._class("active")).addClass(this._class("moving")),this},setAsActive:function(){return this.$el.addClass(this._class("active")).removeClass(this._class("moving")),this},toStartState:function(e,t){var r=this._startParams;return e?this.$el.animate(r,n.get("PROMOBLOCK_ANIMATION_DELAY"),t):this.$el.css(r),this},animatedRemove:function(e,t){return this.$el.animate(this._hideParams,e,t),this},hide:function(){return this.$el.removeClass(this._class("active")).removeClass(this._class("moving")),this},move:function(e){var t=this.$el[0].style,n=parseInt(t.left,10)||0;t.left=n+e+"px"},setHideParams:function(e){return this._hideParams=e,this}});return r}),define("global/elements/PromoBlock/PromoBlockWithTouch",["vendors/Backbone/Mixin","global/elements/DragAndDrop/Dragging"],function(e,t){var n=150,r=3,i=500,s=new e({dependencies:[t]},{_selectors:function(){var e=this._super();return e.movingElement=e.item,e.promoblockLink="a",e},_initProperties:function(){this._super(),this._lastDx=null,this._backgroundSlide=null,this._movingSlide=null,this._preventClickLink=!1,this._startMovingDate=0,this._bidirectionalMoving=!1,this._allowVerticalScroll=!0},_startSlideParams:{left:0},_hideSlideParams:{left:0},_onItemsInited:function(){this._super(),this._findElem("promoblockLink").on("click",this._onClickLink.bind(this))},_onClickLink:function(e){this._preventClickLink&&(this._preventClickLink=!1,e.preventDefault())},_onPointerDown:function(e){this._super(e),this._animatedSlide&&(this._animatedSlide.stopAnimation(),this._animatedSlide=null),this._backgroundSlide=null},_startMoving:function(){this._super(),this.stop(),this._movingSlide=this._getCurrentSlide(),this._startMovingDate=new Date,this._bidirectionalMoving=!1},_move:function(e,t,n,i){this._super(),this._bidirectionalMoving=this._bidirectionalMoving||e*n<0,this._checkDirection(n),this._lastDx=e,this._movingSlide.move(e);if(this._preventClickLink)return;this._preventClickLink=Math.abs(n)>r||Math.abs(i)>r},_endMoving:function(e,t,r){this._super(e,t,r),this._touchChange=!0,!this._bidirectionalMoving&&new Date-this._startMovingDate<=i||this._lastDx*r>=0&&Math.abs(r)>n?(this._checkDirection(r),r>0?this.prev():this.next()):(this._animatedSlide=this._movingSlide,this._movingSlide.toStartState(!0)),this.play(),this._movingSlide=null,this._touchChange=!1,setTimeout(function(){this._preventClickLink=!1}.bind(this),500)},_checkDirection:function(e){this._items.forEach(function(e,t){if(this._current===t)return;e.hide()},this),this._backgroundSlide=e>0?this._getPrevSlide():this._getNextSlide(),this._backgroundSlide.setAsBackground().toStartState()},_getLeftOffsetToHide:function(e,t){var n=e.$el.width(),r;if(this._items.length==2&&(r=e.$el.offset().left))return r>0?n:-n;if(!this._touchChange)return-n;var i=this._items.indexOf(e),s=this._items.indexOf(t);return i==this._last&&s===0?-n:i===0&&s==this._last?n:s<i?n:-n},_changeSlide:function(e,t,n){e.setHideParams({left:this._getLeftOffsetToHide(e,t)}),this._super(e,t,n)},_getPrevSlide:function(){var e=this._current-1;return this._items[e<0?this._last:e]},_getNextSlide:function(){var e=this._current+1;return this._items[e>this._last?0:e]}});return s}),define("vendors/Modernizr/modernizr.touch",["jquery","Modernizr"],function(e,t){return t.addTest({touch:"ontouchstart"in document||window.navigator.msMaxTouchPoints>0}),t}),define("global/elements/PromoBlock/PromoBlock",["underscore","jquery","BackboneX","./PromoBlockSlide","global/userProfile","./PromoBlockWithTouch","Modernizr","vendors/Modernizr/modernizr.touch"],function(e,t,n,r,i,s,o){var u=n.View.extend({_classes:function(){return e.defaults({controlActive:"promoblock__control_state_active",itemActive:"promoblock__item_active_yes"},this._super())},_selectors:function(){return e.defaults({control:".promoblock__control",controls:".promoblock__controls",item:".promoblock__item",items:".promoblock__items",next:".promoblock__arrow_moving_r",noScript:"noscript",prev:".promoblock__arrow_moving_l"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("next")]=this._onNextClick,e["click "+this._selector("prev")]=this._onPrevClick,e["click "+this._selector("control")]=this._onControlClick,e["mouseenter "+this._selector("items")]=this._onItemsMouseEnter,e["mouseleave "+this._selector("items")]=this._onItemsMouseLeave,e.keydown=this._onKeydown,e},_initProperties:function(){this._super(),this._INTERVAL_DELAY=this._data.intervalDelay||7e3,this._STOP_AFTER_INTERACTION=!!this._data.stopAfterInteraction,this._items=[],this._current=this._elem("control").index(this._elem("controlActive")),this._last=null,this._changingSlideTime=null,this._playable=this._data.playable,this._playable=e.isUndefined(this._playable)?!0:this._playable,this._playTimeoutId=-1,this._pausedAfterMouseInteraction=!1,this._animatedSlide=null},_startSlideParams:{opacity:1},_hideSlideParams:{opacity:0},initialize:function(){this._super(),setTimeout(function(){this._initImages(),this._initItems(),this._tryToPlay(),this._onItemsInited()}.bind(this),0)},_onItemsInited:function(){},_initImages:function(){var e=this._elem("items"),t=e.html().replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<noscript>/g,"").replace(/<\/noscript>/g,"");e.html(t)},_initItems:function(){this._elem("item").each(this._initItem.bind(this)),this._last=this._items.length-1},_initItem:function(e,t){this._items.push(new r({el:t,startParams:this._startSlideParams,hideParams:this._hideSlideParams}))},_onItemsMouseEnter:function(){if(!this._playable)return;this.stop(),this._pausedAfterMouseInteraction=!0},_onItemsMouseLeave:function(){if(!this._pausedAfterMouseInteraction)return;this.play(),this._pausedAfterMouseInteraction=!1},_onKeydown:function(e){switch(e.which){case this._KEYS.LEFT:this.prev(),this.$el.focus();break;case this._KEYS.RIGHT:this.next(),this.$el.focus()}},play:function(){return this._playable=!0,clearTimeout(this._playTimeoutId),this._playTimeoutId=setTimeout(this.next.bind(this),this._INTERVAL_DELAY),this},stop:function(){return this._playable=!1,clearTimeout(this._playTimeoutId),this},_onControlClick:function(e){this._STOP_AFTER_INTERACTION&&this.stop();var n=t(e.currentTarget).data("index");this._setSlide(n)},_onNextClick:function(){this._STOP_AFTER_INTERACTION&&this.stop(),this.next()},_onPrevClick:function(){this._STOP_AFTER_INTERACTION&&this.stop(),this.prev()},next:function(){return this._setSlide(this._current+1),this},prev:function(){return this._setSlide(this._current-1),this},_setSlide:function(e){if(this._current===e)return;var t=this._getCurrentSlide();this._current=e>this._last?0:e<0?this._last:e;var n=this._getCurrentSlide();this._updateActiveControls(),this._changeSlide(t,n,this._onChangeSlide.bind(this))},_updateChangingSlideTime:function(){var e=i.get("PROMOBLOCK_ANIMATION_DELAY");return this._changingSlideTime&&Date.now()-this._changingSlideTime<e&&(e=0),this._changingSlideTime=Date.now(),e},_tryToPlay:function(){this._playable&&this.play()},_onChangeSlide:function(){this._tryToPlay()},_changeSlide:function(e,t,n){var r=this._updateChangingSlideTime();this._animatedSlide&&this._animatedSlide.stopAnimation(),this._animatedSlide=e,t.setAsBackground().toStartState(),e.animatedRemove(r,function(){e.hide(),t.setAsActive(),n()})},_updateActiveControls:function(){if(this._elem("control").length<=1)return;this._elem("control").removeClass(this._class("controlActive")).eq(this._current).addClass(this._class("controlActive"))},_getCurrentSlide:function(){return this._items[this._current]}});return o.touch&&(u=u.mix(s)),u}),define("global/PageClasses/PageWithPromoBlocks",["jquery","underscore","vendors/Backbone/Mixin","global/elements/PromoBlock/PromoBlock"],function(e,t,n,r){var i=new n({_selectors:function(){return t.defaults({promoblock:".promoblock_active_yes"},this._super())},_initProperties:function(){this._super(),this._promoBlocks=[]},initialize:function(){this._super(),this._initPromoBlock()},_initPromoBlock:function(){this._elem("promoblock").each(function(e,t){this._promoBlocks.push(new r({el:t}))}.bind(this))},getPromoBlock:function(e){return this._promoBlocks[e]}});return i}),define("mobile/PageClasses/PageWithQuickStartBubble",["jquery","underscore","vendors/Backbone/Mixin"],function(e,t,n){var r=1e4,i=1e4,s=90,o="already_show_bubble",u=new n({_selectors:function(){return t.defaults({closeButton:".js-close-button",quickStartBubble:".js-quick-access"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("closeButton")]=this._onClickClose,this._matchNeedBubble()&&(e.click=this._onClickPage),e},initialize:function(){this._super(),this._matchNeedBubble()&&(this._showBubble(),this._hideAfterInterval())},_hideBubble:function(){this._addClass("hidden","quickStartBubble")},_showBubble:function(){this._removeClass("hidden","quickStartBubble")},_onClickClose:function(){this._hideBubble(),this._setCookieForBubble(i)},_hideAfterInterval:function(){setInterval(this._hideBubble.bind(this),r),this._setCookieForBubble(s)},_matchNeedBubble:function(){var t=navigator.userAgent.match(/iPhone/i)&&navigator.userAgent.match(/Safari/i);return t&&!e.cookie(o)},_onClickPage:function(){this._setCookieForBubble(i)},_setCookieForBubble:function(t){e.cookie(o,"1",{expires:t,path:"/"})}});return u}),require(["global/PageClasses/ProjectPage","global/PageClasses/PageWithPromoBlocks","mobile/PageClasses/PageWithQuickStartBubble"],function(e,t,n){e.mix(t,n).extend({_initProperties:function(){this._super(),this._mainPromoBlock=null},initialize:function(){this._super(),this._linkMenuWithPromoBlock()},_linkMenuWithPromoBlock:function(){var e=this.getMenu();this._mainPromoBlock=this.getPromoBlock(0),e.on("show",this._onMenuShow,this).on("hide",this._onMenuHide,this)},_onMenuShow:function(){this._mainPromoBlock&&this._mainPromoBlock.stop()},_onMenuHide:function(){this._mainPromoBlock&&this._mainPromoBlock.play()}})}),define("a949a427d547915277f3dd91cd484aaf",function(){});