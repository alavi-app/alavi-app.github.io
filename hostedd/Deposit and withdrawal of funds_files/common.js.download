/*
 UAParser.js v0.7.21
 Lightweight JavaScript-based User-Agent string parser
 https://github.com/faisalman/ua-parser-js

 Copyright ? 2012-2019 Faisal Salman <f@faisalman.com>
 Licensed under MIT License
*/

var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype?e:(e[t]=n.value,e)},$jscomp.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(e,t){var n=$jscomp.propertyToPolyfillSymbol[t];return null==n?e[t]:(n=e[n],void 0!==n?n:e[t])};$jscomp.polyfill=function(e,t,n,r){t&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(e,t,n,r):$jscomp.polyfillUnisolated(e,t,n,r))},$jscomp.polyfillUnisolated=function(e,t,n,r){n=$jscomp.global,e=e.split(".");for(r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))return;n=n[i]}e=e[e.length-1],r=n[e],t=t(r),t!=r&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},$jscomp.polyfillIsolated=function(e,t,n,r){var i=e.split(".");e=1===i.length,r=i[0],r=!e&&r in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var s=0;s<i.length-1;s++){var o=i[s];if(!(o in r))return;r=r[o]}i=i[i.length-1],n=$jscomp.IS_SYMBOL_NATIVE&&"es6"===n?r[i]:null,t=t(n),null!=t&&(e?$jscomp.defineProperty($jscomp.polyfills,i,{configurable:!0,writable:!0,value:t}):t!==n&&($jscomp.propertyToPolyfillSymbol[i]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(i):$jscomp.POLYFILL_PREFIX+i,i=$jscomp.propertyToPolyfillSymbol[i],$jscomp.defineProperty(r,i,{configurable:!0,writable:!0,value:t})))},$jscomp.polyfill("Object.getOwnPropertySymbols",function(e){return e?e:function(){return[]}},"es6","es5"),$jscomp.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},$jscomp.arrayIterator=function(e){return{next:$jscomp.arrayIteratorImpl(e)}},$jscomp.initSymbol=function(){},$jscomp.polyfill("Symbol",function(e){if(e)return e;var t=function(e,t){this.$jscomp$symbol$id_=e,$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};t.prototype.toString=function(){return this.$jscomp$symbol$id_};var n=0,r=function(e){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return new t("jscomp_symbol_"+(e||"")+"_"+n++,e)};return r},"es6","es3"),$jscomp.initSymbolIterator=function(){},$jscomp.polyfill("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=$jscomp.global[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&$jscomp.defineProperty(r.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return e},"es6","es3"),$jscomp.initSymbolAsyncIterator=function(){},$jscomp.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},$jscomp.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,r={next:function(){if(n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3"),$jscomp.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)$jscomp.owns(r,i)&&(e[i]=r[i])}return e},$jscomp.polyfill("Object.assign",function(e){return e||$jscomp.assign},"es6","es3"),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("840c377723a2bc6546aebeaa865736e6",[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SmartBanner=e()}(function(){return function(){function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!u&&l)return l(o,!0);if(s)return s(o,!0);throw u=Error("Cannot find module '"+o+"'"),u.code="MODULE_NOT_FOUND",u}u=n[o]={exports:{}},t[o][0].call(u.exports,function(e){return i(t[o][1][e]||e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}return e}()({1:[function(e,t,n){var r=e("object-assign"),i=e("component-query"),s=e("get-doc"),o=e("cookie-cutter"),u=e("ua-parser-js"),a=(navigator.language||navigator.userLanguage||navigator.browserLanguage).slice(-2)||"us",f=s&&s.documentElement,l={ios:{appMeta:"apple-itunes-app",iconRels:["apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id"+this.appId+"?mt=8"}},android:{appMeta:"google-play-app",iconRels:["android-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://play.google.com/store/apps/details?id="+this.appId}},windows:{appMeta:"msApplication-ID",iconRels:["windows-touch-icon","apple-touch-icon-precomposed","apple-touch-icon"],getStoreLink:function(){return"http://www.windowsphone.com/s?appid="+this.appId}}};e=function(e){var t=u(navigator.userAgent);this.options=r({},{daysHidden:15,daysReminder:90,appStoreLanguage:a,button:"OPEN",store:{ios:"On the App Store",android:"In Google Play",windows:"In the Windows Store"},price:{ios:"FREE",android:"FREE",windows:"FREE"},theme:"",icon:"",force:""},e||{}),this.options.force?this.type=this.options.force:"Windows Phone"===t.os.name||"Windows Mobile"===t.os.name?this.type="windows":"iOS"===t.os.name?this.type="ios":"Android"===t.os.name&&(this.type="android"),this.type&&this.options.store[this.type]&&(this.appMeta=l[this.type].appMeta,this.parseAppId(),"ios"===this.type&&"Mobile Safari"===t.browser.name&&parseInt(t.os.version,10),o.get(this.appId+"-smartbanner-closed"),o.get(this.appId+"-smartbanner-installed"),r(this,l[this.type]),this.create(),this.show())},e.prototype={constructor:e,create:function(){var e=this.getStoreLink(),t=this.options.price[this.type]+" - "+this.options.store[this.type];if(this.options.icon)var n=this.options.icon;else for(var r=0;r<this.iconRels.length;r++){var o=i('link[rel="'+this.iconRels[r]+'"]');if(o){n=o.getAttribute("href");break}}var u=s.createElement("div");u.className="smartbanner smartbanner-"+(this.options.theme||this.type),u.innerHTML='<div class="smartbanner-container"><a href="javascript:void(0);" class="smartbanner-close">&times;</a><span class="smartbanner-icon" style="background-image: url('+n+')"></span><div class="smartbanner-info"><div class="smartbanner-title">'+this.options.title+"</div><div>"+this.options.author+"</div><span>"+t+'</span></div><a href="'+e+'" class="smartbanner-button"><span class="smartbanner-button-text">'+this.options.button+"</span></a></div>",s.body?s.body.appendChild(u):s&&s.addEventListener("DOMContentLoaded",function(){s.body.appendChild(u)}),i(".smartbanner-button",u).addEventListener("click",this.install.bind(this),!1),i(".smartbanner-close",u).addEventListener("click",this.close.bind(this),!1)},hide:function(){f.classList.remove("smartbanner-show");if("function"==typeof this.options.close)return this.options.close()},show:function(){f.classList.add("smartbanner-show");if("function"==typeof this.options.show)return this.options.show()},close:function(){this.hide(),o.set(this.appId+"-smartbanner-closed","true",{path:"/",expires:new Date(Number(new Date)+864e5*this.options.daysHidden)});if("function"==typeof this.options.close)return this.options.close()},install:function(){this.hide(),o.set(this.appId+"-smartbanner-installed","true",{path:"/",expires:new Date(Number(new Date)+864e5*this.options.daysReminder)});if("function"==typeof this.options.close)return this.options.close()},parseAppId:function(){var e=i('meta[name="'+this.appMeta+'"]');if(e)return this.appId="windows"===this.type?e.getAttribute("content"):/app-id=([^\s,]+)/.exec(e.getAttribute("content"))[1]}},t.exports=e},{"component-query":2,"cookie-cutter":3,"get-doc":4,"object-assign":6,"ua-parser-js":7}],2:[function(e,t,n){function r(e,t){return t.querySelector(e)}n=t.exports=function(e,t){return t=t||document,r(e,t)},n.all=function(e,t){return t=t||document,t.querySelectorAll(e)},n.engine=function(e){if(!e.one)throw Error(".one callback required");if(!e.all)throw Error(".all callback required");return r=e.one,n.all=e.all,n}},{}],3:[function(e,t,n){n=t.exports=function(e){return e||(e={}),"string"==typeof e&&(e={cookie:e}),void 0===e.cookie&&(e.cookie=""),{get:function(t){for(var n=e.cookie.split(/;\s*/),r=0;r<n.length;r++){var i=n[r].split("=");if(unescape(i[0])===t)return unescape(i[1])}},set:function(t,n,r){return r||(r={}),t=escape(t)+"="+escape(n),r.expires&&(t+="; expires="+r.expires),r.path&&(t+="; path="+escape(r.path)),r.domain&&(t+="; domain="+escape(r.domain)),r.secure&&(t+="; secure"),e.cookie=t}}},"undefined"!=typeof document&&(e=n(document),n.get=e.get,n.set=e.set)},{}],4:[function(e,t,n){e=e("has-dom"),t.exports=e()?document:null},{"has-dom":5}],5:[function(e,t,n){t.exports=function(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}},{}],6:[function(e,t,n){var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");e[5]="de";if("5"===Object.getOwnPropertyNames(e)[0])return!1;var t={};for(e=0;10>e;e++)t["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},n)).join("")?!1:!0}catch(r){return!1}}()?Object.assign:function(e,t){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");var n=Object(e);for(var o,u=1;u<arguments.length;u++){var a=Object(arguments[u]);for(var l in a)i.call(a,l)&&(n[l]=a[l]);if(r){o=r(a);for(var h=0;h<o.length;h++)s.call(a,o[h])&&(n[o[h]]=a[o[h]])}}return n}},{}],7:[function(e,t,n){(function(e,r){var i={extend:function(e,t){var n={},r;for(r in e)n[r]=t[r]&&0===t[r].length%2?t[r].concat(e[r]):e[r];return n},has:function(e,t){return"string"==typeof e?-1!==t.toLowerCase().indexOf(e.toLowerCase()):!1},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},s=function(e,t){for(var n=0,i,s,o,u,a,f;n<t.length&&!a;){var l=t[n],c=t[n+1];for(i=s=0;i<l.length&&!a;)if(a=l[i++].exec(e))for(o=0;o<c.length;o++)f=a[++s],u=c[o],"object"==typeof u&&0<u.length?2==u.length?this[u[0]]="function"==typeof u[1]?u[1].call(this,f):u[1]:3==u.length?this[u[0]]="function"!=typeof u[1]||u[1].exec&&u[1].test?f?f.replace(u[1],u[2]):r:f?u[1].call(this,f,u[2]):r:4==u.length&&(this[u[0]]=f?u[3].call(this,f.replace(u[1],u[2])):r):this[u]=f?f:r;n+=2}},o=function(e,t){for(var n in t)if("object"==typeof t[n]&&0<t[n].length){for(var s=0;s<t[n].length;s++)if(i.has(t[n][s],e))return"?"===n?r:n}else if(i.has(t[n],e))return"?"===n?r:n;return e},u={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},a={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],["name","version"],[/(opios)[\/\s]+([\w\.]+)/i],[["name","Opera Mini"],"version"],[/\s(opr)\/([\w\.]+)/i],[["name","Opera"],"version"],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],["name","version"],[/(konqueror)\/([\w\.]+)/i],[["name","Konqueror"],"version"],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[["name","IE"],"version"],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[["name","Edge"],"version"],[/(yabrowser)\/([\w\.]+)/i],[["name","Yandex"],"version"],[/(Avast)\/([\w\.]+)/i],[["name","Avast Secure Browser"],"version"],[/(AVG)\/([\w\.]+)/i],[["name","AVG Secure Browser"],"version"],[/(puffin)\/([\w\.]+)/i],[["name","Puffin"],"version"],[/(focus)\/([\w\.]+)/i],[["name","Firefox Focus"],"version"],[/(opt)\/([\w\.]+)/i],[["name","Opera Touch"],"version"],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[["name","UCBrowser"],"version"],[/(comodo_dragon)\/([\w\.]+)/i],[["name",/_/g," "],"version"],[/(windowswechat qbcore)\/([\w\.]+)/i],[["name","WeChat(Win) Desktop"],"version"],[/(micromessenger)\/([\w\.]+)/i],[["name","WeChat"],"version"],[/(brave)\/([\w\.]+)/i],[["name","Brave"],"version"],[/(qqbrowserlite)\/([\w\.]+)/i],["name","version"],[/(QQ)\/([\d\.]+)/i],["name","version"],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],["name","version"],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],["name","version"],[/(2345Explorer)[\/\s]?([\w\.]+)/i],["name","version"],[/(MetaSr)[\/\s]?([\w\.]+)/i],["name"],[/(LBBROWSER)/i],["name"],[/xiaomi\/miuibrowser\/([\w\.]+)/i],["version",["name","MIUI Browser"]],[/;fbav\/([\w\.]+);/i],["version",["name","Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],["name","version"],[/headlesschrome(?:\/([\w\.]+)|\s)/i],["version",["name","Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[["name",/(.+)/,"$1 WebView"],"version"],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[["name",/(.+(?:g|us))(.+)/,"$1 $2"],"version"],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],["version",["name","Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[["name","Sailfish Browser"],"version"],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],["name","version"],[/(dolfin)\/([\w\.]+)/i],[["name","Dolphin"],"version"],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[["name","360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[["name","Chrome"],"version"],[/(coast)\/([\w\.]+)/i],[["name","Opera Coast"],"version"],[/fxios\/([\w\.-]+)/i],["version",["name","Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],["version",["name","Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],["version","name"],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[["name","GSA"],"version"],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],["name",["version",o,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],["name","version"],[/(navigator|netscape)\/([\w\.-]+)/i],[["name","Netscape"],"version"],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],["name","version"]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",i.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",i.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",i.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],["model","vendor",["type","tablet"]],[/applecoremedia\/[\w\.]+ \((ipad)/],["model",["vendor","Apple"],["type","tablet"]],[/(apple\s{0,1}tv)/i],[["model","Apple TV"],["vendor","Apple"],["type","smarttv"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],["vendor","model",["type","tablet"]],[/(kf[A-z]+)\sbuild\/.+silk\//i],["model",["vendor","Amazon"],["type","tablet"]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[["model",o,{"Fire Phone":["SD","KF"]}],["vendor","Amazon"],["type","mobile"]],[/android.+aft([bms])\sbuild/i],["model",["vendor","Amazon"],["type","smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],["model","vendor",["type","mobile"]],[/\((ip[honed|\s\w*]+);/i],["model",["vendor","Apple"],["type","mobile"]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],["vendor","model",["type","mobile"]],[/\(bb10;\s(\w+)/i],["model",["vendor","BlackBerry"],["type","mobile"]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],["model",["vendor","Asus"],["type","tablet"]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[["vendor","Sony"],["model","Xperia Tablet"],["type","tablet"]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],["model",["vendor","Sony"],["type","mobile"]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],["vendor","model",["type","console"]],[/android.+;\s(shield)\sbuild/i],["model",["vendor","Nvidia"],["type","console"]],[/(playstation\s[34portablevi]+)/i],["model",["vendor","Sony"],["type","console"]],[/(sprint\s(\w+))/i],[["vendor",o,{HTC:"APA",Sprint:"Sprint"}],["model",o,{"Evo Shift 4G":"7373KT"}],["type","mobile"]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],["vendor",["model",/_/g," "],["type","mobile"]],[/(nexus\s9)/i],["model",["vendor","HTC"],["type","tablet"]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],["model",["vendor","Huawei"],["type","mobile"]],[/android.+(bah2?-a?[lw]\d{2})/i],["model",["vendor","Huawei"],["type","tablet"]],[/(microsoft);\s(lumia[\s\w]+)/i],["vendor","model",["type","mobile"]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],["model",["vendor","Microsoft"],["type","console"]],[/(kin\.[onetw]{3})/i],[["model",/\./g," "],["vendor","Microsoft"],["type","mobile"]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],["model",["vendor","Motorola"],["type","mobile"]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],["model",["vendor","Motorola"],["type","tablet"]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[["vendor",i.trim],["model",i.trim],["type","smarttv"]],[/hbbtv.+maple;(\d+)/i],[["model",/^/,"SmartTV"],["vendor","Samsung"],["type","smarttv"]],[/\(dtv[\);].+(aquos)/i],["model",["vendor","Sharp"],["type","smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[["vendor","Samsung"],"model",["type","tablet"]],[/smart-tv.+(samsung)/i],["vendor",["type","smarttv"],"model"],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[["vendor","Samsung"],"model",["type","mobile"]],[/sie-(\w*)/i],["model",["vendor","Siemens"],["type","mobile"]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[["vendor","Nokia"],"model",["type","mobile"]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],["model",["vendor","Acer"],["type","tablet"]],[/android.+([vl]k\-?\d{3})\s+build/i],["model",["vendor","LG"],["type","tablet"]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[["vendor","LG"],"model",["type","tablet"]],[/(lg) netcast\.tv/i],["vendor","model",["type","smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],["model",["vendor","LG"],["type","mobile"]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],["vendor","model",["type","tablet"]],[/android.+(ideatab[a-z0-9\-\s]+)/i],["model",["vendor","Lenovo"],["type","tablet"]],[/(lenovo)[_\s-]?([\w-]+)/i],["vendor","model",["type","mobile"]],[/linux;.+((jolla));/i],["vendor","model",["type","mobile"]],[/((pebble))app\/[\d\.]+\s/i],["vendor","model",["type","wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],["vendor","model",["type","mobile"]],[/crkey/i],[["model","Chromecast"],["vendor","Google"],["type","smarttv"]],[/android.+;\s(glass)\s\d/i],["model",["vendor","Google"],["type","wearable"]],[/android.+;\s(pixel c)[\s)]/i],["model",["vendor","Google"],["type","tablet"]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],["model",["vendor","Google"],["type","mobile"]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","mobile"]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[["model",/_/g," "],["vendor","Xiaomi"],["type","tablet"]],[/android.+;\s(m[1-5]\snote)\sbuild/i],["model",["vendor","Meizu"],["type","mobile"]],[/(mz)-([\w-]{2,})/i],[["vendor","Meizu"],"model",["type","mobile"]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],["model",["vendor","OnePlus"],["type","mobile"]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],["model",["vendor","RCA"],["type","tablet"]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],["model",["vendor","Dell"],["type","tablet"]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],["model",["vendor","Verizon"],["type","tablet"]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[["vendor","Barnes & Noble"],"model",["type","tablet"]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],["model",["vendor","NuVision"],["type","tablet"]],[/android.+;\s(k88)\sbuild/i],["model",["vendor","ZTE"],["type","tablet"]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],["model",["vendor","Swiss"],["type","mobile"]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],["model",["vendor","Swiss"],["type","tablet"]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],["model",["vendor","Zeki"],["type","tablet"]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[["vendor","Dragon Touch"],"model",["type","tablet"]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],["model",["vendor","Insignia"],["type","tablet"]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],["model",["vendor","NextBook"],["type","tablet"]],[/android.+[;\/]\s*(Xtreme_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[["vendor","Voice"],"model",["type","mobile"]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[["vendor","LvTel"],"model",["type","mobile"]],[/android.+;\s(PH-1)\s/i],["model",["vendor","Essential"],["type","mobile"]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],["model",["vendor","Envizen"],["type","tablet"]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],["vendor","model",["type","tablet"]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],["model",["vendor","MachSpeed"],["type","tablet"]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],["vendor","model",["type","tablet"]],[/android.+[;\/]\s*TU_(1491)\s+build/i],["model",["vendor","Rotor"],["type","tablet"]],[/android.+(KS(.+))\s+build/i],["model",["vendor","Amazon"],["type","tablet"]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],["vendor","model",["type","tablet"]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[["type",i.lowerize],"vendor","model"],[/[\s\/\(](smart-?tv)[;\)]/i],[["type","smarttv"]],[/(android[\w\.\s\-]{0,9});.+build/i],["model",["vendor","Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],["version",["name","EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],["version",["name","Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],["name","version"],[/rv:([\w\.]{1,9}).+(gecko)/i],["version","name"]],os:[[/microsoft\s(windows)\s(vista|xp)/i],["name","version"],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],["name",["version",o,u]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[["name","Windows"],["version",o,u]],[/\((bb)(10);/i],[["name","BlackBerry"],"version"],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],["name","version"],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[["name","Symbian"],"version"],[/\((series40);/i],["name"],[/mozilla.+\(mobile;.+gecko.+firefox/i],[["name","Firefox OS"],"version"],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],["name","version"],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[["name","Chromium OS"],"version"],[/(sunos)\s?([\w\.\d]*)/i],[["name","Solaris"],"version"],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],["name","version"],[/(haiku)\s(\w+)/i],["name","version"],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[["version",/_/g,"."],["name","iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[["name","Mac OS"],["version",/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],["name","version"]]},f=function(t,n){"object"==typeof t&&(n=t,t=r);if(this instanceof f){var o=t||(e&&e.navigator&&e.navigator.userAgent?e.navigator.userAgent:""),u=n?i.extend(a,n):a;return this.getBrowser=function(){var e={name:r,version:r};return s.call(e,o,u.browser),e.major=i.major(e.version),e},this.getCPU=function(){var e={architecture:r};return s.call(e,o,u.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return s.call(e,o,u.device),e},this.getEngine=function(){var e={name:r,version:r};return s.call(e,o,u.engine),e},this.getOS=function(){var e={name:r,version:r};return s.call(e,o,u.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=e,this},this}return(new f(t,n)).getResult()};f.VERSION="0.7.21",f.BROWSER={NAME:"name",MAJOR:"major",VERSION:"version"},f.CPU={ARCHITECTURE:"architecture"},f.DEVICE={MODEL:"model",VENDOR:"vendor",TYPE:"type",CONSOLE:"console",MOBILE:"mobile",SMARTTV:"smarttv",TABLET:"tablet",WEARABLE:"wearable",EMBEDDED:"embedded"},f.ENGINE={NAME:"name",VERSION:"version"},f.OS={NAME:"name",VERSION:"version"},"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=f),n.UAParser=f):e&&(e.UAParser=f);var l=e&&(e.jQuery||e.Zepto);if(l&&!l.ua){var c=new f;l.ua=c.getResult(),l.ua.get=function(){return c.getUA()},l.ua.set=function(e){c.setUA(e),e=c.getResult();for(var t in e)l.ua[t]=e[t]}}})("object"==typeof window?window:this)},{}]},{},[1])(1)});
/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.9 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t!="string"?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function v(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function m(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,m=t&&t.split("/"),g=m,y=o.map,b=y&&y["*"];e&&e.charAt(0)==="."&&(t?(getOwn(o.pkgs,t)?g=m=[t]:g=m.slice(0,m.length-1),e=g.concat(e.split("/")),v(e),i=getOwn(o.pkgs,r=e[0]),e=e.join("/"),i&&e===r+"/"+i.main&&(e=r)):e.indexOf("./")===0&&(e=e.substring(2)));if(n&&y&&(m||b)){u=e.split("/");for(a=u.length;a>0;a-=1){l=u.slice(0,a).join("/");if(m)for(f=m.length;f>0;f-=1){s=getOwn(y,m.slice(0,f).join("/"));if(s){s=getOwn(s,l);if(s){c=s,h=a;break}}}if(c)break;!p&&b&&getOwn(b,l)&&(p=getOwn(b,l),d=a)}!c&&p&&(c=p,h=d),c&&(u.splice(0,h,c),e=u.join("/"))}return e}function g(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function y(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.require([e]),!0}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function w(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,v=!0,g="";return e||(v=!1,e="_@r"+(p+=1)),a=b(e),f=a[0],e=a[1],f&&(f=m(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?g=o.normalize(e,function(e){return m(e,l,i)}):g=m(e,l,i):(g=m(e,l,i),a=b(g),f=a[0],g=a[1],n=!0,s=r.nameToUrl(g))),u=f&&!o&&!n?"_unnormalized"+(d+=1):"",{prefix:f,name:g,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:v,id:(f?f+"!"+g:g)+u}}function E(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function S(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=E(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function x(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function T(){globalDefQueue.length&&(apsp.apply(l,[l.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function N(e){delete u[e],delete a[e]}function C(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):C(o,t,n))}),n[r]=!0)}function k(){var e,n,i,u,f=o.waitSeconds*1e3,l=f&&r.startTime+f<(new Date).getTime(),c=[],h=[],p=!1,d=!0;if(t)return;t=!0,eachProp(a,function(t){e=t.map,n=e.id;if(!t.enabled)return;e.isDefine||h.push(t);if(!t.error)if(!t.inited&&l)y(n)?(u=!0,p=!0):(c.push(n),g(n));else if(!t.inited&&t.fetched&&e.isDefine){p=!0;if(!e.prefix)return d=!1}});if(l&&c.length)return i=makeError("timeout","Load timeout for modules: "+c,null,c),i.contextName=r.contextName,x(i);d&&each(h,function(e){C(e,{},{})}),(!l||u)&&p&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,k()},50)),t=!1}function L(e){hasProp(c,e[0])||E(w(e[0],null,!0)).init(e[1],e[2])}function A(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function O(e){var t=e.currentTarget||e.srcElement;return A(t,r.onScriptLoad,"load","onreadystatechange"),A(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function M(){var e;T();while(l.length){e=l.shift();if(e[0]===null)return x(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));L(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p=1,d=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,n=getOwn(o.pkgs,e.map.id);return t=n?getOwn(o.config,e.map.id+"/"+n.main):getOwn(o.config,e.map.id),t||{}},exports:c[e.map.id]}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&(t=this.module,t&&t.exports!==undefined&&t.exports!==this.exports?s=t.exports:s===undefined&&this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",x(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),N(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=w(e.prefix);this.depMaps.push(n),S(n,"defined",bind(this,function(n){var i,s,a,f=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null,c=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(f=n.normalize(f,function(e){return m(e,l,!0)})||""),s=w(e.prefix+"!"+f,this.map.parentMap),S(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&N(e.map.id)}),x(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=w(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),E(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return x(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),c([u],i)}),n.load(e.name,c,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=w(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,S(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&S(e,"error",bind(this,this.errback))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:w,nextTick:req.nextTick,onError:x,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.pkgs,n=o.shim,i={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?t==="map"?(o.map||(o.map={}),mixin(o[t],e,!0,!0)):mixin(o[t],e,!0):o[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),n[t]=e}),o.shim=n),e.packages&&(each(e.packages,function(e){var n;e=typeof e=="string"?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),o.pkgs=t),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=w(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?x(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=w(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:x(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(M(),r.nextTick(function(){M(),p=E(w(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),k()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(m(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,w(e,t,!1,!0).id)},specified:function(e){return e=w(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){T();var n=w(e,t,!0),r=getOwn(u,e);g(e),delete c[e],delete h[n.url],delete f[e],r&&(r.events.defined&&(f[e]=r.events),N(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&E(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;T();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);L(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(y(e))return;return x(makeError("nodefine","No define call for "+e,null,[e]))}L([e,i.deps||[],i.exportsFn])}k()},nameToUrl:function(e,t,n){var r,i,s,u,a,f,l,c,h;if(req.jsExtRegExp.test(e))c=e+(t||"");else{r=o.paths,i=o.pkgs,a=e.split("/");for(f=a.length;f>0;f-=1){l=a.slice(0,f).join("/"),s=getOwn(i,l),h=getOwn(r,l);if(h){isArray(h)&&(h=h[0]),a.splice(0,f,h);break}if(s){e===s.name?u=s.location+"/"+s.main:u=s.location,a.splice(0,f,u);break}}c=a.join("/"),c+=t||(/^data\:|\?/.test(c)||n?"":".js"),c=(c.charAt(0)==="/"||c.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+c}return o.urlArgs?c+((c.indexOf("?")===-1?"?":"&")+o.urlArgs):c},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=O(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=O(e);if(!y(t.id))return x(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("3e9b3b35b01ec516a528dac81123806f",function(){});
(function(){function n(e){function r(e,n){if(n===undefined)return;if(typeof n=="object")for(var i in n)n.hasOwnProperty(i)&&r(e+"["+i+"]",n[i]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}var t=[];for(var n in e)e.hasOwnProperty(n)&&r(n,e[n]);return t.join("&")}var e=window.onerror,t=/(Unknown script code|uplListener|jsbSmile)/g;window.onerror=function(r,i,s,o,u){e&&e();if(r==="Error loading script"||r==="Script error."||r.match(t))return;if(!i&&!u)return;if(u&&u.stack&&/\beval\b|chrome-extension/.test(u.stack))return;if(i&&i.indexOf("alpari")===-1)return;var a=new XMLHttpRequest;a.open("POST",SITE_URLS.gtt_utils_client_errors,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(n({csrf:document.body.dataset.csrf,"js-report":{error:r,file:i,lineNumber:s,col:o,stack:u&&u.stack,page:document.location.toString(),userAgent:navigator.userAgent}}))}})(),define("eec4ca5b41495d0b02f7ff69f787b877",function(){});
(function(e){e.console=e.console||{};var t=function(){};["log","warn","error"].forEach(function(n){e.console[n]=e.console[n]||t})})(window),define("b4c18e5d86fdfdb86d27f11cc0118c15",function(){});
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.

//     Underscore may be freely distributed under the MIT license.

/*!
 * jQuery JavaScript Library v1.7.1
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Mon Nov 21 21:11:03 2011 -0500
 */

/*!
     * Sizzle CSS Selector Engine
     *  Copyright 2011, The Dojo Foundation
     *  Released under the MIT, BSD, and GPL Licenses.
     *  More information: http://sizzlejs.com/
     */

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.

//     Backbone may be freely distributed under the MIT license.

// Copyright (c) Alexandru Marasteanu <alexaholic [at) gmail (dot] com>

//! moment.js
//! version : 2.18.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/**
 * jQuery.ScrollTo
 * Copyright (c) 2007-2009 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * Date: 5/25/2009
 *
 * @projectDescription Easy element scrolling using jQuery.
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 * Works with jQuery +1.2.6. Tested on FF 2/3, IE 6/7/8, Opera 9.5/6, Safari 3, Chrome 1 on WinXP.
 *
 * @author Ariel Flesler
 * @version 1.4.2
 *
 * @id jQuery.scrollTo
 * @id jQuery.fn.scrollTo
 * @param {String, Number, DOMElement, jQuery, Object} target Where to scroll the matched elements.
 *    The different options for target are:
 *      - A number position (will be applied to all axes).
 *      - A string position ('44', '100px', '+=90', etc ) will be applied to all axes
 *      - A jQuery/DOM element ( logically, child of the element to scroll )
 *      - A string selector, that will be relative to the element to scroll ( 'li:eq(2)', etc )
 *      - A hash { top:x, left:y }, x and y can be any kind of number/string like above.
*       - A percentage of the container's dimension/s, for example: 50% to go to the middle.
 *      - The string 'max' for go-to-end. 
 * @param {Number} duration The OVERALL length of the animation, this argument can be the settings object instead.
 * @param {Object,Function} settings Optional set of settings or the onAfter callback.
 *   @option {String} axis Which axis must be scrolled, use 'x', 'y', 'xy' or 'yx'.
 *   @option {Number} duration The OVERALL length of the animation.
 *   @option {String} easing The easing method for the animation.
 *   @option {Boolean} margin If true, the margin of the target element will be deducted from the final position.
 *   @option {Object, Number} offset Add/deduct from the end position. One number for both axes or { top:x, left:y }.
 *   @option {Object, Number} over Add/deduct the height/width multiplied by 'over', can be { top:x, left:y } when using both axes.
 *   @option {Boolean} queue If true, and both axis are given, the 2nd axis will only be animated after the first one ends.
 *   @option {Function} onAfter Function to be called after the scrolling ends. 
 *   @option {Function} onAfterFirst If queuing is activated, this function will be called after the first scrolling ends.
 * @return {jQuery} Returns the same jQuery object, for chaining.
 *
 * @desc Scroll to a fixed position
 * @example $('div').scrollTo( 340 );
 *
 * @desc Scroll relatively to the actual position
 * @example $('div').scrollTo( '+=340px', { axis:'y' } );
 *
 * @dec Scroll using a selector (relative to the scrolled element)
 * @example $('div').scrollTo( 'p.paragraph:eq(2)', 500, { easing:'swing', queue:true, axis:'xy' } );
 *
 * @ Scroll to a DOM element (same for jQuery object)
 * @example var second_child = document.getElementById('container').firstChild.nextSibling;
 *          $('#container').scrollTo( second_child, { duration:500, axis:'x', onAfter:function(){
 *              alert('scrolled!!');                                                                   
 *          }});
 *
 * @desc Scroll on both axes, to different values
 * @example $('div').scrollTo( { top: 300, left:'+=200' }, { axis:'xy', offset:-20 } );
 */

/*!
 * jQuery Form Plugin
 * version: 3.36.0-2013.06.16
 * @requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

/**
	 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
	 *
	 * @codingstandard ftlabs-jsv2
	 * @copyright The Financial Times Limited [All Rights Reserved]
	 * @license MIT License (see LICENSE.txt)
	 */

/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright В© 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright В© 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */

/*! jQuery UI - v1.11.4 - 2017-09-18
* http://jqueryui.com
* Includes: core.js, datepicker.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Core 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Datepicker 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */

/*! jQuery UI - v1.11.4 - 2017-09-18
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, slider.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

/*!
 * jQuery UI Mouse 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */

/*!
 * jQuery UI Slider 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */

/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/**
The MIT License (MIT)

Copyright (c) 2010-2014 Wandenberg Peixoto <wandenberg@gmail.com>, Rogério Carvalho Schneider <stockrt@gmail.com>

This file is part of Nginx Push Stream Module.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

pushstream.js

Created: Nov 01, 2011
Authors: Wandenberg Peixoto <wandenberg@gmail.com>, Rogério Carvalho Schneider <stockrt@gmail.com>
 */

requirejs.config({waitSeconds:300,map:{"*":{"global/PageClasses/ProjectPage":"mobile/pages/all/ProjectPage","global/elements/Accordion/Accordion":"mobile/elements/Accordion/Accordion","global/elements/DataList/dataListFilterFactory":"mobile/elements/DataList/dataListFilterFactory","global/elements/Pagination/Paginator":"mobile/elements/Pagination/Paginator","global/elements/Queries/AjaxError":"mobile/elements/Queries/AjaxError","global_forms/Abstract/FormFieldStatus":"mobile/FormClasses/Abstract/FormFieldStatus","global_forms/Fields/Date/DateFieldView":"mobile/FormClasses/Fields/Date/DateFieldView","global_forms/Fields/Files/FilesFieldView":"mobile/FormClasses/Fields/Files/FilesFieldView","global_forms/Fields/Text/TextInputFieldView":"mobile/FormClasses/Fields/Text/TextInputFieldView","global_forms/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationView":"mobile/FormClasses/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationView","global_forms/Form/Verification/VerificationModel":"mobile/FormClasses/Form/Verification/VerificationModel","global_forms/Form/Verification/VerificationView":"mobile/FormClasses/Form/Verification/VerificationView","global_forms/Inputs/Abstract/AbstractInputView":"mobile/FormClasses/Inputs/Abstract/AbstractInputView","global_forms/Inputs/Textarea/TextareaInputView":"mobile/FormClasses/Inputs/Textarea/TextareaInputView","global_forms/Inputs/TextCurrency/TextCurrencyInputView":"mobile/FormClasses/Inputs/TextCurrency/TextCurrencyInputView","global_forms/Inputs/Radio/RadioInputView":"FormClasses/Inputs/Radio/RadioInputView","FormClasses/Inputs/Select/DynamicSelectInputView":"mobile/FormClasses/Inputs/Select/DynamicSelectInputView"},"mobile/pages/all/ProjectPage":{"global/PageClasses/ProjectPage":"global/PageClasses/ProjectPage"},"mobile/elements/Accordion/Accordion":{"global/elements/Accordion/Accordion":"global/elements/Accordion/Accordion"},"mobile/elements/DataList/dataListFilterFactory":{"global/elements/DataList/dataListFilterFactory":"global/elements/DataList/dataListFilterFactory"},"mobile/elements/Pagination/Paginator":{"global/elements/Pagination/Paginator":"global/elements/Pagination/Paginator"},"mobile/elements/Queries/AjaxError":{"global/elements/Queries/AjaxError":"global/elements/Queries/AjaxError"},"mobile/FormClasses/Abstract/FormFieldStatus":{"global_forms/Abstract/FormFieldStatus":"global_forms/Abstract/FormFieldStatus"},"mobile/FormClasses/Fields/Files/FilesFieldView":{"global_forms/Fields/Files/FilesFieldView":"global_forms/Fields/Files/FilesFieldView"},"mobile/FormClasses/Fields/Date/DateFieldView":{"global_forms/Fields/Date/DateFieldView":"global_forms/Fields/Date/DateFieldView"},"mobile/FormClasses/Fields/Text/TextInputFieldView":{"global_forms/Fields/Text/TextInputFieldView":"global_forms/Fields/Text/TextInputFieldView"},"mobile/FormClasses/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationView":{"global_forms/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationView":"global_forms/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationView"},"mobile/FormClasses/Form/Verification/VerificationModel":{"global_forms/Form/Verification/VerificationModel":"global_forms/Form/Verification/VerificationModel"},"mobile/FormClasses/Form/Verification/VerificationView":{"global_forms/Form/Verification/VerificationView":"global_forms/Form/Verification/VerificationView"},"mobile/FormClasses/Inputs/Abstract/AbstractInputView":{"global_forms/Inputs/Abstract/AbstractInputView":"global_forms/Inputs/Abstract/AbstractInputView"},"mobile/FormClasses/Inputs/TextCurrency/TextCurrencyInputView":{"global_forms/Inputs/TextCurrency/TextCurrencyInputView":"global_forms/Inputs/TextCurrency/TextCurrencyInputView"},"mobile/FormClasses/Inputs/Textarea/TextareaInputView":{"global_forms/Inputs/Textarea/TextareaInputView":"global_forms/Inputs/Textarea/TextareaInputView"},"FormClasses/Inputs/Radio/RadioInputView":{"global_forms/Inputs/Radio/RadioInputView":"global_forms/Inputs/Radio/RadioInputView"},"mobile/FormClasses/Inputs/Select/DynamicSelectInputView":{"FormClasses/Inputs/Select/DynamicSelectInputView":"FormClasses/Inputs/Select/DynamicSelectInputView"}},shim:{underscore:{exports:"_"},"underscore.string":{deps:["underscore"],exports:"_"},Backbone:{deps:["jquery","underscore"],exports:"Backbone"},"vendors/Backbone/Backbone.NestedModel":{deps:["Backbone"],exports:"Backbone"},Modernizr:{exports:"Modernizr"},"vendors/jquery/plugins/jquery.easing":["jquery"],"vendors/jquery/plugins/jquery.transit":["jquery"],"vendors/jquery/plugins/jquery.slimscroll":["jquery"],"vendors/jquery/plugins/jquery.form":["jquery"],"vendors/jquery/plugins/jquery.cookie":["jquery"],"vendors/jquery/plugins/jquery.scrollTo":["jquery"],"vendors/jquery/plugins/jquery.viewportHeight":["jquery"],"vendors/jquery/plugins/jquery.backgroundPosition":["jquery"],"vendors/jquery/plugins/jquery.autosize":["jquery"],"vendors/jquery/plugins/jquery.focusable":["jquery"],"vendors/jquery/plugins/jquery.flot":["jquery"],jQueryUI:["jquery"],"vendors/jquery/widgets/jquery.ui.mouse":["jQueryUI"],"vendors/jquery/widgets/jquery.ui.sortable":["vendors/jquery/widgets/jquery.ui.mouse"],"vendors/jquery/widgets/jquery.ui.sortable2":["vendors/jquery/widgets/jquery.ui.sortable"],"vendors/pushstream":{exports:"PushStream"},"vendors/twig/twig":{exports:"Twig"},"vendors/twig/twigFilters":{deps:["vendors/twig/twig"],exports:"Twig"},"vendors/highstock/highstock.src":{exports:"Highcharts",deps:["jquery"]}}}),define("857589cad3c29dcfbf4779995fe96237",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.3";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,0,t):e[0]},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return t.length==0&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,f<=0?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]==null&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=M(e[o],t[o],n,r)))break}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)){o++;if(!(u=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(e);for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=""+ ++P;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){n=x.defaults({},n,x.templateSettings);var r=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),i=u+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,x);var a=function(e){return o.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?parseFloat(r):f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n+(a[n][r].namespace?".":"")+a[n][r].namespace,a[n][r],a[n][r].data)}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(s.expando)}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function vt(e,t){t.src?s.ajax({url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function Lt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?xt:Tt,o=0,u=i.length;if(r>0){if(n!=="border")for(;o<u;o++)n||(r-=parseFloat(s.css(e,"padding"+i[o]))||0),n==="margin"?r+=parseFloat(s.css(e,n+i[o]))||0:r-=parseFloat(s.css(e,"border"+i[o]+"Width"))||0;return r+"px"}r=Nt(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;o<u;o++)r+=parseFloat(s.css(e,"padding"+i[o]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+i[o]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+i[o]))||0);return r+"px"}function Gt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(Rt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Yt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Xt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Yt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Yt(e,n,r,i,"*",o)),c}function Zt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function en(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||Ot.test(e)?r(e,i):en(e+"["+(typeof i=="object"||s.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)en(e+"["+i+"]",t[i],n,r);else r(e,t)}function tn(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function nn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function fn(){try{return new e.XMLHttpRequest}catch(t){}}function ln(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function bn(){return setTimeout(wn,0),yn=s.now()}function wn(){yn=t}function En(e,t){var n={};return s.each(gn.concat.apply([],gn.slice(0,t)),function(){n[this]=e}),n}function Sn(e){if(!cn[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){hn||(hn=n.createElement("iframe"),hn.frameBorder=hn.width=hn.height=0),t.appendChild(hn);if(!pn||!hn.createElement)pn=(hn.contentWindow||hn.contentDocument).document,pn.write((n.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),pn.close();r=pn.createElement(e),pn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(hn)}cn[e]=i}return cn[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)i.access(e,f,n[f],s,o,r);return e}if(r!==t){s=!u&&s&&i.isFunction(r);for(var l=0;l<a;l++)o(e[l],n,s?r.call(e[l],l,o(e[l],n)):r,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test(" ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?h(o):u==="function"&&(!e.unique||!d.has(o))&&n.push(o)},p=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,c=f||0,f=0,l=n.length;for(;n&&c<l;c++)if(n[c].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}a=!1,n&&(e.once?i===!0?d.disable():n=[]:r&&r.length&&(i=r.shift(),d.fireWith(i[0],i[1])))},d={add:function(){if(n){var e=n.length;h(arguments),a?l=n.length:i&&i!==!0&&(f=e,p(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){a&&s<=l&&(l--,s<=c&&c--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&d.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(a?e.once||r.push([t,n]):(!e.once||!i)&&p(t,n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v,m=n.createElement("div"),g=n.documentElement;m.setAttribute("className","t"),m.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=m.getElementsByTagName("*"),i=m.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=m.getElementsByTagName("input")[0],t={leadingWhitespace:m.firstChild.nodeType===3,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:m.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete m.test}catch(y){t.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",function(){t.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),m.appendChild(a),l=n.createDocumentFragment(),l.appendChild(m.lastChild),t.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,l.removeChild(a),l.appendChild(m),m.innerHTML="",e.getComputedStyle&&(f=n.createElement("div"),f.style.width="0",f.style.marginRight="0",m.style.width="2px",m.appendChild(f),t.reliableMarginRight=(parseInt((e.getComputedStyle(f,null)||{marginRight:0}).marginRight,10)||0)===0);if(m.attachEvent)for(d in{submit:1,change:1,focusin:1})p="on"+d,v=p in m,v||(m.setAttribute(p,"return;"),v=typeof m[p]=="function"),t[d+"Bubbles"]=v;return l.removeChild(m),l=o=u=f=m=a=null,s(function(){var e,r,i,o,u,a,f,l,h,p,d,g=n.getElementsByTagName("body")[0];if(!g)return;f=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",h="visibility:hidden;border:0;",p="style='"+l+"border:5px solid #000;padding:0;'",d="<div "+p+"><div></div></div>"+"<table "+p+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=n.createElement("div"),e.style.cssText=h+"width:0;height:0;position:static;top:0;margin-top:"+f+"px",g.insertBefore(e,g.firstChild),m=n.createElement("div"),e.appendChild(m),m.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=m.getElementsByTagName("td"),v=c[0].offsetHeight===0,c[0].style.display="",c[1].style.display="none",t.reliableHiddenOffsets=v&&c[0].offsetHeight===0,m.innerHTML="",m.style.width=m.style.paddingLeft="1px",s.boxModel=t.boxModel=m.offsetWidth===2,typeof m.style.zoom!="undefined"&&(m.style.display="inline",m.style.zoom=1,t.inlineBlockNeedsLayout=m.offsetWidth===2,m.style.display="",m.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=m.offsetWidth!==2),m.style.cssText=l+h,m.innerHTML=d,r=m.firstChild,i=r.firstChild,u=r.nextSibling.firstChild.firstChild,a={doesNotAddBorder:i.offsetTop!==5,doesAddBorderForTableAndCells:u.offsetTop===5},i.style.position="fixed",i.style.top="20px",a.fixedPosition=i.offsetTop===20||i.offsetTop===15,i.style.position=i.style.top="",r.style.overflow="hidden",r.style.position="relative",a.subtractsBorderForOverflowNotVisible=i.offsetTop===-5,a.doesNotIncludeMarginInBodyOffset=g.offsetTop!==f,g.removeChild(e),m=e=null,s.extend(t,a)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u=null;if(typeof e=="undefined"){if(this.length){u=s.data(this[0]);if(this[0].nodeType===1&&!s._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var a=0,f=i.length;a<f;a++)o=i[a].name,o.indexOf("data-")===0&&(o=s.camelCase(o.substring(5)),c(this[0],o,u[o]));s._data(this[0],"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(u=this.triggerHandler("getData"+r[1]+"!",[r[0]]),u===t&&this.length&&(u=s.data(this[0],e),u=c(this[0],e,u)),u===t&&r[1]?this.data(r[0]):u):this.each(function(){var t=s(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),s.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?s.queue(this[0],e):this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise()}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,e,t,!0,s.attr)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,e,t,!0,s.prop)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.nodeName.toLowerCase()]||s.valHooks[o.type],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.nodeName.toLowerCase()]||s.valHooks[this.type];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;u<o;u++)i=r[u],i&&(n=s.propFix[i]||i,s.attr(e,i,""),e.removeAttribute(E?i:n),w.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/\bhover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=[],f,l,c,h,p,d,v,m,g,y,b;o[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){h=s(this),h.context=this.ownerDocument||this;for(c=n.target;c!=this;c=c.parentNode||this){d={},m=[],h[0]=c;for(f=0;f<i;f++)g=r[f],y=g.selector,d[y]===t&&(d[y]=g.quick?D(c,g.quick):h.is(y)),d[y]&&m.push(g);m.length&&a.push({elem:c,matches:m})}}r.length>i&&a.push({elem:this,matches:r.slice(i)});for(f=0;f<a.length&&!n.isPropagationStopped();f++){v=a[f],n.currentTarget=v.elem;for(l=0;l<v.matches.length&&!n.isImmediatePropagationStopped();l++){g=v.matches[l];if(u||!n.namespace&&!g.namespace||n.namespace_re&&n.namespace_re.test(g.namespace))n.data=g.data,n.handleObj=g,p=((s.event.special[g.origType]||{}).handle||g.handler).apply(v.elem,o),p!==t&&(n.result=p,p===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.POS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling(e.parentNode.firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.isFunction(e)?this.each(function(t){var n=s(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e)):s.text(this)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(s.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else s.isFunction(e)?this.each(function(t){var n=s(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,vt)}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||!nt.test("<"+e.nodeName)?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o;t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);var u=[],a;for(var f=0,l;(l=e[f])!=null;f++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!Z.test(l))l=t.createTextNode(l);else{l=l.replace(Q,"<$1></$2>");var c=(G.exec(l)||["",""])[1].toLowerCase(),h=ot[c]||ot._default,p=h[0],d=t.createElement("div");t===n?ut.appendChild(d):V(t).appendChild(d),d.innerHTML=h[1]+l+h[2];while(p--)d=d.lastChild;if(!s.support.tbody){var v=Y.test(l),m=c==="table"&&!v?d.firstChild&&d.firstChild.childNodes:h[1]==="<table>"&&!v?d.childNodes:[];for(a=m.length-1;a>=0;--a)s.nodeName(m[a],"tbody")&&!m[a].childNodes.length&&m[a].parentNode.removeChild(m[a])}!s.support.leadingWhitespace&&K.test(l)&&d.insertBefore(t.createTextNode(K.exec(l)[0]),d.firstChild),l=d.childNodes}var g;if(!s.support.appendChecked)if(l[0]&&typeof (g=l.length)=="number")for(a=0;a<g;a++)pt(l[a]);else pt(l);l.nodeType?u.push(l):u=s.merge(u,l)}if(r){o=function(e){return!e.type||it.test(e.type)};for(f=0;u[f];f++)if(i&&s.nodeName(u[f],"script")&&(!u[f].type||u[f].type.toLowerCase()==="text/javascript"))i.push(u[f].parentNode?u[f].parentNode.removeChild(u[f]):u[f]);else{if(u[f].nodeType===1){var y=s.grep(u[f].getElementsByTagName("script"),o);u.splice.apply(u,[f+1,0].concat(y))}r.appendChild(u[f])}}return u},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var mt=/alpha\([^)]*\)/i,gt=/opacity=([^)]*)/,yt=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,wt=/^-?\d/,Et=/^([\-+])=([\-+.\de]+)/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Left","Right"],Tt=["Top","Bottom"],Nt,Ct,kt;s.fn.css=function(e,n){return arguments.length===2&&n===t?this:s.access(this,e,n,!0,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)})},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Nt(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=Et.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Nt)return Nt(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),s.curCSS=s.css,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?Lt(e,t,r):(s.swap(e,St,function(){i=Lt(e,t,r)}),i)},set:function(e,t){if(!bt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(mt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=mt.test(o)?o.replace(mt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){var n;return s.swap(e,{display:"inline-block"},function(){t?n=Nt(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),n.defaultView&&n.defaultView.getComputedStyle&&(Ct=function(e,t){var n,r,i;return t=t.replace(yt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),n}),n.documentElement.currentStyle&&(kt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!bt.test(s)&&wt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Nt=Ct||kt,s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)});var At=/%20/g,Ot=/\[\]$/,Mt=/\r?\n/g,_t=/#.*$/,Dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Pt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ht=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,jt=/^\/\//,Ft=/\?/,It=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,qt=/^(?:select|textarea)/i,Rt=/\s+/,Ut=/([?&])_=[^&]*/,zt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Wt=s.fn.load,Xt={},Vt={},$t,Jt,Kt=["*/"]+["*"];try{$t=i.href}catch(Qt){$t=n.createElement("a"),$t.href="",$t=$t.href}Jt=zt.exec($t.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&Wt)return Wt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(It,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||qt.test(this.nodeName)||Pt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Zt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Zt(e,t),e},ajaxSettings:{url:$t,isLocal:Ht.test(Jt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Kt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Gt(Xt),ajaxTransport:Gt(Vt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?tn(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=nn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=Dt.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(_t,"").replace(jt,Jt[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(Rt),r.crossDomain==null&&(g=zt.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==Jt[1]&&g[2]==Jt[2]&&(g[3]||(g[1]==="http:"?80:443))==(Jt[3]||(Jt[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Yt(Xt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Bt.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(Ft.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Ut,"$1_="+x);r.url=T+(T===r.url?(Ft.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Kt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Yt(Vt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)en(o,e[o],n,i);return r.join("&").replace(At,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var rn=s.now(),sn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+rn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(sn.test(t.url)||i&&sn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(sn,c),t.url===f&&(i&&(l=l.replace(sn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var on=e.ActiveXObject?function(){for(var e in an)an[e](0,1)}:!1,un=0,an;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&fn()||ln()}:fn,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,on&&delete an[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p),h.text=u.responseText;try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++un,on&&(an||(an={},s(e).unload(on)),an[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var cn={},hn,pn,dn=/^(?:toggle|show|hide)$/,vn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,mn,gn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],yn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(En("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),i===""&&s.css(r,"display")==="none"&&s._data(r,"olddisplay",Sn(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(En("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(En("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]),u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||Sn(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],dn.test(u)?(d=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),d?(s._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=vn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(s.cssNumber[a]?"":"px"),p!=="px"&&(s.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,s.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:En("show",1),slideUp:En("hide",1),slideToggle:En("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=yn||bn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){i.options.hide&&s._data(i.elem,"fxshow"+i.prop)===t&&s._data(i.elem,"fxshow"+i.prop,i.start)},u()&&s.timers.push(u)&&!mn&&(mn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=yn||bn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(mn),mn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(["width","height"],function(e,t){s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),s.expr&&s.expr.filters&&(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?s.fn.offset=function(e){var t=this[0],n;if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);try{n=t.getBoundingClientRect()}catch(r){}var i=t.ownerDocument,o=i.documentElement;if(!n||!s.contains(o,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var u=i.body,a=Nn(i),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||s.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||s.support.boxModel&&o.scrollLeft||u.scrollLeft,p=n.top+c-f,d=n.left+h-l;return{top:p,left:d}}:s.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){s.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return s.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,o=t.ownerDocument,u=o.documentElement,a=o.body,f=o.defaultView,l=f?f.getComputedStyle(t,null):t.currentStyle,c=t.offsetTop,h=t.offsetLeft;while((t=t.parentNode)&&t!==a&&t!==u){if(s.support.fixedPosition&&l.position==="fixed")break;n=f?f.getComputedStyle(t,null):t.currentStyle,c-=t.scrollTop,h-=t.scrollLeft,t===r&&(c+=t.offsetTop,h+=t.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(t.nodeName))&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(c+=parseFloat(n.borderTopWidth)||0,h+=parseFloat(n.borderLeftWidth)||0),l=n}if(l.position==="relative"||l.position==="static")c+=a.offsetTop,h+=a.offsetLeft;return s.support.fixedPosition&&l.position==="fixed"&&(c+=Math.max(u.scrollTop,a.scrollTop),h+=Math.max(u.scrollLeft,a.scrollLeft)),{top:c,left:h}},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each(["Left","Top"],function(e,n){var r="scroll"+n;s.fn[r]=function(n){var i,o;return n===t?(i=this[0],i?(o=Nn(i),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:s.support.boxModel&&o.document.documentElement[r]||o.document.body[r]:i[r]):null):this.each(function(){o=Nn(this),o?o.scrollTo(e?s(o).scrollLeft():n,e?n:s(o).scrollTop()):this[r]=n})}}),s.each(["Height","Width"],function(e,n){var r=n.toLowerCase();s.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,r,"padding")):this[r]():null},s.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,r,e?"margin":"border")):this[r]():null},s.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(s.isFunction(e))return this.each(function(t){var n=s(this);n[r](e.call(this,t,n[r]()))});if(s.isWindow(i)){var o=i.document.documentElement["client"+n],u=i.document.body;return i.document.compatMode==="CSS1Compat"&&o||u&&u["client"+n]||o}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var a=s.css(i,r),f=parseFloat(a);return s.isNumeric(f)?f:a}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})}(window),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="0.9.10";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object")for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;var s=n.split(a);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},c=o.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,l=o.length;a<l;a++){e=o[a];if(r=this._events[e]){s=[];if(t||n)for(c=0,h=r.length;c<h;c++)i=r[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&s.push(i);this._events[e]=s}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,typeof t=="object"?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return;if(e)e.off(t,typeof t=="object"?this:n,this),!t&&!n&&delete r[e._listenerId];else{typeof t=="object"&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}};c.bind=c.on,c.unbind=c.off,u.extend(o,c);var h=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(h.prototype,c,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){if(!e.set(e.parse(n,r),r))return!1;t&&t(e,n,r)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o,a=this.attributes;return e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t,r&&(!n||!n.wait)&&!this.set(r,n)?!1:(n=u.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=u.extend({},a,r)),n.parse===void 0&&(n.parse=!0),i=n.success,n.success=function(e,t,n){e.attributes=a;var s=e.parse(t,n);n.wait&&(s=u.extend(r||{},s));if(u.isObject(s)&&!e.set(s,n))return!1;i&&i(e,t,n)},s=this.isNew()?"create":n.patch?"patch":"update",s==="patch"&&(n.attrs=r),o=this.sync(s,this,n),r&&n.wait&&(this.attributes=a),o):!1)},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(e,t,i){(i.wait||e.isNew())&&r(),n&&n(e,t,i)};if(this.isNew())return e.success(this,null,e),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||M();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var p=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(p.prototype,c,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,i,o,a,f,l,c,h,p,d;c=[],h=t.at,p=this.comparator&&h==null&&t.sort!=0,d=u.isString(this.comparator)?this.comparator:null;for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(a=e[n],t))){this.trigger("invalid",this,a,t);continue}if(f=this.get(o)){t.merge&&(f.set(a===o?o.attributes:a,t),p&&!l&&f.hasChanged(d)&&(l=!0));continue}c.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o)}c.length&&(p&&(l=!0),this.length+=c.length,h!=null?s.apply(this.models,[h,0].concat(c)):r.apply(this.models,c)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=c.length;n<i;n++)(o=c[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){t=u.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,i,s,o=[],a=[],f={};u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);for(r=0,i=e.length;r<i;r++)n=e[r],s=this.get(n),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove)for(r=0,i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n);return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){var i=r.update?"update":"reset";e[i](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)}});var d=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var v=["groupBy","countBy","sortBy"];u.each(v,function(e){p.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var m=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},g=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,b=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(m.prototype,c,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){var i=this._extractParameters(e,r);n&&n.apply(this,i),this.trigger.apply(this,["route:"+t].concat(i)),this.trigger("route",t,i),o.history.trigger("route",this,t,i)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(w,"\\$&").replace(g,"(?:$1)?").replace(y,function(e,t){return t?e:"([^/]+)"}).replace(b,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var E=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,T=/msie [\w.]+/,N=/\/$/;E.started=!1,u.extend(E.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(N,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(S,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=T.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!E.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new E;var C=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];u.extend(C.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(k),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,L)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}});var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=A[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||M()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e){a&&a(t,e,n),t.trigger("sync",t,e,n)};var f=n.error;n.error=function(e){f&&f(t,e,n),t.trigger("error",t,e,n)};var l=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,l,n),l},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var O=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};h.extend=p.extend=m.extend=C.extend=E.extend=O;var M=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("Backbone",["jquery","underscore"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("BackboneSuper",["underscore","Backbone"],function(e,t){t.Model.extend=t.Collection.extend=t.Router.extend=t.View.extend=t.History.extend=function(e,t){return o(this,e,t)};var n=!1,r=/\b_super\b/;/xyz/.test(function(){return"xyz"})&&(n=!0);var i=function(e,t,n){var r=function(){var r=this._super;this._super=e[t];var i=n.apply(this,arguments);return this._super=r,i};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i],delete n[i]);return r},s=function(){},o=function(t,o,u){var a,f=t.prototype;o&&o.hasOwnProperty("constructor")?a=o.constructor:a=function(){t.apply(this,arguments)},e.extend(a,t),s.prototype=t.prototype,a.prototype=new s;if(o){e.extend(a.prototype,o);for(var l in o){if(!o.hasOwnProperty(l))continue;var c=o[l];if(typeof c!="function"||n&&!r.test(c))continue;if(typeof f[l]=="function")a.prototype[l]=i(f,l,c);else if(n)throw console&&console.trace&&console.trace(),new Error("super method is not defined for "+l)}}return u&&e.extend(a,u),a.prototype.constructor=a,a.__super__=t.prototype,a}}),define("vendors/Backbone/Backbone.Decorate",["Backbone","underscore"],function(e,t){var n=function(e,n){if(this===e.constructor)return e;if(this.prototype instanceof e.constructor==0)throw new Error("You can not decorate the instance of a class which is not a parent of the decorator");var r=e.constructor.prototype,i=r.initialize;return t.extend(e,this.prototype),e.constructor=this,e.options||(e.options={}),t.extend(e.options,n),e.__decorating=!0,t.isFunction(e.beforeDecorate)&&e.beforeDecorate(r),i!==e.initialize&&(r.initialize=function(){!this.__decorating&&i&&i.apply(this,arguments)},e.initialize(),i&&(r.initialize=i)),t.isFunction(e.onDecorate)&&e.onDecorate(r),e.__decorating=!1,e};return e.View.prototype.onDecorate=function(e){return this.delegateEvents(),this},e.Model.prototype.onDecorate=e.Collection.prototype.onDecorate=e.Router.prototype.onDecorate=function(e){return this},e.Model.decorate=e.Collection.decorate=e.Router.decorate=e.View.decorate=n,e}),define("vendors/Backbone/Backbone.Redefine",["Backbone","underscore"],function(e,t){var n=function(e,n){n||(n=e,e=!0),typeof e=="function"&&(e=e());if(!e)return this;if(typeof n=="function"){var r={};n=n(r);for(var i in n)n.hasOwnProperty(i)&&(r[i]=this.prototype[i])}return t.extend(this.prototype,n),this};e.Model.redefine=e.Collection.redefine=e.Router.redefine=e.View.redefine=e.History.redefine=n}),define("vendors/Backbone/Mixin",["underscore","Backbone","vendors/Backbone/Backbone.Redefine"],function(e,t){var n=function(t,n,r){t=t||{},n||(n=t,t={}),this.proto=n,this.dependencies=t.dependencies||[],e.extend(this,r)};return n.prototype.decorate=function(e){var t=e.constructor.mix(this);return t.decorate(e)},n.prototype.redefine=function(){return t.Model.redefine.apply({prototype:this.proto},arguments),this},n}),define("vendors/Backbone/Backbone.Mix",["Backbone","underscore","./Mixin"],function(e,t,n){e.Model.mix=e.Collection.mix=e.Router.mix=e.View.mix=e.History.mix=function r(e){var i=this;return Array.prototype.forEach.call(arguments,function(e){e instanceof n&&(i=r.apply(i,e.dependencies),e=e.proto);if(!t.isObject(e))throw new Error("Mixin must be an object");if(i.mixed&&i.mixed.indexOf(e)!=-1)return;i=i.extend(e,{mixed:i.mixed?i.mixed.slice(0):[]}),i.mixed.push(e)}),i},e.Model.mixArguments=e.Collection.mixArguments=e.Router.mixArguments=e.View.mixArguments=e.History.mixArguments=function(e){var t=Array.prototype.filter.call(e,function(e){return e instanceof n});return this.mix.apply(this,t)}}),define("vendors/Backbone/Backbone.Properties",["Backbone","vendors/Backbone/Backbone.Redefine","BackboneSuper"],function(e){var t=function(e){return{initialize:function(){return this._initProperties(),e.initialize.apply(this,arguments)},_initProperties:function(){}}};e.View.redefine(t),e.Model.redefine(t),e.Router.redefine(t),e.Collection.redefine(t),e.History.redefine(t)}),define("vendors/Backbone/Backbone.View.Events",["Backbone","./Backbone.Redefine"],function(e){e.EventsView=e.View.redefine({events:function(){return{}},_containsEventTarget:function(e){return this.$el[0]===e.target||!!this.$el.has(e.target).length},_isMetaKey:function(e){return e.ctrlKey||e.altKey||e.metaKey||e.which<32},_isMouse:function(e){if(typeof e.originalEvent.pointerType=="undefined")throw new Error("pointerType is undefined");return e.originalEvent.pointerType==="mouse"},_KEYS:{CAPS_LOCK:20,TAB:9,ENTER:13,SHIFT:16,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,DELETE:46},_isAlphanumericKey:function(e){return typeof e!="number"&&(e=e.keyCode),e===this._KEYS.SPACE||e>=48&&e<=111},_isNavigationKey:function(e){return typeof e!="number"&&(e=e.keyCode),e>=this._KEYS.LEFT&&e<=this._KEYS.DOWN}})}),define("vendors/Backbone/Backbone.Model.Events",["Backbone","./Backbone.Redefine"],function(e){e.EventsModel=e.Model.redefine({link:function(e,t,n){return this.on("change:"+e,t,n),t.call(n,this,this.get(e)),this},unlink:function(e,t,n){return this.off("change:"+e,t,n),this}})}),define("vendors/Backbone/Backbone.MethodUtils",["Backbone","underscore","vendors/Backbone/Backbone.Redefine"],function(e,t){t.method={},t(["memoize","throttle","debounce","once"]).forEach(function(e){t.method[e]=function(n){var r=Array.prototype.slice.call(arguments,1);return n.__wrap=function(n){var i=t(n);return i[e].apply(i,r)},n}}),t.method.bind=function(e){var t=Array.prototype.slice.call(arguments,1);return e.__wrap=function(e){return t.unshift(this),e=e.bind.apply(e,t),t.shift(),e},e},t.abstract=function(e){return e.indexOf(" ")===-1&&(e="Abstract method "+e+" is not implemented."),function(){throw new Error(e)}};var n=function(e){return{initialize:function(){this._wrapMethods(),e.initialize.apply(this,arguments)},_wrapMethods:function(){var e;for(var t in this)e=this[t],typeof e=="function"&&typeof e.__wrap=="function"&&this._wrapMethod(t,e)},_wrapMethod:function(e,t){var n=t.__wrap.call(this,t);n.__origin=t,this[e]=n},_reWrapMethod:function(e){var t=this[e];this[e]=t.__origin,this._wrapMethod(e,this[e])}}};e.View.redefine(n),e.Model.redefine(n),e.Router.redefine(n),e.Collection.redefine(n),e.History.redefine(n)}),function(){var e=function(e,t){if(t<1)return"";var n="";while(t>0)t&1&&(n+=e),t>>=1,e+=e;return n},t=function(){function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var r=e,i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};return i.format=function(e,i){var s=1,o=e.length,u="",a,f=[],l,c,h,p,d,v;for(l=0;l<o;l++){u=n(e[l]);if(u==="string")f.push(e[l]);else if(u==="array"){h=e[l];if(h[2]){a=i[s];for(c=0;c<h[2].length;c++){if(!a.hasOwnProperty(h[2][c]))throw new Error(t('[_.sprintf] property "%s" does not exist',h[2][c]));a=a[h[2][c]]}}else h[1]?a=i[h[1]]:a=i[s++];if(/[^s]/.test(h[8])&&n(a)!="number")throw new Error(t("[_.sprintf] expecting number but found %s",n(a)));switch(h[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=h[7]?a.toExponential(h[7]):a.toExponential();break;case"f":a=h[7]?parseFloat(a).toFixed(h[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&h[7]?a.substring(0,h[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(h[8])&&h[3]&&a>=0?"+"+a:a,d=h[4]?h[4]=="0"?"0":h[4].charAt(1):" ",v=h[6]-String(a).length,p=h[6]?r(d,v):"",f.push(h[5]?a+p:p+a)}}return f.join("")},i.cache={},i.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},i}(),n=String.prototype.trim,r=String.prototype.trimRight,i=String.prototype.trimLeft,s=function(e){return e==null?"\\s":e.source?e.source:"["+o.escapeRegExp(e)+"]"},o={numberFormat:function(e,t,n,r){if(isNaN(e)||e==null)return"";n=n||LOCALES.decimalSeparator,r=r||LOCALES.digitSeparator,e=e.toFixed(~~t);var i=e.split("."),s=i[0],o=i[1]?(n||".")+i[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+o},normalizeNumberString:function(e,t){var n="\\"+LOCALES.digitSeparator,r=LOCALES.decimalSeparator;r!=="."&&(e=e.replace(/\./g,r)),e=e.replace(new RegExp(n,"g"),"");var i=LOCALES.alternativeDecimalSeparator;i&&(e=e.replace(i,r));if(t){var s=e.split(r),o=(s[1]||"").substr(0,t);o.length<t&&(o+=(new Array(t-o.length+1)).join("0")),e=(s[0]||"0")+r+o}return r!=="."&&(e=e.replace(r,".")),e},capitalize:function(e){return e=e==null?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)},toNumber:function(e,t){var n=t||0;return e+="",parseFloat(_.normalizeNumberString(e,n))},escapeRegExp:function(e){return e==null?"":String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},trim:function(e,t){return e==null?"":!t&&n?n.call(e):(t=s(t),String(e).replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))},ltrim:function(e,t){return e==null?"":!t&&i?i.call(e):(t=s(t),String(e).replace(new RegExp("^"+t+"+"),""))},rtrim:function(e,t){return e==null?"":!t&&r?r.call(e):(t=s(t),String(e).replace(new RegExp(t+"+$"),""))},dasherize:function(e){return o.trim(e).replace(/([A-Z]+)/g,"-$1").replace(/[-_\s]+/g,"-").replace(/^\-/,"").toLowerCase()},prune:function(e,t,n){if(e==null)return"";e=String(e),t=~~t,n=n!=null?String(n):"...";if(e.length<=t)return e;var r=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,r);return i.slice(i.length-2).match(/\w\w/)?i=i.replace(/\s*\S+$/,""):i=o.rtrim(i.slice(0,i.length-1)),(i+n).length>e.length?e:e.slice(0,i.length)+n},sprintf:t,s:t};_.mixin(o)}(),define("underscore.string",["underscore"],function(e){return function(){var t,n;return t||e._}}(this)),define("vendors/Backbone/Backbone.View.Elements",["Backbone","jquery","underscore.string","./Backbone.Redefine","./Backbone.Properties","./Backbone.Decorate"],function(e,t,n){e.ElementsView=e.View.redefine(function(e){return{_$window:t(window),_$document:t(document),_$body:t(document.body),_initProperties:function(){e._initProperties.apply(this,arguments),this._cachedClasses=this._classes(),this._cachedSelectors=this._selectors(),this._cachedElements={}},setElement:function(){return e.setElement.apply(this,arguments),this._data=this.$el.data()||{},this._resetCaches(),this},_resetCaches:function(){this._cachedClasses=this._classes(),this._cachedSelectors=this._selectors(),this._dropElemCache()},_classes:function(){return{}},_class:function(e,t){var r=this._cachedClasses[e];if(!r)throw new Error("Selector for "+e+" does not found");if(arguments.length>1){var i=Array.prototype.slice.call(arguments,1);i.unshift(r),r=n.sprintf.apply(n,i)}return r},_runClassMethod:function(e,t,n,r){var i=n?Array.isArray(n)?this._elem.apply(this,n):typeof n=="string"?this._elem(n):n:this.$el,s=Array.isArray(t)?this._class.apply(this,t):this._class(t);return typeof r!="undefined"?r.unshift(s):r=[s],i[e].apply(i,r)},_hasClass:function(e,t){return this._runClassMethod("hasClass",e,t)},_addClass:function(e,t){return this._runClassMethod("addClass",e,t)},_removeClass:function(e,t){return this._runClassMethod("removeClass",e,t)},_toggleClass:function(e,t,n){return arguments.length===2&&typeof t=="boolean"&&(n=t,t=undefined),this._runClassMethod("toggleClass",e,t,[n])},_selectors:function(){return{}},_selector:function(e,t){var r=null,i=this._getCacheKey.apply(this,arguments),s=this._cachedSelectors[i];return typeof s=="undefined"&&(typeof this._cachedSelectors[e]=="undefined"&&(s="."+this._class(e),this._cachedSelectors[e]=s),r=Array.prototype.slice.call(arguments,1),r.length&&(r.unshift(this._cachedSelectors[e]),s=n.sprintf.apply(n,r),this._cachedSelectors[i]=s)),s},_hasSelector:function(e){return!!this._cachedClasses[e]||!!this._cachedSelectors[e]},_elem:function(e,t){var n=this._getCacheKey.apply(this,arguments),r=this._cachedElements[n];return r?r:(r=this._findElem.apply(this,arguments),this._cachedElements[n]=r,r)},_getCacheKey:function(e,t){return Array.prototype.join.call(arguments,"|")},_findElem:function(e,t){return this.$(this._selector.apply(this,arguments))},_replaceElem:function(e,t){var n=this._elem(e),r=n[0]==document.activeElement||n.has(document.activeElement).length;this._elem(e).replaceWith(t),this._dropElemCache(e),r&&this._fixFocus(this._elem(e))},_setElemContent:function(e,t){var n=this._elem(e),r=n.has(document.activeElement).length;n.html(t),r&&this._fixFocus(n)},_fixFocus:function(e){var t=e.closest("[tabindex],a,button:not(:disabled)");t.length&&t[0].focus()},_dropElemCache:function(e){return e?delete this._cachedElements[this._getCacheKey.apply(this,arguments)]:this._cachedElements={},this},_getElemData:function(e,t){var n=this._elem(e).data();return t?n[t]:n}}})}),define("vendors/Backbone/Backbone.View.CommonSelectors",["underscore","Backbone","./Backbone.View.Elements"],function(e,t){return t.View.redefine(function(t){return{_classes:function(){return e.defaults({hidden:"hidden"},t._classes())}}}),t}),define("vendors/Backbone/Backbone.Object",["Backbone","underscore","./Backbone.Properties"],function(e,t){var n=e.Model,r;e.Object=function(e){this.options=e||{},this.initialize.apply(this,arguments)},r=e.Object,t.extend(r.prototype,e.Events,{initialize:function(){this._initProperties.apply(this,arguments)},_initProperties:function(){}});for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])}),define("BackboneX",["Backbone","BackboneSuper","vendors/Backbone/Backbone.Decorate","vendors/Backbone/Backbone.Mix","vendors/Backbone/Backbone.Redefine","vendors/Backbone/Backbone.Properties","vendors/Backbone/Backbone.View.Events","vendors/Backbone/Backbone.Model.Events","vendors/Backbone/Backbone.MethodUtils","vendors/Backbone/Backbone.View.Elements","vendors/Backbone/Backbone.View.CommonSelectors","vendors/Backbone/Backbone.Object"],function(e){var t=function(e){return{beforeDecorate:function(t){var n=t._initProperties;n!==this.initialize&&(t._initProperties=function(){!this.__decorating&&n&&n.apply(this,arguments)},this._initProperties(),n&&(t._initProperties=n)),typeof e.beforeDecorate=="function"&&e.beforeDecorate.apply(this,arguments)},onDecorate:function(){return e.onDecorate.apply(this,arguments),this._wrapMethods(),this}}};return e.View.redefine(t).redefine(function(e){return{beforeDecorate:function(){this._resetCaches(),typeof e.beforeDecorate=="function"&&e.beforeDecorate.apply(this,arguments)}}}),e.Model.redefine(t),e.Router.redefine(t),e.Collection.redefine(t),e.History.redefine(t),e}),define("global/errorReporter",[],function(){return function(e,t){if(window.onerror){var n=[t||e.message,e.fileName||window.location.host+": Unknown file",e.lineNumber||1,e.columnNumber,e];window.onerror.apply(window,n)}}}),define("global/PageClasses/Page",["jquery","underscore","BackboneX","global/errorReporter"],function(e,t,n,r){var i=n.View.extend({initialize:function(){window.page=this,this._super()},initDeprecatedProperties:function(e){var n=this;t(e).each(function(e){n.initDeprecatedProperty(e)})},initCustomDeprecatedProperty:function(t){var n=t.source||this,r=t.destination||window,i=t.destinationProp,s=t.sourceProp||i,o=t.sourceValue||n[s],u=this;if(typeof i!="string")throw new Error("Page.initCustomDeprecatedProperty need a name of destination property");if(!Object.defineProperty||e.browser.msie&&e.browser.version<9){r[i]=o;return}Object.defineProperty(r,i,{get:function(){return u.registerDeprecatedUsage(i),o}})},registerDeprecatedUsage:function(e){var t=e+" is deprecated!";console.log(t),console.trace&&console.trace();try{its.an.error}catch(n){t+="\n"+n.stack,r(n,t)}}},{extend:function(e,t,r){typeof e=="boolean"&&typeof t=="undefined"&&(r=e,e={},t={}),typeof r=="undefined"&&typeof t=="boolean"&&(r=t,t={}),t&&t.mixed&&(r=!1);var i=n.View.extend.call(this,e,t);return r!==!1&&this.instantiate(i),i},instantiate:function(e){typeof e!="function"&&(e=this);var t=new e({el:document});return window.page=t,t}},!1);return i}),define("global/elements/Visibility/Visibility",["BackboneX"],function(e){var t={_invisibleElements:[],_visibleElements:[],addInvisibleElement:function(e){this._invisibleElements.indexOf(e)<0&&this._invisibleElements.push(e)},addVisibleElement:function(e){this._visibleElements.indexOf(e)===-1&&this._visibleElements.push(e)},handleChanges:function(){var e=[],t=[],n,r;for(r=0;r<this._invisibleElements.length;r++){n=this._invisibleElements[r];if(n.isVisible()){n.update(),n.handleChangeVisibility(!0);continue}e.push(n)}for(r=0;r<this._visibleElements.length;r++){n=this._visibleElements[r];if(n.isVisible()){t.push(n);continue}n.handleChangeVisibility(!1)}this._visibleElements=t,this._invisibleElements=e}};return e.on("change:visibility",t.handleChanges,t),t}),define("elements/CsrfProtector/CsrfProtector",["BackboneX"],function(e){var t=e.Object.extend({_initProperties:function(e){this._super.apply(this,arguments),this._csrfToken=e},protect:function(){}});return t}),define("elements/CsrfProtector/CsrfProtector_jQueryAjax",["jquery","./CsrfProtector"],function(e,t){return t.redefine(function(t){return{protect:function(){t.protect.call(this);var n=e.param({csrf:this._csrfToken});e.ajaxPrefilter(function(e,t){e.type.toLowerCase()!=="get"&&(e.data?t&&t.data&&t.data.csrf||(e.data+="&"+n):e.data=n)})}}}),t}),function(){function i(e){return function(){return this[e]}}function u(t,n,r){t=t.split("."),r=r||o,!(t[0]in r)&&r.execScript&&r.execScript("var "+t[0]);for(var i;t.length&&(i=t.shift());)!t.length&&n!==e?r[i]=n:r=r[i]?r[i]:r[i]={}}function a(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function f(e){return"array"==a(e)}function l(e){return"string"==typeof e}function c(e){var t=typeof e;return"object"==t&&e!=n||"function"==t}function d(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function m(e,t,r){return m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:v,m.apply(n,arguments)}function g(t,n){u(t,n,e)}function N(e,t){e!=n&&this.append.apply(this,arguments)}function C(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function L(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<k.length;s++)n=k[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function D(i){return n===i||r===i||e===i||0===i?t:H(i)?0===B(i):r}function P(e,t){return L.apply(n,Array.prototype.slice.call(arguments,0)),e}function H(e){return f(e)||l(e)||c(e)}function B(e){if(f(e))return e.length;if(l(e))return e.length;if(c(e)){var t=0,n;for(n in e)t++;return t}throw Error(typeof e+" is not countable.")}function j(e,t,n){f(e)?M(e,t,n):C(e,t,n)}function F(e){this.env_=e,this.c=[],this.l={}}function I(){this.a={},this.f={},this.g={},this.k={},this.e={},this.n={},this.o=r,this.I="UTF-8"}function q(e){this.p=e}var e=void 0,t=!0,n=null,r=!1,s,o=this,h="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),p=0,y=/&/g,b=/</g,w=/>/g,E=/\"/g,S=/[&<>\"]/,x={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':'\\"',"\\":"\\\\"},T={"'":"\\'"};N.prototype.b="",N.prototype.append=function(e,t,r){this.b+=e;if(t!=n)for(var i=1;i<arguments.length;i++)this.b+=arguments[i];return this},N.prototype.toString=i("b");var k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),A=Array.prototype,O=A.indexOf?function(e,t,n){return A.indexOf.call(e,t,n)}:function(e,t,r){r=r==n?0:0>r?Math.max(0,e.length+r):r;if(l(e))return!l(t)||1!=t.length?-1:e.indexOf(t,r);for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},M=A.forEach?function(e,t,n){A.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=l(e)?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)},_=m,h="twig_ui_"+Math.floor(2147483648*Math.random()).toString(36);s=F.prototype,s.q=i("c"),s.B=function(e){this.c=e},s.H=function(e){this.l=e},s.getParent=function(e){return e=this.getParent_(e),r===e?r:this.env_.d(e)},s.A=function(e,t,n){if(e in this.l){var i=new N;return this.l[e](i,t,n||{}),i.toString()}i=this.getParent(t);if(r!==i)return i.j(e,t,n);throw Error("The template '"+this.t()+"' has no parent, and no trait defining the block '"+e+"'.")},s.j=function(e,t,i){if(i&&e in i){var s=new N,o=i[e];return delete i[e],o(s,t,i),s.toString()}return e in this.c?(s=new N,this.c[e](s,t,i||n),s.toString()):(s=this.getParent(t),r!==s?s.j(e,t,i):"")},s.i=function(e,t){var n=new N;return this.render_(n,e||{},t||{}),n.toString()},s=I.prototype,s.i=function(e,t){var n=this.d(e);return n.i.call(n,P({},this.n,t||{}))},s.filter=function(e,t,r){if(e in this.f)return this.f[e].apply(n,Array.prototype.slice.call(arguments,1));throw Error("The filter '"+e+"' does not exist.")},s.v=function(e,t,r){if(e in this.g)return this.g[e].apply(n,Array.prototype.slice.call(arguments,1));throw Error("The function '"+e+"' does not exist.")},s.test=function(e,t,r){if(e in this.k)return this.k[e].apply(n,Array.prototype.slice.call(arguments,1));throw Error("The test '"+e+"' does not exist.")},s.w=function(e,t,n){var r=this.d(e),i=r["get"+t];if(!i)throw Error("The macro '"+t+"' does not exist on template '"+r.t()+"'.");return i.apply(r,Array.prototype.slice.call(arguments,2)).toString()},s.D=function(e,t){this.f[e]=t},s.F=function(e,t){this.g[e]=t},s.G=function(e,t){this.k[e]=t},s.s=i("n"),s.h=function(){this.o=t,C(this.a,function(e){e.h()},this)},s.u=function(e){return e in this.a},s.getExtension=function(e){if(e in this.a)return this.a[e];throw Error('The "'+e+'" extension is not enabled.')},s.m=function(e){this.a[e.getName()]=e},s.z=function(e){delete this.a[e]},s.C=function(e){C(e,function(e){this.m(e)})},s.r=i("a"),s.d=function(e){var t=e[h]||(e[h]=++p);return t in this.e?this.e[t]:(r===this.o&&this.h(),e=new e(this),this.e[t]=e)},q.prototype.toString=i("p"),window.Twig=new I,g("goog.provide",function(e){u(e)}),g("goog.require",function(){}),g("twig.attr",function(i,s,o,u,l){u=u||"any",l=l!==e?l:r;if(!c(i)&&!f(i))return l?r:n;if(s in i){if("array"!==u&&"function"==a(i[s]))return l?t:i[s].apply(i,o||[]);if("method"!==u)return l?t:i[s]}if("array"===u||f(i))return l?r:n;var s=s.toLowerCase(),h="get"+s,p="is"+s,d;e:{s=function(e,t){return t=t.toLowerCase(),t===h||t===p};for(d in i)if(s.call(e,0,d))break e;d=e}return d&&"function"==a(i[d])?l?t:i[d].apply(i,o||[]):l?r:n}),g("twig.bind",_),g("twig.inherits",function(e,t){function n(){}n.prototype=t.prototype,e.J=t.prototype,e.prototype=new n}),g("twig.extend",P),g("twig.spaceless",function(e){return e.replace(/>[\s\xa0]+</g,"><").replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}),g("twig.range",function(e,t){for(var n=[];e<=t;e+=1)n.push(e);return n}),g("twig.contains",function(e,n){var i;if(f(e))e:{for(var s=0;s<e.length;s++)if(e[s]==n){i=t;break e}i=r}else if(l(e))i=-1!=e.indexOf(n);else t:{for(i in e)if(e[i]==n){i=t;break t}i=r}return i}),g("twig.countable",H),g("twig.count",B),g("twig.forEach",j),g("twig.empty",D),g("twig.createObj",function(e){for(var t={},n=0;n<arguments.length;n+=2)t[arguments[n]]=arguments[n+1];return t}),g("twig.filter.capitalize",function(e,t){return t.charAt(0).toUpperCase()+t.substring(1)}),g("twig.filter.escape",function(e,t,r,i,s){if(s&&t instanceof q)return t.toString();t=t==n?"":String(t);if("js"===r){e=String(t);if(e.quote)t=e.quote();else{t=['"'];for(r=0;r<e.length;r++){var o=e.charAt(r),u=o.charCodeAt(0),i=t,s=r+1,a;if(!(a=x[o])){if(!(31<u&&127>u))if(o in T)o=T[o];else if(o in x)o=T[o]=x[o];else{u=o,a=o.charCodeAt(0);if(31<a&&127>a)u=o;else{if(256>a){if(u="\\x",16>a||256<a)u+="0"}else u="\\u",4096>a&&(u+="0");u+=a.toString(16).toUpperCase()}o=T[o]=u}a=o}i[s]=a}t.push('"'),t=t.join("")}return t.substring(1,t.length-1)}if(!r||"html"===r)return e=t,S.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(y,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(b,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(w,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(E,"&quot;"))),e;if("url"===r)return encodeURIComponent(t);throw Error("The type '"+r+"' is not supported.")}),g("twig.filter.length",function(e,t){return B(t)}),g("twig.filter.def",function(e,t){return D(e)?t||"":e}),g("twig.filter.replace",function(e,t){for(var n in t)e=e.replace(RegExp(n,"g"),t[n]);return e}),g("twig.filter.join",function(e,n){var i=n||"",s=new N,o=t;return j(e,function(e){o||s.append(i),o=r,s.append(e)}),s.toString()}),g("twig.filter.keys",function(e){var t=[],n=0,r;for(r in e)t[n++]=r;return t}),g("twig.filter.upper",function(e,t){return t.toUpperCase()}),g("twig.filter.lower",function(e,t){return t.toLowerCase()}),g("twig.filter.nl2br",function(e){return e.replace(/\n/g,"<br />")}),g("twig.StringBuffer",N),N.prototype.append=N.prototype.append,N.prototype.toString=N.prototype.toString,I.prototype.createTemplate=I.prototype.d,I.prototype.filter=I.prototype.filter,I.prototype.invoke=I.prototype.v,I.prototype.test=I.prototype.test,I.prototype.macro=I.prototype.w,I.prototype.setFilter=I.prototype.D,I.prototype.setFunction=I.prototype.F,I.prototype.setTest=I.prototype.G,I.prototype.render=I.prototype.i,I.prototype.getGlobals=I.prototype.s,I.prototype.initRuntime=I.prototype.h,I.prototype.hasExtension=I.prototype.u,I.prototype.getExtension=I.prototype.getExtension,I.prototype.addExtension=I.prototype.m,I.prototype.removeExtension=I.prototype.z,I.prototype.setExtensions=I.prototype.C,I.prototype.getExtensions=I.prototype.r,g("twig.Template",F),F.prototype.setTraits=F.prototype.H,F.prototype.setBlocks=F.prototype.B,F.prototype.getBlocks=F.prototype.q,F.prototype.renderParentBlock=F.prototype.A,F.prototype.renderBlock=F.prototype.j,g("twig.Markup",q)}(),define("vendors/twig/twig",function(e){return function(){var t,n;return t||e.Twig}}(this)),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define("moment",t):e.moment=t()}(this,function(){function t(){return e.apply(null,arguments)}function n(t){e=t}function r(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function i(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function s(e){var t;for(t in e)return!1;return!0}function o(e){return e===void 0}function u(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function a(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function f(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,r){return Rr(e,t,n,r,!0).utc()}function p(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function d(e){return e._pf==null&&(e._pf=p()),e._pf}function g(e){if(e._isValid==null){var t=d(e),n=m.call(t.parsedDateParts,function(e){return e!=null}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined);if(Object.isFrozen!=null&&!!Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function y(e){var t=h(NaN);return e!=null?c(d(t),e):d(t).userInvalidated=!0,t}function w(e,t){var n,r,i;o(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),o(t._i)||(e._i=t._i),o(t._f)||(e._f=t._f),o(t._l)||(e._l=t._l),o(t._strict)||(e._strict=t._strict),o(t._tzm)||(e._tzm=t._tzm),o(t._isUTC)||(e._isUTC=t._isUTC),o(t._offset)||(e._offset=t._offset),o(t._pf)||(e._pf=d(t)),o(t._locale)||(e._locale=t._locale);if(b.length>0)for(n=0;n<b.length;n++)r=b[n],i=t[r],o(i)||(e[r]=i);return e}function S(e){w(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),E===!1&&(E=!0,t.updateOffset(this),E=!1)}function x(e){return e instanceof S||e!=null&&e._isAMomentObject!=null}function T(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function N(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=T(t)),n}function C(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&N(e[o])!==N(t[o]))&&s++;return s+i}function k(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function L(e,n){var r=!0;return c(function(){t.deprecationHandler!=null&&t.deprecationHandler(null,e);if(r){var i=[],s;for(var o=0;o<arguments.length;o++){s="";if(typeof arguments[o]=="object"){s+="\n["+o+"] ";for(var u in arguments[0])s+=u+": "+arguments[0][u]+", ";s=s.slice(0,-2)}else s=arguments[o];i.push(s)}k(e+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function O(e,n){t.deprecationHandler!=null&&t.deprecationHandler(e,n),A[e]||(k(n),A[e]=!0)}function M(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function _(e){var t,n;for(n in e)t=e[n],M(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(e,t){var n=c({},e),r;for(r in t)l(t,r)&&(i(e[r])&&i(t[r])?(n[r]={},c(n[r],e[r]),c(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)l(e,r)&&!l(t,r)&&i(e[r])&&(n[r]=c({},n[r]));return n}function P(e){e!=null&&this.set(e)}function F(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return M(r)?r.call(t,n):r}function q(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function U(){return this._invalidDate}function X(e){return this._ordinal.replace("%d",e)}function $(e,t,n,r){var i=this._relativeTime[n];return M(i)?i(e,t,n,r):i.replace(/%d/i,e)}function J(e,t){var n=this._relativeTime[e>0?"future":"past"];return M(n)?n(t):n.replace(/%s/i,t)}function Q(e,t){var n=e.toLowerCase();K[n]=K[n+"s"]=K[t]=e}function G(e){return typeof e=="string"?K[e]||K[e.toLowerCase()]:undefined}function Y(e){var t={},n,r;for(r in e)l(e,r)&&(n=G(r),n&&(t[n]=e[r]));return t}function et(e,t){Z[e]=t}function tt(e){var t=[];for(var n in e)t.push({unit:n,priority:Z[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function nt(e,n){return function(r){return r!=null?(it(this,e,r),t.updateOffset(this,n),this):rt(this,e)}}function rt(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function it(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function st(e){return e=G(e),M(this[e])?this[e]():this}function ot(e,t){if(typeof e=="object"){e=Y(e);var n=tt(e);for(var r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else{e=G(e);if(M(this[e]))return this[e](t)}return this}function ut(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}function ht(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(ct[e]=i),t&&(ct[t[0]]=function(){return ut(i.apply(this,arguments),t[1],t[2])}),n&&(ct[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function pt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function dt(e){var t=e.match(at),n,r;for(n=0,r=t.length;n<r;n++)ct[t[n]]?t[n]=ct[t[n]]:t[n]=pt(t[n]);return function(n){var i="",s;for(s=0;s<r;s++)i+=M(t[s])?t[s].call(n,e):t[s];return i}}function vt(e,t){return e.isValid()?(t=mt(t,e.localeData()),lt[t]=lt[t]||dt(t),lt[t](e)):e.localeData().invalidDate()}function mt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;ft.lastIndex=0;while(n>=0&&ft.test(e))e=e.replace(ft,r),ft.lastIndex=0,n-=1;return e}function Ht(e,t,n){Pt[e]=M(t)?t:function(e,r){return e&&n?n:t}}function Bt(e,t){return l(Pt,e)?Pt[e](t._strict,t._locale):new RegExp(jt(e))}function jt(e){return Ft(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}))}function Ft(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function qt(e,t){var n,r=t;typeof e=="string"&&(e=[e]),u(t)&&(r=function(e,n){n[t]=N(e)});for(n=0;n<e.length;n++)It[e[n]]=r}function Rt(e,t){qt(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function Ut(e,t,n){t!=null&&l(It,e)&&It[e](t,n._a,n,e)}function en(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function rn(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tn).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone}function on(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tn.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function un(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[];for(r=0;r<12;++r)s=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase()}return n?t==="MMM"?(i=Zt.call(this._shortMonthsParse,o),i!==-1?i:null):(i=Zt.call(this._longMonthsParse,o),i!==-1?i:null):t==="MMM"?(i=Zt.call(this._shortMonthsParse,o),i!==-1?i:(i=Zt.call(this._longMonthsParse,o),i!==-1?i:null)):(i=Zt.call(this._longMonthsParse,o),i!==-1?i:(i=Zt.call(this._shortMonthsParse,o),i!==-1?i:null))}function an(e,t,n){var r,i,s;if(this._monthsParseExact)return un.call(this,e,t,n);this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function fn(e,t){var n;if(!e.isValid())return e;if(typeof t=="string")if(/^\d+$/.test(t))t=N(t);else{t=e.localeData().monthsParse(t);if(!u(t))return e}return n=Math.min(e.date(),en(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ln(e){return e!=null?(fn(this,e),t.updateOffset(this,!0),this):rt(this,"Month")}function cn(){return en(this.year(),this.month())}function pn(e){return this._monthsParseExact?(l(this,"_monthsRegex")||mn.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=hn),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function vn(e){return this._monthsParseExact?(l(this,"_monthsRegex")||mn.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=dn),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function mn(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i,s;for(i=0;i<12;i++)s=h([2e3,i]),t.push(this.monthsShort(s,"")),n.push(this.months(s,"")),r.push(this.months(s,"")),r.push(this.monthsShort(s,""));t.sort(e),n.sort(e),r.sort(e);for(i=0;i<12;i++)t[i]=Ft(t[i]),n[i]=Ft(n[i]);for(i=0;i<24;i++)r[i]=Ft(r[i]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function gn(e){return yn(e)?366:365}function yn(e){return e%4===0&&e%100!==0||e%400===0}function wn(){return yn(this.year())}function En(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<100&&e>=0&&isFinite(u.getFullYear())&&u.setFullYear(e),u}function Sn(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function xn(e,t,n){var r=7+t-n,i=(7+Sn(e,0,r).getUTCDay()-t)%7;return-i+r-1}function Tn(e,t,n,r,i){var s=(7+n-r)%7,o=xn(e,r,i),u=1+7*(t-1)+s+o,a,f;return u<=0?(a=e-1,f=gn(a)+u):u>gn(e)?(a=e+1,f=u-gn(e)):(a=e,f=u),{year:a,dayOfYear:f}}function Nn(e,t,n){var r=xn(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,o;return i<1?(o=e.year()-1,s=i+Cn(o,t,n)):i>Cn(e.year(),t,n)?(s=i-Cn(e.year(),t,n),o=e.year()+1):(o=e.year(),s=i),{week:s,year:o}}function Cn(e,t,n){var r=xn(e,t,n),i=xn(e+1,t,n);return(gn(e)-r+i)/7}function kn(e){return Nn(e,this._week.dow,this._week.doy).week}function An(){return this._week.dow}function On(){return this._week.doy}function Mn(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function _n(e){var t=Nn(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function Dn(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function Pn(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Bn(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone}function Fn(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function qn(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Rn(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[];for(r=0;r<7;++r)s=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase()}return n?t==="dddd"?(i=Zt.call(this._weekdaysParse,o),i!==-1?i:null):t==="ddd"?(i=Zt.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=Zt.call(this._minWeekdaysParse,o),i!==-1?i:null):t==="dddd"?(i=Zt.call(this._weekdaysParse,o),i!==-1?i:(i=Zt.call(this._shortWeekdaysParse,o),i!==-1?i:(i=Zt.call(this._minWeekdaysParse,o),i!==-1?i:null))):t==="ddd"?(i=Zt.call(this._shortWeekdaysParse,o),i!==-1?i:(i=Zt.call(this._weekdaysParse,o),i!==-1?i:(i=Zt.call(this._minWeekdaysParse,o),i!==-1?i:null))):(i=Zt.call(this._minWeekdaysParse,o),i!==-1?i:(i=Zt.call(this._weekdaysParse,o),i!==-1?i:(i=Zt.call(this._shortWeekdaysParse,o),i!==-1?i:null)))}function Un(e,t,n){var r,i,s;if(this._weekdaysParseExact)return Rn.call(this,e,t,n);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(r=0;r<7;r++){i=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[r]||(s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function zn(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Dn(e,this.localeData()),this.add(e-t,"d")):t}function Wn(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Xn(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=Pn(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function $n(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Yn.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Vn),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Kn(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Yn.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jn),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Gn(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Yn.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Qn),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Yn(){function e(e,t){return t.length-e.length}var t=[],n=[],r=[],i=[],s,o,u,a,f;for(s=0;s<7;s++)o=h([2e3,1]).day(s),u=this.weekdaysMin(o,""),a=this.weekdaysShort(o,""),f=this.weekdays(o,""),t.push(u),n.push(a),r.push(f),i.push(u),i.push(a),i.push(f);t.sort(e),n.sort(e),r.sort(e),i.sort(e);for(s=0;s<7;s++)n[s]=Ft(n[s]),r[s]=Ft(r[s]),i[s]=Ft(i[s]);this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Zn(){return this.hours()%12||12}function er(){return this.hours()||24}function tr(e,t){ht(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function nr(e,t){return t._meridiemParse}function rr(e){return(e+"").toLowerCase().charAt(0)==="p"}function sr(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function cr(e){return e?e.toLowerCase().replace("_","-"):e}function hr(e){var t=0,n,r,i,s;while(t<e.length){s=cr(e[t]).split("-"),n=s.length,r=cr(e[t+1]),r=r?r.split("-"):null;while(n>0){i=pr(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&C(s,r,!0)>=n-1)break;n--}t++}return null}function pr(e){var t=null;if(!ar[e]&&typeof module!="undefined"&&module&&module.exports)try{t=lr._abbr,require("./locale/"+e),dr(t)}catch(n){}return ar[e]}function dr(e,t){var n;return e&&(o(t)?n=gr(e):n=vr(e,t),n&&(lr=n)),lr._abbr}function vr(e,t){if(t!==null){var n=ur;t.abbr=e;if(ar[e]!=null)O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=ar[e]._config;else if(t.parentLocale!=null){if(ar[t.parentLocale]==null)return fr[t.parentLocale]||(fr[t.parentLocale]=[]),fr[t.parentLocale].push({name:e,config:t}),null;n=ar[t.parentLocale]._config}return ar[e]=new P(D(n,t)),fr[e]&&fr[e].forEach(function(e){vr(e.name,e.config)}),dr(e),ar[e]}return delete ar[e],null}function mr(e,t){if(t!=null){var n,r=ur;ar[e]!=null&&(r=ar[e]._config),t=D(r,t),n=new P(t),n.parentLocale=ar[e],ar[e]=n,dr(e)}else ar[e]!=null&&(ar[e].parentLocale!=null?ar[e]=ar[e].parentLocale:ar[e]!=null&&delete ar[e]);return ar[e]}function gr(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return lr;if(!r(e)){t=pr(e);if(t)return t;e=[e]}return hr(e)}function yr(){return B(ar)}function br(e){var t,n=e._a;return n&&d(e).overflow===-2&&(t=n[Wt]<0||n[Wt]>11?Wt:n[Xt]<1||n[Xt]>en(n[zt],n[Wt])?Xt:n[Vt]<0||n[Vt]>24||n[Vt]===24&&(n[$t]!==0||n[Jt]!==0||n[Kt]!==0)?Vt:n[$t]<0||n[$t]>59?$t:n[Jt]<0||n[Jt]>59?Jt:n[Kt]<0||n[Kt]>999?Kt:-1,d(e)._overflowDayOfYear&&(t<zt||t>Xt)&&(t=Xt),d(e)._overflowWeeks&&t===-1&&(t=Qt),d(e)._overflowWeekday&&t===-1&&(t=Gt),d(e).overflow=t),e}function Cr(e){var t,n,r=e._i,i=wr.exec(r)||Er.exec(r),s,o,u,a;if(i){d(e).iso=!0;for(t=0,n=xr.length;t<n;t++)if(xr[t][1].exec(i[1])){o=xr[t][0],s=xr[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(i[3]){for(t=0,n=Tr.length;t<n;t++)if(Tr[t][1].exec(i[3])){u=(i[2]||" ")+Tr[t][0];break}if(u==null){e._isValid=!1;return}}if(!s&&u!=null){e._isValid=!1;return}if(i[4]){if(!Sr.exec(i[4])){e._isValid=!1;return}a="Z"}e._f=o+(u||"")+(a||""),Pr(e)}else e._isValid=!1}function Lr(e){var t,n,r,i,s,o,u={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},a="YXWVUTSRQPONZABCDEFGHIKLM",f,l;t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=kr.exec(t);if(n){r=n[1]?"ddd"+(n[1].length===5?", ":" "):"",i="D MMM "+(n[2].length>10?"YYYY ":"YY "),s="HH:mm"+(n[4]?":ss":"");if(n[1]){var c=new Date(n[2]),h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][c.getDay()];if(n[1].substr(0,3)!==h){d(e).weekdayMismatch=!0,e._isValid=!1;return}}switch(n[5].length){case 2:l===0?f=" +0000":(l=a.indexOf(n[5][1].toUpperCase())-12,f=(l<0?" -":" +")+(""+l).replace(/^-?/,"0").match(/..$/)[0]+"00");break;case 4:f=u[n[5]];break;default:f=u[" GMT"]}n[5]=f,e._i=n.splice(1).join(""),o=" ZZ",e._f=r+i+s+o,Pr(e),d(e).rfc2822=!0}else e._isValid=!1}function Ar(e){var n=Nr.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}Cr(e);if(e._isValid!==!1)return;delete e._isValid,Lr(e);if(e._isValid!==!1)return;delete e._isValid,t.createFromInputFallback(e)}function Or(e,t,n){return e!=null?e:t!=null?t:n}function Mr(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function _r(e){var t,n,r=[],i,s;if(e._d)return;i=Mr(e),e._w&&e._a[Xt]==null&&e._a[Wt]==null&&Dr(e);if(e._dayOfYear!=null){s=Or(e._a[zt],i[zt]);if(e._dayOfYear>gn(s)||e._dayOfYear===0)d(e)._overflowDayOfYear=!0;n=Sn(s,0,e._dayOfYear),e._a[Wt]=n.getUTCMonth(),e._a[Xt]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Vt]===24&&e._a[$t]===0&&e._a[Jt]===0&&e._a[Kt]===0&&(e._nextDay=!0,e._a[Vt]=0),e._d=(e._useUTC?Sn:En).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Vt]=24)}function Dr(e){var t,n,r,i,s,o,u,a;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){s=1,o=4,n=Or(t.GG,e._a[zt],Nn(Ur(),1,4).year),r=Or(t.W,1),i=Or(t.E,1);if(i<1||i>7)a=!0}else{s=e._locale._week.dow,o=e._locale._week.doy;var f=Nn(Ur(),s,o);n=Or(t.gg,e._a[zt],f.year),r=Or(t.w,f.week);if(t.d!=null){i=t.d;if(i<0||i>6)a=!0}else if(t.e!=null){i=t.e+s;if(t.e<0||t.e>6)a=!0}else i=s}r<1||r>Cn(n,s,o)?d(e)._overflowWeeks=!0:a!=null?d(e)._overflowWeekday=!0:(u=Tn(n,r,i,s,o),e._a[zt]=u.year,e._dayOfYear=u.dayOfYear)}function Pr(e){if(e._f===t.ISO_8601){Cr(e);return}if(e._f===t.RFC_2822){Lr(e);return}e._a=[],d(e).empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=mt(e._f,e._locale).match(at)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(Bt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&d(e).unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),ct[o]?(i?d(e).empty=!1:d(e).unusedTokens.push(o),Ut(o,i,e)):e._strict&&!i&&d(e).unusedTokens.push(o);d(e).charsLeftOver=a-f,n.length>0&&d(e).unusedInput.push(n),e._a[Vt]<=12&&d(e).bigHour===!0&&e._a[Vt]>0&&(d(e).bigHour=undefined),d(e).parsedDateParts=e._a.slice(0),d(e).meridiem=e._meridiem,e._a[Vt]=Hr(e._locale,e._a[Vt],e._meridiem),_r(e),br(e)}function Hr(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function Br(e){var t,n,r,i,s;if(e._f.length===0){d(e).invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=w({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[i],Pr(t);if(!g(t))continue;s+=d(t).charsLeftOver,s+=d(t).unusedTokens.length*10,d(t).score=s;if(r==null||s<r)r=s,n=t}c(e,n||t)}function jr(e){if(e._d)return;var t=Y(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),_r(e)}function Fr(e){var t=new S(br(Ir(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=undefined),t}function Ir(e){var t=e._i,n=e._f;return e._locale=e._locale||gr(e._l),t===null||n===undefined&&t===""?y({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),x(t)?new S(br(t)):(a(t)?e._d=t:r(n)?Br(e):n?Pr(e):qr(e),g(e)||(e._d=null),e))}function qr(e){var n=e._i;o(n)?e._d=new Date(t.now()):a(n)?e._d=new Date(n.valueOf()):typeof n=="string"?Ar(e):r(n)?(e._a=f(n.slice(0),function(e){return parseInt(e,10)}),_r(e)):i(n)?jr(e):u(n)?e._d=new Date(n):t.createFromInputFallback(e)}function Rr(e,t,n,o,u){var a={};if(n===!0||n===!1)o=n,n=undefined;if(i(e)&&s(e)||r(e)&&e.length===0)e=undefined;return a._isAMomentObject=!0,a._useUTC=a._isUTC=u,a._l=n,a._i=e,a._f=t,a._strict=o,Fr(a)}function Ur(e,t,n,r){return Rr(e,t,n,r,!1)}function Xr(e,t){var n,i;t.length===1&&r(t[0])&&(t=t[0]);if(!t.length)return Ur();n=t[0];for(i=1;i<t.length;++i)if(!t[i].isValid()||t[i][e](n))n=t[i];return n}function Vr(){var e=[].slice.call(arguments,0);return Xr("isBefore",e)}function $r(){var e=[].slice.call(arguments,0);return Xr("isAfter",e)}function Qr(e){for(var t in e)if(Kr.indexOf(t)===-1||e[t]!=null&&!!isNaN(e[t]))return!1;var n=!1;for(var r=0;r<Kr.length;++r)if(e[Kr[r]]){if(n)return!1;parseFloat(e[Kr[r]])!==N(e[Kr[r]])&&(n=!0)}return!0}function Gr(){return this._isValid}function Yr(){return wi(NaN)}function Zr(e){var t=Y(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._isValid=Qr(t),this._milliseconds=+l+f*1e3+a*6e4+u*1e3*60*60,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=gr(),this._bubble()}function ei(e){return e instanceof Zr}function ti(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function ni(e,t){ht(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+ut(~~(e/60),2)+t+ut(~~e%60,2)})}function ii(e,t){var n=(t||"").match(e);if(n===null)return null;var r=n[n.length-1]||[],i=(r+"").match(ri)||["-",0,0],s=+(i[1]*60)+N(i[2]);return s===0?0:i[0]==="+"?s:-s}function si(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(x(e)||a(e)?e.valueOf():Ur(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),t.updateOffset(r,!1),r):Ur(e).local()}function oi(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function ui(e,n,r){var i=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){e=ii(Mt,e);if(e===null)return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(s=oi(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==e&&(!n||this._changeInProgress?Ni(this,wi(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:oi(this)}function ai(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function fi(e){return this.utcOffset(0,e)}function li(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(oi(this),"m")),this}function ci(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=ii(Ot,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function hi(e){return this.isValid()?(e=e?Ur(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function pi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function di(){if(!o(this._isDSTShifted))return this._isDSTShifted;var e={};w(e,this),e=Ir(e);if(e._a){var t=e._isUTC?h(e._a):Ur(e._a);this._isDSTShifted=this.isValid()&&C(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function vi(){return this.isValid()?!this._isUTC:!1}function mi(){return this.isValid()?this._isUTC:!1}function gi(){return this.isValid()?this._isUTC&&this._offset===0:!1}function wi(e,t){var n=e,r=null,i,s,o;return ei(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:u(e)?(n={},t?n[t]=e:n.milliseconds=e):(r=yi.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:N(r[Xt])*i,h:N(r[Vt])*i,m:N(r[$t])*i,s:N(r[Jt])*i,ms:N(ti(r[Kt]*1e3))*i}):(r=bi.exec(e))?(i=r[1]==="-"?-1:1,n={y:Ei(r[2],i),M:Ei(r[3],i),w:Ei(r[4],i),d:Ei(r[5],i),h:Ei(r[6],i),m:Ei(r[7],i),s:Ei(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=xi(Ur(n.from),Ur(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),s=new Zr(n),ei(e)&&l(e,"_locale")&&(s._locale=e._locale),s}function Ei(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Si(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function xi(e,t){var n;return!e.isValid()||!t.isValid()?{milliseconds:0,months:0}:(t=si(t,e),e.isBefore(t)?n=Si(e,t):(n=Si(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n)}function Ti(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(O(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=wi(n,r),Ni(this,i,e),this}}function Ni(e,n,r,i){var s=n._milliseconds,o=ti(n._days),u=ti(n._months);if(!e.isValid())return;i=i==null?!0:i,s&&e._d.setTime(e._d.valueOf()+s*r),o&&it(e,"Date",rt(e,"Date")+o*r),u&&fn(e,rt(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function Li(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Ai(e,n){var r=e||Ur(),i=si(r,this).startOf("day"),s=t.calendarFormat(this,i)||"sameElse",o=n&&(M(n[s])?n[s].call(this,r):n[s]);return this.format(o||this.localeData().calendar(s,this,Ur(r)))}function Oi(){return new S(this)}function Mi(e,t){var n=x(e)?e:Ur(e);return!this.isValid()||!n.isValid()?!1:(t=G(o(t)?"millisecond":t),t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function _i(e,t){var n=x(e)?e:Ur(e);return!this.isValid()||!n.isValid()?!1:(t=G(o(t)?"millisecond":t),t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Di(e,t,n,r){return r=r||"()",(r[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(r[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function Pi(e,t){var n=x(e)?e:Ur(e),r;return!this.isValid()||!n.isValid()?!1:(t=G(t||"millisecond"),t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()))}function Hi(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Bi(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function ji(e,t,n){var r,i,s,o;return this.isValid()?(r=si(e,this),r.isValid()?(i=(r.utcOffset()-this.utcOffset())*6e4,t=G(t),t==="year"||t==="month"||t==="quarter"?(o=Fi(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:T(o)):NaN):NaN}function Fi(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)||0}function Ii(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function qi(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?vt(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(Date.prototype.toISOString)?this.toDate().toISOString():vt(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Ri(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",s=t+'[")]';return this.format(n+r+i+s)}function Ui(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=vt(this,e);return this.localeData().postformat(n)}function zi(e,t){return this.isValid()&&(x(e)&&e.isValid()||Ur(e).isValid())?wi({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Wi(e){return this.from(Ur(),e)}function Xi(e,t){return this.isValid()&&(x(e)&&e.isValid()||Ur(e).isValid())?wi({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Vi(e){return this.to(Ur(),e)}function $i(e){var t;return e===undefined?this._locale._abbr:(t=gr(e),t!=null&&(this._locale=t),this)}function Ki(){return this._locale}function Qi(e){e=G(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function Gi(e){return e=G(e),e===undefined||e==="millisecond"?this:(e==="date"&&(e="day"),this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms"))}function Yi(){return this._d.valueOf()-(this._offset||0)*6e4}function Zi(){return Math.floor(this.valueOf()/1e3)}function es(){return new Date(this.valueOf())}function ts(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ns(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function rs(){return this.isValid()?this.toISOString():null}function is(){return g(this)}function ss(){return c({},d(this))}function os(){return d(this).overflow}function us(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function as(e,t){ht(0,[e,e.length],0,t)}function fs(e){return ps.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ls(e){return ps.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function cs(){return Cn(this.year(),1,4)}function hs(){var e=this.localeData()._week;return Cn(this.year(),e.dow,e.doy)}function ps(e,t,n,r,i){var s;return e==null?Nn(this,r,i).year:(s=Cn(e,r,i),t>s&&(t=s),ds.call(this,e,t,n,r,i))}function ds(e,t,n,r,i){var s=Tn(e,t,n,r,i),o=Sn(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function vs(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function gs(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function Es(e,t){t[Kt]=N(("0."+e)*1e3)}function xs(){return this._isUTC?"UTC":""}function Ts(){return this._isUTC?"Coordinated Universal Time":""}function Cs(e){return Ur(e*1e3)}function ks(){return Ur.apply(null,arguments).parseZone()}function Ls(e){return e}function Os(e,t,n,r){var i=gr(),s=h().set(r,t);return i[n](s,e)}function Ms(e,t,n){u(e)&&(t=e,e=undefined),e=e||"";if(t!=null)return Os(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=Os(e,r,n,"month");return i}function _s(e,t,n,r){typeof e=="boolean"?(u(t)&&(n=t,t=undefined),t=t||""):(t=e,n=t,e=!1,u(t)&&(n=t,t=undefined),t=t||"");var i=gr(),s=e?i._week.dow:0;if(n!=null)return Os(t,(n+s)%7,r,"day");var o,a=[];for(o=0;o<7;o++)a[o]=Os(t,(o+s)%7,r,"day");return a}function Ds(e,t){return Ms(e,t,"months")}function Ps(e,t){return Ms(e,t,"monthsShort")}function Hs(e,t,n){return _s(e,t,n,"weekdays")}function Bs(e,t,n){return _s(e,t,n,"weekdaysShort")}function js(e,t,n){return _s(e,t,n,"weekdaysMin")}function Is(){var e=this._data;return this._milliseconds=Fs(this._milliseconds),this._days=Fs(this._days),this._months=Fs(this._months),e.milliseconds=Fs(e.milliseconds),e.seconds=Fs(e.seconds),e.minutes=Fs(e.minutes),e.hours=Fs(e.hours),e.months=Fs(e.months),e.years=Fs(e.years),this}function qs(e,t,n,r){var i=wi(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Rs(e,t){return qs(this,e,t,1)}function Us(e,t){return qs(this,e,t,-1)}function zs(e){return e<0?Math.floor(e):Math.ceil(e)}function Ws(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u,a;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=zs(Vs(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,i=T(e/1e3),r.seconds=i%60,s=T(i/60),r.minutes=s%60,o=T(s/60),r.hours=o%24,t+=T(o/24),a=T(Xs(t)),n+=a,t-=zs(Vs(a)),u=T(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function Xs(e){return e*4800/146097}function Vs(e){return e*146097/4800}function $s(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;e=G(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+Xs(t),e==="month"?n:n/12;t=this._days+Math.round(Vs(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function Js(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+N(this._months/12)*31536e6:NaN}function Ks(e){return function(){return this.as(e)}}function io(e){return e=G(e),this.isValid()?this[e+"s"]():NaN}function so(e){return function(){return this.isValid()?this._data[e]:NaN}}function po(){return T(this.days()/7)}function go(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function yo(e,t,n){var r=wi(e).abs(),i=vo(r.as("s")),s=vo(r.as("m")),o=vo(r.as("h")),u=vo(r.as("d")),a=vo(r.as("M")),f=vo(r.as("y")),l=i<=mo.ss&&["s",i]||i<mo.s&&["ss",i]||s<=1&&["m"]||s<mo.m&&["mm",s]||o<=1&&["h"]||o<mo.h&&["hh",o]||u<=1&&["d"]||u<mo.d&&["dd",u]||a<=1&&["M"]||a<mo.M&&["MM",a]||f<=1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,go.apply(null,l)}function bo(e){return e===undefined?vo:typeof e=="function"?(vo=e,!0):!1}function wo(e,t){return mo[e]===undefined?!1:t===undefined?mo[e]:(mo[e]=t,e==="s"&&(mo.ss=t-1),!0)}function Eo(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=yo(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function xo(){if(!this.isValid())return this.localeData().invalidDate();var e=So(this._milliseconds)/1e3,t=So(this._days),n=So(this._months),r,i,s;r=T(e/60),i=T(r/60),e%=60,r%=60,s=T(n/12),n%=12;var o=s,u=n,a=t,f=i,l=r,c=e,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(o?o+"Y":"")+(u?u+"M":"")+(a?a+"D":"")+(f||l||c?"T":"")+(f?f+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var e,v;Array.prototype.some?v=Array.prototype.some:v=function(e){var t=Object(this),n=t.length>>>0;for(var r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var m=v,b=t.momentProperties=[],E=!1,A={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var H;Object.keys?H=Object.keys:H=function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var B=H,j={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},I={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},R="Invalid date",z="%d",W=/\d{1,2}/,V={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},K={},Z={},at=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ft=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,lt={},ct={},gt=/\d/,yt=/\d\d/,bt=/\d{3}/,wt=/\d{4}/,Et=/[+-]?\d{6}/,St=/\d\d?/,xt=/\d\d\d\d?/,Tt=/\d\d\d\d\d\d?/,Nt=/\d{1,3}/,Ct=/\d{1,4}/,kt=/[+-]?\d{1,6}/,Lt=/\d+/,At=/[+-]?\d+/,Ot=/Z|[+-]\d\d:?\d\d/gi,Mt=/Z|[+-]\d\d(?::?\d\d)?/gi,_t=/[+-]?\d+(\.\d{1,3})?/,Dt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Pt={},It={},zt=0,Wt=1,Xt=2,Vt=3,$t=4,Jt=5,Kt=6,Qt=7,Gt=8,Yt;Array.prototype.indexOf?Yt=Array.prototype.indexOf:Yt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};var Zt=Yt;ht("M",["MM",2],"Mo",function(){return this.month()+1}),ht("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),ht("MMMM",0,0,function(e){return this.localeData().months(this,e)}),Q("month","M"),et("month",8),Ht("M",St),Ht("MM",St,yt),Ht("MMM",function(e,t){return t.monthsShortRegex(e)}),Ht("MMMM",function(e,t){return t.monthsRegex(e)}),qt(["M","MM"],function(e,t){t[Wt]=N(e)-1}),qt(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[Wt]=i:d(n).invalidMonth=e});var tn=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,nn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),sn="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hn=Dt,dn=Dt;ht("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),ht(0,["YY",2],0,function(){return this.year()%100}),ht(0,["YYYY",4],0,"year"),ht(0,["YYYYY",5],0,"year"),ht(0,["YYYYYY",6,!0],0,"year"),Q("year","y"),et("year",1),Ht("Y",At),Ht("YY",St,yt),Ht("YYYY",Ct,wt),Ht("YYYYY",kt,Et),Ht("YYYYYY",kt,Et),qt(["YYYYY","YYYYYY"],zt),qt("YYYY",function(e,n){n[zt]=e.length===2?t.parseTwoDigitYear(e):N(e)}),qt("YY",function(e,n){n[zt]=t.parseTwoDigitYear(e)}),qt("Y",function(e,t){t[zt]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return N(e)+(N(e)>68?1900:2e3)};var bn=nt("FullYear",!0);ht("w",["ww",2],"wo","week"),ht("W",["WW",2],"Wo","isoWeek"),Q("week","w"),Q("isoWeek","W"),et("week",5),et("isoWeek",5),Ht("w",St),Ht("ww",St,yt),Ht("W",St),Ht("WW",St,yt),Rt(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=N(e)});var Ln={dow:0,doy:6};ht("d",0,"do","day"),ht("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),ht("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),ht("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),ht("e",0,0,"weekday"),ht("E",0,0,"isoWeekday"),Q("day","d"),Q("weekday","e"),Q("isoWeekday","E"),et("day",11),et("weekday",11),et("isoWeekday",11),Ht("d",St),Ht("e",St),Ht("E",St),Ht("dd",function(e,t){return t.weekdaysMinRegex(e)}),Ht("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Ht("dddd",function(e,t){return t.weekdaysRegex(e)}),Rt(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);i!=null?t.d=i:d(n).invalidWeekday=e}),Rt(["d","e","E"],function(e,t,n,r){t[r]=N(e)});var Hn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),jn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),In="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Vn=Dt,Jn=Dt,Qn=Dt;ht("H",["HH",2],0,"hour"),ht("h",["hh",2],0,Zn),ht("k",["kk",2],0,er),ht("hmm",0,0,function(){return""+Zn.apply(this)+ut(this.minutes(),2)}),ht("hmmss",0,0,function(){return""+Zn.apply(this)+ut(this.minutes(),2)+ut(this.seconds(),2)}),ht("Hmm",0,0,function(){return""+this.hours()+ut(this.minutes(),2)}),ht("Hmmss",0,0,function(){return""+this.hours()+ut(this.minutes(),2)+ut(this.seconds(),2)}),tr("a",!0),tr("A",!1),Q("hour","h"),et("hour",13),Ht("a",nr),Ht("A",nr),Ht("H",St),Ht("h",St),Ht("k",St),Ht("HH",St,yt),Ht("hh",St,yt),Ht("kk",St,yt),Ht("hmm",xt),Ht("hmmss",Tt),Ht("Hmm",xt),Ht("Hmmss",Tt),qt(["H","HH"],Vt),qt(["k","kk"],function(e,t,n){var r=N(e);t[Vt]=r===24?0:r}),qt(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),qt(["h","hh"],function(e,t,n){t[Vt]=N(e),d(n).bigHour=!0}),qt("hmm",function(e,t,n){var r=e.length-2;t[Vt]=N(e.substr(0,r)),t[$t]=N(e.substr(r)),d(n).bigHour=!0}),qt("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Vt]=N(e.substr(0,r)),t[$t]=N(e.substr(r,2)),t[Jt]=N(e.substr(i)),d(n).bigHour=!0}),qt("Hmm",function(e,t,n){var r=e.length-2;t[Vt]=N(e.substr(0,r)),t[$t]=N(e.substr(r))}),qt("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[Vt]=N(e.substr(0,r)),t[$t]=N(e.substr(r,2)),t[Jt]=N(e.substr(i))});var ir=/[ap]\.?m?\.?/i,or=nt("Hours",!0),ur={calendar:j,longDateFormat:I,invalidDate:R,ordinal:z,dayOfMonthOrdinalParse:W,relativeTime:V,months:nn,monthsShort:sn,week:Ln,weekdays:Hn,weekdaysMin:In,weekdaysShort:jn,meridiemParse:ir},ar={},fr={},lr,wr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Er=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sr=/Z|[+-]\d\d(?::?\d\d)?/,xr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Tr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Nr=/^\/?Date\((\-?\d+)/i,kr=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;t.createFromInputFallback=L("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var zr=L("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ur.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()}),Wr=L("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ur.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}),Jr=function(){return Date.now?Date.now():+(new Date)},Kr=["year","quarter","month","week","day","hour","minute","second","millisecond"];ni("Z",":"),ni("ZZ",""),Ht("Z",Mt),Ht("ZZ",Mt),qt(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=ii(Mt,e)});var ri=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var yi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,bi=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;wi.fn=Zr.prototype,wi.invalid=Yr;var Ci=Ti(1,"add"),ki=Ti(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ji=L("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});ht(0,["gg",2],0,function(){return this.weekYear()%100}),ht(0,["GG",2],0,function(){return this.isoWeekYear()%100}),as("gggg","weekYear"),as("ggggg","weekYear"),as("GGGG","isoWeekYear"),as("GGGGG","isoWeekYear"),Q("weekYear","gg"),Q("isoWeekYear","GG"),et("weekYear",1),et("isoWeekYear",1),Ht("G",At),Ht("g",At),Ht("GG",St,yt),Ht("gg",St,yt),Ht("GGGG",Ct,wt),Ht("gggg",Ct,wt),Ht("GGGGG",kt,Et),Ht("ggggg",kt,Et),Rt(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=N(e)}),Rt(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),ht("Q",0,"Qo","quarter"),Q("quarter","Q"),et("quarter",7),Ht("Q",gt),qt("Q",function(e,t){t[Wt]=(N(e)-1)*3}),ht("D",["DD",2],"Do","date"),Q("date","D"),et("date",9),Ht("D",St),Ht("DD",St,yt),Ht("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),qt(["D","DD"],Xt),qt("Do",function(e,t){t[Xt]=N(e.match(St)[0],10)});var ms=nt("Date",!0);ht("DDD",["DDDD",3],"DDDo","dayOfYear"),Q("dayOfYear","DDD"),et("dayOfYear",4),Ht("DDD",Nt),Ht("DDDD",bt),qt(["DDD","DDDD"],function(e,t,n){n._dayOfYear=N(e)}),ht("m",["mm",2],0,"minute"),Q("minute","m"),et("minute",14),Ht("m",St),Ht("mm",St,yt),qt(["m","mm"],$t);var ys=nt("Minutes",!1);ht("s",["ss",2],0,"second"),Q("second","s"),et("second",15),Ht("s",St),Ht("ss",St,yt),qt(["s","ss"],Jt);var bs=nt("Seconds",!1);ht("S",0,0,function(){return~~(this.millisecond()/100)}),ht(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ht(0,["SSS",3],0,"millisecond"),ht(0,["SSSS",4],0,function(){return this.millisecond()*10}),ht(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ht(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ht(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ht(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ht(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Q("millisecond","ms"),et("millisecond",16),Ht("S",Nt,gt),Ht("SS",Nt,yt),Ht("SSS",Nt,bt);var ws;for(ws="SSSS";ws.length<=9;ws+="S")Ht(ws,Lt);for(ws="S";ws.length<=9;ws+="S")qt(ws,Es);var Ss=nt("Milliseconds",!1);ht("z",0,0,"zoneAbbr"),ht("zz",0,0,"zoneName");var Ns=S.prototype;Ns.add=Ci,Ns.calendar=Ai,Ns.clone=Oi,Ns.diff=ji,Ns.endOf=Gi,Ns.format=Ui,Ns.from=zi,Ns.fromNow=Wi,Ns.to=Xi,Ns.toNow=Vi,Ns.get=st,Ns.invalidAt=os,Ns.isAfter=Mi,Ns.isBefore=_i,Ns.isBetween=Di,Ns.isSame=Pi,Ns.isSameOrAfter=Hi,Ns.isSameOrBefore=Bi,Ns.isValid=is,Ns.lang=Ji,Ns.locale=$i,Ns.localeData=Ki,Ns.max=Wr,Ns.min=zr,Ns.parsingFlags=ss,Ns.set=ot,Ns.startOf=Qi,Ns.subtract=ki,Ns.toArray=ts,Ns.toObject=ns,Ns.toDate=es,Ns.toISOString=qi,Ns.inspect=Ri,Ns.toJSON=rs,Ns.toString=Ii,Ns.unix=Zi,Ns.valueOf=Yi,Ns.creationData=us,Ns.year=bn,Ns.isLeapYear=wn,Ns.weekYear=fs,Ns.isoWeekYear=ls,Ns.quarter=Ns.quarters=vs,Ns.month=ln,Ns.daysInMonth=cn,Ns.week=Ns.weeks=Mn,Ns.isoWeek=Ns.isoWeeks=_n,Ns.weeksInYear=hs,Ns.isoWeeksInYear=cs,Ns.date=ms,Ns.day=Ns.days=zn,Ns.weekday=Wn,Ns.isoWeekday=Xn,Ns.dayOfYear=gs,Ns.hour=Ns.hours=or,Ns.minute=Ns.minutes=ys,Ns.second=Ns.seconds=bs,Ns.millisecond=Ns.milliseconds=Ss,Ns.utcOffset=ui,Ns.utc=fi,Ns.local=li,Ns.parseZone=ci,Ns.hasAlignedHourOffset=hi,Ns.isDST=pi,Ns.isLocal=vi,Ns.isUtcOffset=mi,Ns.isUtc=gi,Ns.isUTC=gi,Ns.zoneAbbr=xs,Ns.zoneName=Ts,Ns.dates=L("dates accessor is deprecated. Use date instead.",ms),Ns.months=L("months accessor is deprecated. Use month instead",ln),Ns.years=L("years accessor is deprecated. Use year instead",bn),Ns.zone=L("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ai),Ns.isDSTShifted=L("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",di);var As=P.prototype;As.calendar=F,As.longDateFormat=q,As.invalidDate=U,As.ordinal=X,As.preparse=Ls,As.postformat=Ls,As.relativeTime=$,As.pastFuture=J,As.set=_,As.months=rn,As.monthsShort=on,As.monthsParse=an,As.monthsRegex=vn,As.monthsShortRegex=pn,As.week=kn,As.firstDayOfYear=On,As.firstDayOfWeek=An,As.weekdays=Bn,As.weekdaysMin=qn,As.weekdaysShort=Fn,As.weekdaysParse=Un,As.weekdaysRegex=$n,As.weekdaysShortRegex=Kn,As.weekdaysMinRegex=Gn,As.isPM=rr,As.meridiem=sr,dr("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=N(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=L("moment.lang is deprecated. Use moment.locale instead.",dr),t.langData=L("moment.langData is deprecated. Use moment.localeData instead.",gr);var Fs=Math.abs,Qs=Ks("ms"),Gs=Ks("s"),Ys=Ks("m"),Zs=Ks("h"),eo=Ks("d"),to=Ks("w"),no=Ks("M"),ro=Ks("y"),oo=so("milliseconds"),uo=so("seconds"),ao=so("minutes"),fo=so("hours"),lo=so("days"),co=so("months"),ho=so("years"),vo=Math.round,mo={ss:44,s:45,m:45,h:22,d:26,M:11},So=Math.abs,To=Zr.prototype;return To.isValid=Gr,To.abs=Is,To.add=Rs,To.subtract=Us,To.as=$s,To.asMilliseconds=Qs,To.asSeconds=Gs,To.asMinutes=Ys,To.asHours=Zs,To.asDays=eo,To.asWeeks=to,To.asMonths=no,To.asYears=ro,To.valueOf=Js,To._bubble=Ws,To.get=io,To.milliseconds=oo,To.seconds=uo,To.minutes=ao,To.hours=fo,To.days=lo,To.weeks=po,To.months=co,To.years=ho,To.humanize=Eo,To.toISOString=xo,To.toString=xo,To.toJSON=xo,To.locale=$i,To.localeData=Ki,To.toIsoString=L("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xo),To.lang=Ji,ht("X",0,0,"unix"),ht("x",0,0,"valueOf"),Ht("x",At),Ht("X",_t),qt("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),qt("x",function(e,t,n){n._d=new Date(N(e))}),t.version="2.18.1",n(Ur),t.fn=Ns,t.min=Vr,t.max=$r,t.now=Jr,t.utc=h,t.unix=Cs,t.months=Ds,t.isDate=a,t.locale=dr,t.invalid=y,t.duration=wi,t.isMoment=x,t.weekdays=Hs,t.parseZone=ks,t.localeData=gr,t.isDuration=ei,t.monthsShort=Ps,t.weekdaysMin=js,t.defineLocale=vr,t.updateLocale=mr,t.locales=yr,t.weekdaysShort=Bs,t.normalizeUnits=G,t.relativeTimeRounding=bo,t.relativeTimeThreshold=wo,t.calendarFormat=Li,t.prototype=Ns,t}),define("vendors/twig/twigFilters",["underscore","moment","vendors/twig/twig"],function(e,t,n){function r(e){return e==="now"?t():t(e,"YYYY-MM-DD")}function l(e){return(e=Math.abs(e)%100)%10==1&&e!=11?"st":e%10==2&&e!=12?"nd":e%10==3&&e!=13?"rd":"th"}function c(e){var t=new Date(e.getFullYear()+1,0,4);return(t-e)/864e5<7&&(e.getDay()+6)%7<(t.getDay()+6)%7?t.getFullYear():e.getMonth()>0||e.getDate()>=4?e.getFullYear():e.getFullYear()-((e.getDay()+6)%7-e.getDate()>2?1:0)}function h(e){var t=new Date(c(e),0,4);return t.setDate(t.getDate()-(t.getDay()+6)%7),parseInt((e-t)/6048e5,10)+1}var i={"first day of previous month":function(e){return e.subtract("months",1).startOf("month")},"first day of this month":function(e){return e.startOf("month")},"first day of next month":function(e){return e.add("months",1).startOf("month")},"-10 years":function(e){return e.subtract("years",10)}};n.setFilter("date_modify",function(e,t,n){return n||(n=t,t=e),i[n](r(t))}),n.setFilter("merge",function(t,n){var r;return e.isArray(t)&&e.isArray(n)?r=t.concat(n):e.isArray(t)?r=e.extend(n,t):r=e.extend(t,n),r}),n.setFilter("roundUp",function(e,t){t==undefined&&(t=0);if(!t)return Math.ceil(e);var n=new RegExp("\\.\\d{"+t+"}$"),r;return n.test(""+e)?e:(r=Math.pow(10,t),Math.ceil(e*r)/r)}),n.setFilter("dateDiff",function(e,n){!e||e==="now"?e=new Date:typeof e!="object"&&(e.match(/\d:\d/)?e=e.replace(" ","T"):e+="T00:00:00",e+=".000Z",e=new Date(e)),!n||n==="now"?n=new Date:typeof n!="object"&&(n.match(/\d:\d/)?n=n.replace(" ","T"):n+="T00:00:00",n+=".000Z",n=new Date(n));var r=n.getUTCFullYear()*12+n.getUTCMonth(),i=e.getUTCDate(),s=n.getUTCDate(),o=0,u,a;return r-=e.getUTCFullYear()*12+e.getUTCMonth(),i<=s?o=s-i:(r-=1,o=t.utc(e).daysInMonth()+s-i),u=Math.floor(r/12),r-=u*12,o>=30&&(r+=1,o=0),r>=12&&(u+=1,r=0),a=t(n).diff(t(e),"days"),a?a++:(o=1,a=1),{y:u,m:r,d:o,days:a}}),n.setFilter("slice",function(e,t,n,r){return t.slice(n,n+r)}),n.setFilter("roundDown",function(e,t){t==undefined&&(t=0);if(!t)return Math.ceil(e);var n=new RegExp("\\.\\d{"+t+"}$"),r;return n.test(""+e)?e:(r=Math.pow(10,t),Math.floor(e*r)/r)}),n.setFilter("numberPlural",function(e,t){var n=e%10,r=Math.floor(e/10)%10;if(r!=1){if(n==1)return e+t[0];if(n>1&&n<5)return e+t[1]}return e+t[2]}),n.setFilter("trans",function(e,t,n,r){r=r||e.default_domain;var i=LOCALES[r]||LOCALES,s=i[t]||t;for(var o in n)n.hasOwnProperty(o)&&(s=s.replace(o,n[o]));return s}),n.setFilter("raw",function(e){return e&&e.toString()}),n.setFilter("join",function(e,t){return e.join(t)}),n.setFilter("json_encode",function(e){return JSON.stringify(e)}),n.setFilter("sort",function(e){if(Array.isArray(e))return e.sort();var t={};return Object.keys(e).sort(function(t,n){var r=e[t],i=e[n];return r>i?1:r<i?-1:0}).forEach(function(n){t[n]=e[n]}),t}),n.setFilter("trim",function(t,n){return e.trim(t,n)}),n.setFilter("format",function(){var e=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g,t=arguments,n=0,r=t[n++],i=function(e,t,n,r){var i=e.length>=t?"":(new Array(Math.abs(1+t-e.length))).join(n);return r?e+i:i+e},s=function(e,t,n,r,s){var o=r-e.length;return o>0&&(n||!s?e=i(e,r," ",n):e=e.slice(0,t.length)+i("",o,"0",!0)+e.slice(t.length)),e},o=function(e,t,n,r,o,u,a){var f=Math.abs(e);return n=n&&f&&{2:"0b",8:"0",16:"0x"}[t]||"",e=n+i(f.toString(t),u||0,"0",!1),s(e,n,r,o,a)},u=function(e,t,n,r,i){return r&&(e=e.slice(0,r)),s(e,"",t,n,i)},a=function(e,r,a,f,l,c,h){if(e=="%%")return"%";var p=!1,d="",v=!1,m=!1;for(var g=0;a&&g<a.length;g++)switch(a.charAt(g)){case" ":d=" ";break;case"+":d="+";break;case"-":p=!0;break;case"0":v=!0;break;case"#":m=!0}f?f=="*"?f=+t[n++]:f.charAt(0)=="*"?f=+t[f.slice(1,-1)]:f=+f:f=0,f<0&&(f=-f,p=!0);if(!isFinite(f))throw new Error("sprintf: (minimum-)width must be finite");c?c=="*"?c=+t[n++]:c.charAt(0)=="*"?c=+t[c.slice(1,-1)]:c=+c:c="fFeE".indexOf(h)>-1?6:h=="d"?0:void 0;var y=r?t[r.slice(0,-1)]:t[n++],b,w;switch(h){case"s":return u(String(y),p,f,c,v);case"c":return u(String.fromCharCode(+y),p,f,c,v);case"b":return o(y,2,m,p,f,c,v);case"o":return o(y,8,m,p,f,c,v);case"x":return o(y,16,m,p,f,c,v);case"X":return o(y,16,m,p,f,c,v).toUpperCase();case"u":return o(y,10,m,p,f,c,v);case"i":case"d":return b=parseInt(+y,10),w=b<0?"-":d,y=w+i(String(Math.abs(b)),c,"0",!1),s(y,w,p,f,v);case"e":case"E":case"f":case"F":case"g":case"G":b=+y,w=b<0?"-":d;var E=["toExponential","toFixed","toPrecision"]["efg".indexOf(h.toLowerCase())],S=["toString","toUpperCase"]["eEfFgG".indexOf(h)%2];return y=w+Math.abs(b)[E](c),s(y,w,p,f,v)[S]();default:return e}};return r.replace(e,a)}),n.setFilter("number_format",function(e,t,n,r,i){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var s=isFinite(+t)?+t:0,o=isFinite(+n)?Math.abs(n):0,u=typeof i=="undefined"?",":i,a=typeof r=="undefined"?".":r,f="",l=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return f=(o?l(s,o):""+Math.round(s)).split("."),f[0].length>3&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,u)),(f[1]||"").length<o&&(f[1]=f[1]||"",f[1]+=(new Array(o-f[1].length+1)).join("0")),f.join(a)});var s=function(e){if(!e)return"";var t="$1"+LOCALES.dash+"$2",n="$1"+LOCALES.leftQuote+"$3",r="$1"+LOCALES.rightQuote+"$3";return e.replace(/&#x2F;/g,"/").replace(/(^|\s)--?(\s|$)/g,t).replace(/( |\t)(—|–)/g,"&nbsp;$2").replace(/(^|\s|[(,.?!:;\[-])("|&quot;)(\S)/g,n).replace(/(\S)("|&quot;)(\s|[(,.?!:;\[-]|$)/g,r)};n.setFilter("typoInline",s),n.setFilter("typoBlock",function(e){return e?(e=s(e),e+=" \n",e.replace(/(.+)(\n\s*)+/g,"<p> $1 </p> \n").replace(/(^|[^">\/])(http(s?):\/\/(www\.)?|(www\.))((\S{25})(\S{5,})(\S{15})([^<\s.,>)\];'"!?»”]))/g,'$1<a href="http$3://$4$5$6">$4$5$7..$9$10</a>').replace(/(^|[^">\/])(http(s?):\/\/(www\.)?|(www\.))(\S+\.\S*([^<\s.,>)\];'"!?»”]))/g,'$1<a href="http$3://$4$5$6">$4$5$6</a>').replace(/(^|\s|\()([A-Za-z_0-9-]+?\.(ru|su|com|org|net))(\S*([^<\s.,>)\];'"!?»”]))?/g,'$1<a href="http://$2$4">$2$4</a>$5').replace(/<a\s+/g,'<a rel="nofollow" ').replace(/<a target="_blank" rel="nofollow" href="(http(s?):\/\/(www\.)?(alpari\.ru|alpari-forex\.com))/g,'<a target="_blank" href="$1').trim()):""}),n.setFilter("translateAssetBase",function(e,t,n,r){r=r||"StructuredProductsClientAssetBase";var i=LOCALES[r]||LOCALES,s="## str_name "+e.ticker,o=i[s]||e.description;return o}),n.setFilter("number_format_localized",function(e,t){return n.filter("number_format",null,e,t,LOCALES.decimalSeparator,LOCALES.digitSeparator)}),n.setFilter("number_format_localized_raw",function(e,t){t=t||0,e=e||0;var r=new RegExp("^-?\\d+(?:\\.\\d{0,"+t+"})?","g");return e=Number(e.toString().match(r)),e=n.filter("number_format_localized",e,t),e=e.replace(" "," "),LOCALES.rtl&&(e=e.replace(/^(-)(.+)$/,"$2$1",e)),e=e.replace("-","−"),e}),n.setFilter("amount_localized",function(e,t,r){return typeof t=="undefined"&&(t=2),r=e===null||typeof e=="undefined"||!r?"":" "+r,n.filter("number_format_localized_raw",e,t)+r}),n.setFilter("percent_localized",function(e,t){var r=e===null||typeof e=="undefined"?"":"%",i=e<0;return e=n.filter("number_format_localized_raw",e,t),LOCALES.v==="ar"||!i&&LOCALES.v==="fa"?r+e:(i&&LOCALES.v==="fa"&&(r=r?" %":""),e+r)}),n.setFilter("return_percent_localized",function(e,t){return e=n.filter("roundDown",e,t),n.filter("percent_localized",e,t).replace(/\D0+(\D+)$/,"$1")}),n.setFilter("date",function(e,t,r){if(t===undefined||t===null)return;return t=n.functions.date(t),n.lib.formatDate(t,r)}),twig.range=function(e,t){e=parseInt(e),t=parseInt(t);var n=e<t?1:-1;for(var r=[];e!=t;e+=n)r.push(e);return r.push(e<t?t:e),r},twig.filter.def=function(e,t){return e===undefined||e===null||e===""||e===!1?t!==undefined?t:e:e},n.functions={},n.lib={},n.functions.date=function(e){var t;if(e===undefined)t=new Date;else if(n.lib.is("Date",e))t=e;else if(n.lib.is("String",e))t=new Date(n.lib.strtotime(e)*1e3);else if(n.lib.is("Number",e))t=new Date(e*1e3);else{if(!("unix"in e))throw new Error("Unable to parse date "+e);t=new Date(e.unix()*1e3)}return t},n.lib.is=function(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return t!==undefined&&t!==null&&n===e},n.lib.strtotime=function(e,t){var n,r,i,s,o="";e=e.replace(/\s{2,}|^\s|\s$/g," "),e=e.replace(/[\t\r\n]/g,"");if(e==="now")return t===null||isNaN(t)?Math.round((new Date).getTime()/1e3):Math.round(t);if(!isNaN(o=Date.parse(e)))return Math.round(o/1e3);t?t=new Date(t*1e3):t=new Date,e=e.toLowerCase();var u={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},a=function(e){var n=e[2]&&e[2]==="ago",r=(e[0]==="last"?-1:1)*(n?-1:1);switch(e[0]){case"last":case"next":switch(e[1].substring(0,3)){case"yea":t.setFullYear(t.getFullYear()+r);break;case"wee":t.setDate(t.getDate()+r*7);break;case"day":t.setDate(t.getDate()+r);break;case"hou":t.setHours(t.getHours()+r);break;case"min":t.setMinutes(t.getMinutes()+r);break;case"sec":t.setSeconds(t.getSeconds()+r);break;case"mon":if(e[1]==="month"){t.setMonth(t.getMonth()+r);break};default:var i=u.day[e[1].substring(0,3)];if(typeof i!="undefined"){var s=i-t.getDay();s===0?s=7*r:s>0?e[0]==="last"&&(s-=7):e[0]==="next"&&(s+=7),t.setDate(t.getDate()+s),t.setHours(0)}}break;default:if(!/\d+/.test(e[0]))return!1;r*=parseInt(e[0],10);switch(e[1].substring(0,3)){case"yea":t.setFullYear(t.getFullYear()+r);break;case"mon":t.setMonth(t.getMonth()+r);break;case"wee":t.setDate(t.getDate()+r*7);break;case"day":t.setDate(t.getDate()+r);break;case"hou":t.setHours(t.getHours()+r);break;case"min":t.setMinutes(t.getMinutes()+r);break;case"sec":t.setSeconds(t.getSeconds()+r)}}return!0};i=e.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/);if(i!==null)return i[2]?i[3]||(i[2]+=":00"):i[2]="00:00:00",s=i[1].split(/-/g),s[1]=u.mon[s[1]-1]||s[1],s[0]=+s[0],s[0]=s[0]>=0&&s[0]<=69?"20"+(s[0]<10?"0"+s[0]:s[0]+""):s[0]>=70&&s[0]<=99?"19"+s[0]:s[0]+"",parseInt(this.strtotime(s[2]+" "+s[1]+" "+s[0]+" "+i[2])+(i[4]?i[4]/1e3:""),10);var f="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";i=e.match(new RegExp(f,"gi"));if(i===null)return!1;for(n=0,r=i.length;n<r;n++)if(!a(i[n].split(" ")))return!1;return Math.round(t.getTime()/1e3)};var o="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),u="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),a="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),f="January,February,March,April,May,June,July,August,September,October,November,December".split(",");n.lib.formatDate=function(e,t){if(typeof t!="string"||/^\s*$/.test(t))return e+"";var n=new Date(e.getFullYear(),0,1),r=e,i=t.replace(/(\\{0,2}[dDjlNSwzWFmMntLoYyaABgGhHisuU])/g,function(e){if(e.length>1)return e[e.length-1];switch(e){case"d":return("0"+r.getDate()).replace(/^.+(..)$/,"$1");case"D":return o[r.getDay()];case"j":return r.getDate();case"l":return u[r.getDay()];case"N":return(r.getDay()+6)%7+1;case"S":return l(r.getDate());case"w":return r.getDay();case"z":return Math.ceil((n-r)/864e5);case"W":return("0"+h(r)).replace(/^.(..)$/,"$1");case"F":return f[r.getMonth()];case"m":return("0"+(r.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return a[r.getMonth()];case"n":return r.getMonth()+1;case"t":return(new Date(r.getFullYear(),r.getMonth()+1,-1)).getDate();case"L":return(new Date(r.getFullYear(),1,29)).getDate()==29?1:0;case"o":return c(r);case"Y":return r.getFullYear();case"y":return(r.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return r.getHours()<12?"am":"pm";case"A":return r.getHours()<12?"AM":"PM";case"B":return Math.floor(((r.getUTCHours()+1)%24+r.getUTCMinutes()/60+r.getUTCSeconds()/3600)*1e3/24);case"g":return r.getHours()%12!==0?r.getHours()%12:12;case"G":return r.getHours();case"h":return("0"+(r.getHours()%12!==0?r.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+r.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+r.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+r.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return r.getTime();case"U":return r.getTime()/1e3}throw new Error("Unknown format: "+e)});return i}}),define("vendors/twig/twigTests",["vendors/twig/twig"],function(e){e.setTest("empty",function(e){if(e===null||e===undefined)return!0;if(typeof e=="number")return!1;if(e.length&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}),e.setTest("odd",function(e){return e%2===1}),e.setTest("even",function(e){return e%2===0}),e.setTest("divisibleby",function(e,t){return e%t[0]===0}),e.setTest("defined",function(e){return e!==undefined}),e.setTest("none",function(e){return e===null}),e.setTest("null",function(e){return this.none(e)}),e.setTest("sameas",function(e,t){return e===t[0]}),e.setTest("iterable",function(t){return t&&(e.lib.is("Array",t)||e.lib.is("Object",t))})}),define("Twig",["vendors/twig/twig","vendors/twig/twigFilters","vendors/twig/twigTests"],function(e){return e}),define("elements/CsrfProtector/CsrfProtector_TwigJs",["./CsrfProtector","Twig"],function(e,t){return e.redefine(function(e){return{protect:function(){e.protect.call(this);var n=this._csrfToken;t.setFunction("csrf_token",function(){return n})}}}),e}),define("elements/CsrfProtector/CsrfProtector_All",["./CsrfProtector","./CsrfProtector_jQueryAjax","./CsrfProtector_TwigJs"],function(e){return e}),define("global/Factories/ProductDescriptor",["BackboneX"],function(e){var t=e.Model.extend({defaults:function(){return{type:"",Constructor:null}},instantiateProduct:function(e){var t=this.get("Constructor");return new t(e)}});return t}),define("global/Factories/Factory",["BackboneX","underscore","jquery","./ProductDescriptor"],function(e,t,n,r){var i=e.View.extend({initialize:function(){this._super(),this._productDescriptors={},this._initProductDescriptors()},_initProductDescriptors:function(){var e=this._products();if(!e||typeof e["*"]!="function")throw new Error('You must define the default product type. Specify the correct constructor for the "*" key in the _products method');this.addProducts(e)},_addProductDescriptor:function(e,t){return this._productDescriptors[t]=new r({type:t,Constructor:e}),this._productDescriptors[t]},addProduct:function(e,t){return this._addProductDescriptor(t,e),this},addProducts:function(e){return t(e).each(this._addProductDescriptor.bind(this)),this},_products:function(){return{}},_getProductOptions:function(e,t){return t},createInstance:function(e,r){var i=this._getSuitableProductDescriptor(n(e));return r=t({el:e}).extend(r),r=this._generateProductOptions(r,i),i.instantiateProduct(r)},_generateProductOptions:function(e,t){return this._getProductOptions(t.get("type"),e)},_getSuitableProductDescriptor:function(e){throw new Error("You must redefine the _getProductDescriptor method in your factory")}});return i}),define("global/userProfile",["BackboneX","underscore.string"],function(e,t){var n="*",r=e.Object.extend({initialize:function(){this._super(),this._currentProfile="human"},_settings:{human:{TYPING_DELAY:1e3,SAVE_SETTINGS_REQUEST_DELAY:1e3,HOVER_REACTION_DELAY:200,ACCORDION_DURATION:200,PROMOBLOCK_ANIMATION_DELAY:400,DEFAULT_ANIMATION_DELAY:400},machine:function(){var e={};return e[n]=16,e}()},setProfile:function(e){if(!this._settings[e])throw new Error("Bad user profile:",e);this._currentProfile=e},get:function(e){var r=this._currentProfile,i=this._settings[r],s=i[e]||i[n];if(typeof s!="undefined")return s;throw new Error(t('Unknown option "%s" in UserProfile for %s profile').s(e,r))}});return new r}),define("global/elements/Accordion/Accordion",["BackboneX","underscore","jquery","global/userProfile"],function(e,t,n,r){var i=e.View.extend({_classes:function(){return t.defaults({groupActive:"accordion__group_active_yes",animating:"accordion_animating_yes"},this._super())},_selectors:function(){return t.defaults({title:".accordion__header:first",content:".accordion__content:first",group:">.accordion__group",groupActive:">.accordion__group_active_yes"},this._super())},_initProperties:function(){this._super(),this._duration=r.get("ACCORDION_DURATION"),this._easing="linear",this._single=!!this._data.single,this._closable=!!this._data.closable,this.name=this._data.name},events:function(){return this._getTitleItems().on("click",this._onTitleClick.bind(this)),this._super()},initialize:function(){this._super(),this._data.fixed&&this.$el.height(this.$el.height())},_onTitleClick:function(e){var t=this._getTitleItems().index(e.currentTarget);this._toggleContent(t)},_toggleContent:function(e,t){this._addClass("animating");if(this._single)return this._toggleSingleContent(e,t);var n=this._elem("group").eq(e);return this._toggleGroup(n,!0),this},toggle:function(e,t){return this._toggleContent(e,t)},_toggleSingleContent:function(e,t){var n=this._findElem("groupActive"),r=this._elem("group"),i=r.eq(e),s=n[0]===i[0];return(!t||!s)&&this._toggleGroup(n,!1),s?this._closable?this:(e=r.length-1===e?e-1:e+1,this._toggleGroup(r.eq(e),!0),this):this._toggleGroup(i,!0)},_toggleGroup:function(e,t){var n=e.find(this._selector("content")),r={duration:this._duration,easing:this._easing,complete:this._onToggleContent.bind(this,e,t)};return n.stop(!0,!0).animate({height:"toggle",marginBottom:"toggle",marginTop:"toggle",paddingBottom:"toggle",paddingTop:"toggle"},r),this},_onToggleContent:function(t,n){this._toggleClass("groupActive",t),this._dropElemCache("groupActive"),this._removeClass("animating"),e.trigger("change:visibility")},_getTitleItems:t.method.once(function(){return this._elem("group").find(this._selector("title"))})});return i}),define("mobile/elements/Accordion/Accordion",["global/elements/Accordion/Accordion"],function(e){return e.extend({_initProperties:function(){this._super(),this._duration=0}})}),define("global/Anchor/Anchor",["BackboneX","underscore","jquery"],function(e,t,n){var r=e.Model.extend({initialize:function(){this._super(),this._parseHash(),this.on("change",this._updateHash,this),n(window).on("hashchange",this._parseHash.bind(this))},_parseHash:function(){var e=location.hash;if("#"+this.pairs().join("&")===e)return;var n={};if(e.length){e=e.substring(1);var r=e.split("&");for(var i=0,s=r.length;i<s;i++){var o=r[i].split("=");n[o[0]]=o[1]||null}}t.chain(this.attributes).keys().forEach(function(e){n[e]||this.unset(e,{silent:!0})},this),this.set(n),this.trigger("hashchange")},_updateHash:function(){location.hash=this.pairs().join("&")},pairs:function(){var e=[];for(var t in this.attributes)if(this.attributes.hasOwnProperty(t)){var n=this.attributes[t];e.push(t+(n?"="+n:""))}return e},get:function(e){return arguments.length?this._super.apply(this,arguments):location.hash},has:function(e){return this.get(e)!==undefined}});return new r}),define("global/elements/Visibility/VisibilityListener",["vendors/Backbone/Mixin","./Visibility"],function(e,t){var n=new e({initialize:function(){this._super(),this.isVisible()?t.addVisibleElement(this):t.addInvisibleElement(this)},isVisible:function(){return this.$el.is(":visible")},handleChangeVisibility:function(e){return this},update:function(){return this}});return n}),define("global/elements/Accordion/AccordionWithHash",["underscore","./Accordion","global/Anchor/Anchor","global/elements/Visibility/VisibilityListener"],function(e,t,n,r){var i=!1,s=t.mix(r).extend({_initProperties:function(){this._super(),this._hashId=this._data.hashId},initialize:function(){this._super(),this.isVisible()&&this._getHash()&&(this._initCurrentGroup(!0),this.handleChangeVisibility(!0))},handleChangeVisibility:function(e){var t=e?"on":"off";return n[t]("hashchange",this._onHashChanged),this},_onHashChanged:e.method.bind(function(){i=!1,this._initCurrentGroup()}),_groupInViewport:function(e){var t={top:this._$window.scrollTop()};t.bottom=t.top+this._$window.height();var n=e.find(this._selector("title")),r=n.offset();return r.bottom=r.left+n.outerHeight(),t.bottom>r.top&&t.top<r.bottom},_onToggleContent:function(e,t){if(t){this._groupInViewport(e)||this._$window.scrollTo(e);var r=e.data("hash");n.set(this._hashId,r)}this._super(e)},_initCurrentGroup:function(t){if(i)return;i=!0;var n=this._getHash();if(n===this._getGroupHash()){var r=this._findElem("groupActive");this._groupInViewport(r)||this._$window.scrollTo(r);return}e.find(this._elem("group"),this._activateGroupIfCurrent.bind(this,t))},_activateGroupIfCurrent:function(e,t,n){var r=this._getHash(),i=$(t);return r&&r===this._getGroupHash(i)?e?(this._removeClass("groupActive","group"),this._addClass("groupActive",i),!0):(this._toggleContent(n),!0):!1},_getGroupHash:function(e){e||(e=this._findElem("groupActive"));var t=e.data("hash")||"";return t.toString()},_getHash:function(){var e=n.get(this._hashId);return e?e.toString():null}});return s}),define("vendors/jquery/plugins/jquery.selectionSwitching",["jquery"],function(e){return e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e});var HANDJS=HANDJS||{};HANDJS.doNotProcessCSS=!0,function(){function E(){b=!0,clearTimeout(w),w=setTimeout(function(){b=!1},700)}function S(e){var t=[];if(e){t.unshift(e);while(e.parentNode)t.unshift(e.parentNode),e=e.parentNode}return t}function x(e,t){var n=S(e),r=S(t),i=null;while(n.length>0&&n[0]==r.shift())i=n.shift();return i}function T(e,t,n){var r=x(e,t),i=e,s=[];while(i&&i!=r)l(i,"pointerenter")&&s.push(i),i=i.parentNode;while(s.length>0)n(s.pop())}function N(e,t,n){var r=x(e,t),i=e;while(i&&i!=r)l(i,"pointerleave")&&n(i),i=i.parentNode}function C(e,t){["pointerdown","pointermove","pointerup","pointerover","pointerout"].forEach(function(n){window.addEventListener(e(n),function(e){!b&&c(e.target,n)&&t(e,n,!0)})}),window["on"+e("pointerenter").toLowerCase()]===undefined&&window.addEventListener(e("pointerover"),function(e){if(b)return;var n=c(e.target,"pointerenter");if(!n||n===window)return;n.contains(e.relatedTarget)||T(n,e.relatedTarget,function(n){t(e,"pointerenter",!1,n,e.relatedTarget)})}),window["on"+e("pointerleave").toLowerCase()]===undefined&&window.addEventListener(e("pointerout"),function(e){if(b)return;var n=c(e.target,"pointerleave");if(!n||n===window)return;n.contains(e.relatedTarget)||N(n,e.relatedTarget,function(n){t(e,"pointerleave",!1,n,e.relatedTarget)})})}if(window.PointerEvent)return;Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=Object(this),n=t.length>>>0;if(n===0)return-1;var r=0;arguments.length>0&&(r=Number(arguments[1]),r!=r?r=0:r!=0&&r!=Infinity&&r!=-Infinity&&(r=(r>0||-1)*Math.floor(Math.abs(r))));if(r>=n)return-1;var i=r>=0?r:Math.max(n-Math.abs(r),0);for(;i<n;i++)if(i in t&&t[i]===e)return i;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){if(!this||!(e instanceof Function))throw new TypeError;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/,"")});var e=["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel","pointerenter","pointerleave"],t=["PointerDown","PointerUp","PointerMove","PointerOver","PointerOut","PointerCancel","PointerEnter","PointerLeave"],n="touch",r="pen",i="mouse",s={},o=function(e){while(e&&!e.handjs_forcePreventDefault)e=e.parentNode;return!!e||window.handjs_forcePreventDefault},u=function(e,t,s,o,u){var a;document.createEvent?(a=document.createEvent("MouseEvents"),a.initMouseEvent(t,s,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,u||e.relatedTarget)):(a=document.createEventObject(),a.screenX=e.screenX,a.screenY=e.screenY,a.clientX=e.clientX,a.clientY=e.clientY,a.ctrlKey=e.ctrlKey,a.altKey=e.altKey,a.shiftKey=e.shiftKey,a.metaKey=e.metaKey,a.button=e.button,a.relatedTarget=u||e.relatedTarget),a.offsetX===undefined&&(e.offsetX!==undefined?(Object&&Object.defineProperty!==undefined&&(Object.defineProperty(a,"offsetX",{writable:!0}),Object.defineProperty(a,"offsetY",{writable:!0})),a.offsetX=e.offsetX,a.offsetY=e.offsetY):Object&&Object.defineProperty!==undefined?(Object.defineProperty(a,"offsetX",{get:function(){return this.currentTarget&&this.currentTarget.offsetLeft?e.clientX-this.currentTarget.offsetLeft:e.clientX}}),Object.defineProperty(a,"offsetY",{get:function(){return this.currentTarget&&this.currentTarget.offsetTop?e.clientY-this.currentTarget.offsetTop:e.clientY}})):e.layerX!==undefined&&(a.offsetX=e.layerX-e.currentTarget.offsetLeft,a.offsetY=e.layerY-e.currentTarget.offsetTop)),e.isPrimary!==undefined?a.isPrimary=e.isPrimary:a.isPrimary=!0;if(e.pressure)a.pressure=e.pressure;else{var f=0;e.which!==undefined?f=e.which:e.button!==undefined&&(f=e.button),a.pressure=f==0?0:.5}e.rotation?a.rotation=e.rotation:a.rotation=0,e.hwTimestamp?a.hwTimestamp=e.hwTimestamp:a.hwTimestamp=0,e.tiltX?a.tiltX=e.tiltX:a.tiltX=0,e.tiltY?a.tiltY=e.tiltY:a.tiltY=0,e.height?a.height=e.height:a.height=0,e.width?a.width=e.width:a.width=0,a.preventDefault=function(){e.preventDefault!==undefined&&e.preventDefault()};if(a.stopPropagation!==undefined){var l=a.stopPropagation;a.stopPropagation=function(){e.stopPropagation!==undefined&&e.stopPropagation(),l.call(this)}}a.pointerId=e.pointerId,a.pointerType=e.pointerType;switch(a.pointerType){case 2:a.pointerType=n;break;case 3:a.pointerType=r;break;case 4:a.pointerType=i}o?o.dispatchEvent(a):e.target?e.target.dispatchEvent(a):e.srcElement.fireEvent("on"+p(t),a)},a=function(e,t,n,r,s){e.pointerId=1,e.pointerType=i,u(e,t,n,r,s)},f=function(e,t,r,i,s,o){var a=t.identifier+2;t.pointerId=a,t.pointerType=n,t.currentTarget=r,i.preventDefault!==undefined&&(t.preventDefault=function(){i.preventDefault()}),u(t,e,s,r,o)},l=function(e,t){return e.__handjsGlobalRegisteredEvents&&e.__handjsGlobalRegisteredEvents[t]},c=function(e,t){while(e&&!l(e,t))e=e.parentNode;if(e)return e;if(l(window,t))return window},h=function(e,t,n,r,i,s){c(n,e)&&f(e,t,n,r,i,s)},p=function(e){return e.toLowerCase().replace("pointer","mouse")},d=function(n,r){var i=e.indexOf(r),s=n+t[i];return s},v=function(e,t,n,r){e.__handjsRegisteredEvents===undefined&&(e.__handjsRegisteredEvents=[]);if(r){if(e.__handjsRegisteredEvents[t]!==undefined){e.__handjsRegisteredEvents[t]++;return}e.__handjsRegisteredEvents[t]=1,e.addEventListener(t,n,!1)}else{if(e.__handjsRegisteredEvents.indexOf(t)!==-1){e.__handjsRegisteredEvents[t]--;if(e.__handjsRegisteredEvents[t]!=0)return}e.removeEventListener(t,n),e.__handjsRegisteredEvents[t]=0}},m=function(e,t,n){e.__handjsGlobalRegisteredEvents||(e.__handjsGlobalRegisteredEvents=[]);if(n){if(e.__handjsGlobalRegisteredEvents[t]!==undefined){e.__handjsGlobalRegisteredEvents[t]++;return}e.__handjsGlobalRegisteredEvents[t]=1}else e.__handjsGlobalRegisteredEvents[t]!==undefined&&(e.__handjsGlobalRegisteredEvents[t]--,e.__handjsGlobalRegisteredEvents[t]<0&&(e.__handjsGlobalRegisteredEvents[t]=0));var r,i;window.MSPointerEvent?(r=function(e){return d("MS",e)},i=u):(r=p,i=a);switch(t){case"pointerenter":case"pointerleave":var s=r(t);e["on"+s.toLowerCase()]!==undefined&&v(e,s,function(e){i(e,t)},n)}},g=function(t){var n=t.prototype?t.prototype.addEventListener:t.addEventListener,r=function(t,r,i){e.indexOf(t)!=-1&&m(this,t,!0),n===undefined?this.attachEvent("on"+p(t),r):n.call(this,t,r,i)};t.prototype?t.prototype.addEventListener=r:t.addEventListener=r},y=function(t){var n=t.prototype?t.prototype.removeEventListener:t.removeEventListener,r=function(t,r,i){e.indexOf(t)!=-1&&m(this,t,!1),n===undefined?this.detachEvent(p(t),r):n.call(this,t,r,i)};t.prototype?t.prototype.removeEventListener=r:t.removeEventListener=r};g(window),g(window.HTMLElement||window.Element),g(document),g(HTMLBodyElement),g(HTMLDivElement),g(HTMLImageElement),g(HTMLUListElement),g(HTMLAnchorElement),g(HTMLLIElement),g(HTMLTableElement),window.HTMLSpanElement&&g(HTMLSpanElement),window.HTMLCanvasElement&&g(HTMLCanvasElement),window.SVGElement&&g(SVGElement),y(window),y(window.HTMLElement||window.Element),y(document),y(HTMLBodyElement),y(HTMLDivElement),y(HTMLImageElement),y(HTMLUListElement),y(HTMLAnchorElement),y(HTMLLIElement),y(HTMLTableElement),window.HTMLSpanElement&&y(HTMLSpanElement),window.HTMLCanvasElement&&y(HTMLCanvasElement),window.SVGElement&&y(SVGElement);var b=!1,w=-1;(function(){window.MSPointerEvent?C(function(e){return d("MS",e)},u):(C(p,a),window.ontouchstart!==undefined&&(window.addEventListener("touchstart",function(e){for(var t=0;t<e.changedTouches.length;++t){var n=e.changedTouches[t];s[n.identifier]=n.target,h("pointerover",n,n.target,e,!0),T(n.target,null,function(t){f("pointerenter",n,t,e,!1)}),h("pointerdown",n,n.target,e,!0)}E()}),window.addEventListener("touchend",function(e){for(var t=0;t<e.changedTouches.length;++t){var n=e.changedTouches[t],r=s[n.identifier];h("pointerup",n,r,e,!0),h("pointerout",n,r,e,!0),N(r,null,function(t){f("pointerleave",n,t,e,!1)})}E()}),window.addEventListener("touchmove",function(e){for(var t=0;t<e.changedTouches.length;++t){var n=e.changedTouches[t],r=document.elementFromPoint(n.clientX,n.clientY),i=s[n.identifier];i&&o(i)===!0&&e.preventDefault(),h("pointermove",n,i,e,!0);if(i===r)continue;i&&(h("pointerout",n,i,e,!0,r),i.contains(r)||N(i,r,function(t){f("pointerleave",n,t,e,!1,r)})),r&&(h("pointerover",n,r,e,!0,i),r.contains(i)||T(r,i,function(t){f("pointerenter",n,t,e,!1,i)})),s[n.identifier]=r}E()}),window.addEventListener("touchcancel",function(e){for(var t=0;t<e.changedTouches.length;++t){var n=e.changedTouches[t];h("pointercancel",n,s[n.identifier],e,!0)}})))})(),navigator.pointerEnabled===undefined&&(navigator.pointerEnabled=!0,navigator.msPointerEnabled&&(navigator.maxTouchPoints=navigator.msMaxTouchPoints)),document.styleSheets&&document.addEventListener&&document.addEventListener("DOMContentLoaded",function(){if(HANDJS.doNotProcessCSS||document.body.style.touchAction!==undefined)return;var e=new RegExp(".+?{.*?}","m"),t=new RegExp(".+?{","m"),n=function(n){var r=e.exec(n);if(!r)return;var i=r[0];n=n.replace(i,"").trim();var s=t.exec(i)[0].replace("{","").trim();if(i.replace(/\s/g,"").indexOf("touch-action:none")!=-1){var o=document.querySelectorAll(s);for(var u=0;u<o.length;u++){var a=o[u];a.style.msTouchAction!==undefined?a.style.msTouchAction="none":a.handjs_forcePreventDefault=!0}}return n},r=function(e){if(window.setImmediate)e&&setImmediate(r,n(e));else while(e)e=n(e)};try{for(var i=0;i<document.styleSheets.length;i++){var s=document.styleSheets[i];if(s.href==undefined)continue;var o=new XMLHttpRequest;o.open("get",s.href),o.send();var u=o.responseText.replace(/(\n|\r)/g,"");r(u)}}catch(a){}var f=document.getElementsByTagName("style");for(var i=0;i<f.length;i++){var l=f[i],c=l.innerHTML.replace(/(\n|\r)/g,"").trim();r(c)}},!1)}(),define("vendors/hand",function(){}),define("global/elements/Scrollable/Scroll",["BackboneX","underscore","vendors/jquery/plugins/jquery.selectionSwitching","vendors/hand"],function(e,t){var n=e.View.extend({_classes:function(){return t.defaults({track:"scroll__track",thumb:"scroll__thumb",dragging:"scroll_dragging_yes",active:"scroll_active_yes"},this._super())},events:function(){var e={};return e["pointerdown "+this._selector("thumb")]=this._onThumbPointerDown,e["mousedown "+this._selector("track")]=this._onTrackMouseDown,e["mousedown "+this._selector("toBegin")]=this._onToBeginMouseDown,e["mousedown "+this._selector("toEnd")]=this._onToEndMouseDown,e},_sizeMethod:"",_shiftProp:"",_pageShiftProp:"",_disabled:!1,_buttonShift:36,_minThumbSize:8,initialize:function(){$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),this._super();var e=parseInt(this._elem("thumb").css("min-"+this._sizeMethod),10);e&&(this._minThumbSize=e),this._elem("thumb").disableSelection(),this._elem("track").disableSelection()},update:function(e,t){if(t<=e){this._disable();return}this.$el.addClass(this._class("active")),this._maxScrollableShift=t-e;var n=this._elem("track")[this._sizeMethod](),r=this._thumbSize=Math.ceil(e*n/t);r<this._minThumbSize&&(r=this._minThumbSize),this._maxShift=n-r,this._elem("thumb")[this._sizeMethod](r),this._enable()},setShift:function(e){var t={};this._currentScrollableShift=e,this._currentShift=t[this._shiftProp]=this._convertShiftFromScrollable(e),this._elem("thumb").css(t)},_convertShiftFromScrollable:function(e){return Math.round(e*this._maxShift/this._maxScrollableShift)},_convertShiftToScrollable:function(e){return Math.round(e*this._maxScrollableShift/this._maxShift)},_shift:function(e,t){if(!e)return;var n=t?e+this._currentScrollableShift:this._convertShiftToScrollable(e+this._currentShift);this._shiftTo(n,!0)},_shiftTo:function(e,t){e=t?e:this._convertShiftToScrollable(e),e<0?e=0:e>this._maxScrollableShift&&(e=this._maxScrollableShift),this.trigger("shift",e)},isDisabled:function(){return this._disabled},_disable:function(){if(this.isDisabled())return;this._disabled=!0,this.$el.removeClass(this._class("active")),this.trigger("disabled")},_enable:function(){if(!this.isDisabled())return;this._disabled=!1,this.$el.addClass(this._class("active")),this.trigger("enabled")},_onThumbPointerDown:function(e){e.preventDefault(),this._thumbStart=e.originalEvent[this._pageShiftProp],this._thumbStartShift=this._currentShift,this.$el.addClass(this._class("dragging")),this._$body.on("pointerup.scroll",this._onThumbUp).on("pointermove.scroll",this._onThumbMove)},_onThumbMove:t.method.bind(function(e){var t=e.originalEvent[this._pageShiftProp];this._shiftTo(this._thumbStartShift+t-this._thumbStart)}),_onThumbUp:t.method.bind(function(){this.$el.removeClass(this._class("dragging")),this._$body.off(".scroll")}),_onTrackMouseDown:function(e){e.target===this._elem("track")[0]&&(this._moveTrack(e),this._$document.on("mouseup.scroll",this._onTrackUp.bind(this)))},_moveTrack:function(e){var t=this._getMouseRelThumbPosition(e),n=t*this._thumbSize;n&&(this._shift(n),this._moveTrackTimeoutId=setTimeout(this._moveTrack.bind(this,e),0))},_onTrackUp:function(){this._$document.off("mouseup.scroll"),this._moveTrackTimeoutId&&clearTimeout(this._moveTrackTimeoutId)},_getMouseRelThumbPosition:function(e){var t=e[this._pageShiftProp],n=this._elem("thumb").offset()[this._shiftProp],r=t<n,i=n+this._thumbSize,s=t>i;return r?-1:s?1:0},_moveTrackTimeoutId:0,_onButtonMouseDown:function(e){this._$document.on("mouseup.scroll",this._onButtonUp.bind(this,e)),this._buttonPressureTimeoutId=setTimeout(this._onButtonPressure.bind(this,e),200)},_buttonPressureTimeoutId:0,_onButtonUp:function(e){this._$document.off("mouseup.scroll"),this._onButtonPressure(e),clearTimeout(this._buttonPressureTimeoutId)},_onButtonPressure:function(e){this._shift(e*this._buttonShift,!0),this._buttonPressureTimeoutId&&clearTimeout(this._buttonPressureTimeoutId),this._buttonPressureTimeoutId=setTimeout(this._onButtonPressure.bind(this,e),0)},_onToBeginMouseDown:function(){this._onButtonMouseDown(-1)},_onToEndMouseDown:function(){this._onButtonMouseDown(1)}});return n}),define("global/elements/Scrollable/VerticalScroll",["underscore","./Scroll"],function(e,t){var n=t.extend({_classes:function(){return e.defaults({toBegin:"scroll__button_moving_up",toEnd:"scroll__button_moving_down"},this._super())},initialize:function(){this._sizeMethod="height",this._shiftProp="top",this._pageShiftProp="pageY",this._super()}});return n}),function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||r.compatMode=="BackCompat"?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,s){return typeof i=="object"&&(s=i,i=0),typeof s=="function"&&(s={onAfter:s}),r=="max"&&(r=9e9),s=e.extend({},t.defaults,s),i=i||s.speed||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(i/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){function h(e){u.animate(l,i,s.easing,e&&function(){e.call(this,r,s)})}var o=this,u=e(o),a=r,f,l={},c=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);case"object":if(a.is||a.style)f=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),p="scroll"+r,d=o[p],v=t.max(o,n);if(f)l[p]=f[i]+(c?0:d-u.offset()[i]),s.margin&&(l[p]-=parseInt(a.css("margin"+r))||0,l[p]-=parseInt(a.css("border"+r+"Width"))||0),l[p]+=s.offset[i]||0,s.over[i]&&(l[p]+=a[n=="x"?"width":"height"]()*s.over[i]);else{var m=a[i];l[p]=m.slice&&m.slice(-1)=="%"?parseFloat(m)/100*v:m}/^\d+$/.test(l[p])&&(l[p]=l[p]<=0?0:Math.min(l[p],v)),!e&&s.queue&&(d!=l[p]&&h(s.onAfterFirst),delete l[p])}),h(s.onAfter)}).end()},t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}}(jQuery),define("vendors/jquery/plugins/jquery.scrollTo",function(){}),define("global/elements/Scrollable/Scrollable",["Backbone","jquery","underscore","global/elements/Visibility/VisibilityListener","./VerticalScroll","global/elements/Visibility/Visibility","vendors/jquery/plugins/jquery.scrollTo"],function(e,t,n,r,i,s){var o=e.View.mix(r).extend({_classes:function(){return n.defaults({scroll:"scroll",verticalScroll:"scroll_type_vertical",systemScrolls:"scrollable__systemscrolls",verticalScrollActive:"scrollable_vertical_active",content:"scrollable__content",viewport:"scrollable__viewport",scrolling:"scrollable_scrolling",inited:"scrollable_inited_yes",autoHidingScrolls:"scrollable_hiding_yes"},this._super())},initialize:function(){this._super(),this._verticalScrollDisabled=!0,this._isScrollsAutoHiding=this.$el.hasClass(this._class("autoHidingScrolls")),this._verticalScroll=null,this.isVisible()&&(this._fixDimensions(),this.$el.addClass(this._class("inited"))),this._initVerticalScroll(),this._$window.resize(this._onWinResize.bind(this))},scrollTo:function(e,t){t=t||0;var n=e.offset().top,r=e.outerHeight(),i=n+r,s=this._elem("viewport"),o=s.offset().top,u=s.height(),a=o+u;if(n>o+t&&i<a-t)return this;var f={offset:-t,onAfter:this._setVerticalScrollShift.bind(this)};return i>=a-t&&(f.offset=r+t-u),this._elem("systemScrolls").scrollTo(e,f),this},getVerticalScrollShift:function(){return this._elem("systemScrolls").scrollTop()},addContent:function(e){return this._elem("content").append(e),this.update(),this},setContent:function(e){return this._elem("content").html(e),this.update(),this},hasContent:function(){return this._elem("content").children().length>0},update:function(){return this._updateWidthAndHeight(),this._verticalScroll&&this._updateVerticalScroll(),this},getContentHeight:function(){return this._elem("content").outerHeight()},_onWinResize:function(){this.isVisible()?this.update():s.addInvisibleElement(this)},_setContentBottomToAuto:function(){this._elem("content").css("bottom","auto")},_setContentBottomToPredefinedValue:function(){this._elem("content").css("bottom","")},_updateWidthAndHeight:function(){this.$el.removeClass(this._class("inited")).width("").height(""),this._verticalScroll&&(this._fixDimensions(),this.$el.width("").addClass(this._class("inited")),this._enableVerticalScroll(),this._updateVerticalScroll(),this.$el.removeClass(this._class("inited"))),this._fixDimensions(),this.$el.addClass(this._class("inited"))},_fixDimensions:function(){var e,n;if(t.browser.msie&&window.getComputedStyle){var r=getComputedStyle(this.$el[0]);e=this._calculatePropertiesSum(["width","borderLeftWidth","borderRightWidth"],r),n=this._calculatePropertiesSum(["height","borderTopWidth","borderBottomWidth"],r)}else e=this.$el.outerWidth(),n=this.$el.outerHeight();this.$el.width(e).height(n)},_calculatePropertiesSum:function(e,t){return Math.ceil(e.reduce(function(e,n){return e+parseFloat(t[n])},0))},_getViewportHeight:function(){return this._elem("viewport").innerHeight()},_initVerticalScroll:function(){if(!this._elem("verticalScroll").length)return;this._verticalScroll=new i({el:this._elem("verticalScroll")}),this._verticalScroll.on("disabled",this._onVerticalScrollDisabled,this).on("enabled",this._onVerticalScrollEnabled,this).on("shift",this._onVerticalScrollShift,this),this.isVisible()&&(this._enableVerticalScroll(),this._updateVerticalScroll()),this._elem("systemScrolls").on("scroll",this._onScrollY.bind(this))},_updateVerticalScroll:function(){this._isScrollsAutoHiding&&this._setContentBottomToAuto();var e=this.getContentHeight(),t=this._getViewportHeight();this._isScrollsAutoHiding&&this._setContentBottomToPredefinedValue(),this._verticalScroll.update(t,e),this._verticalScroll.setShift(this.getVerticalScrollShift()),this._verticalScroll.isDisabled()?this._onVerticalScrollDisabled():this._onVerticalScrollEnabled()},_onVerticalScrollDisabled:function(){this._isScrollsAutoHiding&&(this.$el.removeClass(this._class("verticalScrollActive")),o.sizes.verticalOptimized&&this._elem("systemScrolls").css(window.rtl?"left":"right",0)),this._verticalScrollDisabled=!0},_onVerticalScrollEnabled:function(){this._isScrollsAutoHiding&&this._verticalScrollDisabled&&this._enableVerticalScroll()},_enableVerticalScroll:function(){this.$el.addClass(this._class("verticalScrollActive"));if(o.sizes.verticalOptimized){var e={};e[window.rtl?"left":"right"]=-o.sizes.verticalOptimized+"px",this._elem("systemScrolls").css(e)}this._verticalScrollDisabled=!1},_isVerticalScrollDisabled:function(){return this._verticalScrollDisabled},_isVerticalScrollEnabled:function(){return!this._verticalScrollDisabled},_onVerticalScrollShift:function(e){this._preventContentSelection(),this._elem("systemScrolls").scrollTop(e),this._allowContentSelection()},_onScrollY:function(){this._setVerticalScrollShift()},_setVerticalScrollShift:function(){this._verticalScroll.setShift(this.getVerticalScrollShift())},_preventContentSelection:function(){this._elem("content").addClass(this._class("scrolling"))},_allowContentSelection:n.method.debounce(function(){this._elem("content").removeClass(this._class("scrolling"))},500)},{sizes:function(){var e=t("<div></div>").appendTo("body"),n=t("<div></div>").addClass("scrollable__size-helper").appendTo(e),r=t("<div></div>").addClass("scrollable__size-helper").addClass("scrollable__size-helper_scoll_switched-off").appendTo(e),i=r[0],s=n[0],o={vertical:s.offsetWidth-s.clientWidth,horizontal:s.offsetHeight-s.clientHeight,verticalOptimized:i.offsetWidth-i.clientWidth,horizontalOptimized:i.offsetHeight-i.clientHeight};return e.remove(),o}()});return o}),define("global/elements/Accordion/AccordionWithScrolls",["underscore","./Accordion","global/elements/Scrollable/Scrollable"],function(e,t,n){var r=t.extend({_selectors:function(){return e.defaults({scrollable:".scrollable"},this._super())},_initProperties:function(){this._super(),this._scrollables=[]},initialize:function(){this._super(),this._initScrollables()},_initScrollables:function(){var e=this._scrollables;this._elem("scrollable").each(function(){e.push(new n({el:this}))})}});return r}),define("global/elements/Accordion/accordionsFactory",["global/Factories/Factory","./Accordion","./AccordionWithHash","./AccordionWithScrolls"],function(e,t,n,r){var i=e.extend({_products:function(){return _.defaults({"*":t,Accordion:t,AccordionWithHash:n,AccordionWithScrolls:r},this._super())},_getSuitableProductDescriptor:function(e){var t=e.data("type");return this._productDescriptors[t]||this._productDescriptors["*"]}});return new i}),define("global/elements/ServiceManager/ServiceManager",["BackboneX"],function(e){var t=e.Object.extend({_initProperties:function(){this._super(),this._services={}},setService:function(e,t){return this._services[e]=t,this},getService:function(e){if(!this._services[e])throw new Error("Service "+e+" not found");return this._services[e]}});return t}),define("global/elements/ServiceManager/WithServiceManager",["./ServiceManager","vendors/Backbone/Mixin"],function(e,t){var n=new t({_serviceManager:new e,_getServiceManager:function(){return this._serviceManager},_getService:function(e){return this._serviceManager.getService(e)}});return n}),define("vendors/underscore/underscore.objectInclude",["underscore"],function(e){return e.mixin({objectInclude:function(t,n){return e(n).every(function(n,r){return e(t[r]).isEqual(n)})}}),e}),define("global/elements/Queries/Queries",["jquery","underscore","vendors/Backbone/Mixin","global/elements/ServiceManager/WithServiceManager","vendors/underscore/underscore.objectInclude"],function(e,t,n,r){var i=4,s=206,o=new n({dependencies:[r]},{initialize:function(){this._super(),this._queriesMap=this._queries(),this._urlsMap=this._urls(),this._requestedQueries={}},_queries:function(){return{}},_urls:function(){return{}},_url:function(e,t){var n=this._getService("urls"),r=this._urlsMap[e],i=r||e;n&&n.hasRoute(i)&&(r=n.get(i,t));if(r==null)throw new Error("Url for "+e+" does not found");return r},setUrl:function(e,t){return this._urlsMap[e]=t,this},query:function(e,t){var n=this._queriesMap[e];if(!n)throw new Error("There is no query "+e+" defined.");return n.call(this,t),this},abortQuery:function(e){var t=this._requestedQueries[e];return t&&(t.forEach(function(e){e.query.abort()}),delete this._requestedQueries[e]),this},abortAllQueries:function(){return t(this._requestedQueries).each(function(e){e.forEach(function(e){e.query.abort()})}),this._requestedQueries={},this},_sendQuery:function(n,r,i){i=i||{},r=r||{};var s={done:r.success,fail:r.error,always:r.complete};["success","error","complete"].forEach(function(e){r[e]&&delete r[e]}),r=t({type:"get",url:r.url||this._url(n,i.urlParams),success:this._onSuccessResponse.bind(this,n),error:this._onErrorResponse.bind(this,n),complete:this._onCompleteResponse.bind(this,n)}).extend(r),i.preventAbort||this.abortQuery(n),this.trigger(n+":request"),this.trigger("query:request");var o;i.transport?o=i.transport.save(r):o=e.ajax(r);for(var u in s)s.hasOwnProperty(u)&&typeof s[u]=="function"&&o[u](s[u]);var a={name:n,query:o,params:r};return this._requestedQueries[n]?this._requestedQueries[n].push(a):this._requestedQueries[n]=[a],o},_onSuccessResponse:function(e,t,n,r){if(r&&r.status===s){this._onErrorResponse(e,r);return}this.trigger(e+":success",t),this.trigger("query:success",t)},_onErrorResponse:function(e,t){this._processError(e,this._parseErrorFromXHR(t),t)},_onCompleteResponse:function(e){var t=this._requestedQueries[e];t&&(t=t.filter(function(e){return e.query.readyState!=i}),t.length?this._requestedQueries[e]=t:delete this._requestedQueries[e]),this.trigger(e+":complete"),this.trigger("query:complete"),this.hasActiveQueries()||this.trigger("allQueries:complete")},_processError:function(e,t,n){this.trigger(e+":error",t,n),this.trigger("query:error",t,n)},_parseErrorFromXHR:function(e){var t;try{t=JSON.parse(e.responseText).error}catch(n){e.status===400&&window.console&&window.console.warn&&console.warn("Unknown server error format: "+e.responseText)}return t||{code:"",message:""}},hasActiveQueries:function(){return!t(this._requestedQueries).isEmpty()},_hasQuery:function(e,n){var r=this._requestedQueries[e];return!n||!r?!!r:r.some(function(e){return t(e.params).objectInclude(n)})}});return o}),define("global/elements/Queries/Connection",["BackboneX","global/elements/Queries/Queries"],function(e,t){var n=e.Model.mix(t).extend({query:function(e,t,n){this._sendQuery(e,t,n)}});return n}),define("global/Mixin/PersonalDataKeeper",["underscore","vendors/Backbone/Mixin","global/elements/ServiceManager/WithServiceManager","global/elements/Queries/Connection","global/userProfile","vendors/Backbone/Backbone.MethodUtils"],function(e,t,n,r,i){var s=new t({dependencies:[n]},{initialize:function(){this._super(),this._initPersonalDataConnection()},_initProperties:function(){this._super(),this._personalDataType="",this._personalDataConnection=null},_initPersonalDataConnection:function(){this._personalDataConnection=new r,this._personalDataConnection.setUrl("save",this._getService("urls").get("gtt_my_main_page_set_personal_settings_storage"))},_getPersonalData:function(){throw new Error("You must redefine the _getPersonalData method in your child class")},_savePersonalData:e.method.debounce(function(){this._personalDataConnection.query("save",{type:"POST",data:{data:this._getPersonalData(),type:this._personalDataType}})},i.get("SAVE_SETTINGS_REQUEST_DELAY"))});return s}),define("elements/Accordion/AccordionWithMemory",["jquery","global/elements/Accordion/Accordion","global/Mixin/PersonalDataKeeper"],function(e,t,n){var r=t.mix(n).extend({initialize:function(){this._super(),this._initGroups()},_initProperties:function(){this._super(),this._groups={},this._personalDataType="accordions"},_initGroups:function(){var t=this._groups;this._elem("group").each(function(n){var r=e(this);t[r.attr("data-accordion-group-name")]={$group:r,index:n}})},_onToggleContent:function(e,t){this._super(e,t),this._savePersonalData()},_getPersonalData:function(){var e=this._groups,t,n={};for(var r in e)e.hasOwnProperty(r)&&(t=e[r],n[r]={opened:t.$group.hasClass(this._class("groupActive"))});return JSON.stringify(n)}});return r}),define("global/elements/Notification/Notification",["BackboneX","underscore"],function(e,t){var n=e.View.extend({_classes:function(){return t.defaults({close:"notification__close"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("close")]=this.hide,e},_initProperties:function(){this._super(),this._visible=!this.$el.hasClass(this._class("hidden"))},show:function(){return this.isVisible()?this:(this._visible=!0,this.$el.removeClass(this._class("hidden")),this.trigger("show",this),this)},hide:function(){return this.isVisible()?(this._visible=!1,this.$el.addClass(this._class("hidden")),this.trigger("hide",this),this):this},isVisible:function(){return this._visible}});return n}),define("global/elements/Notification/NotificationManager",["BackboneX","underscore","jquery","./Notification"],function(e,t,n,r){var i=e.View.extend({_classes:function(){return t.defaults({notification:"notification"},this._super())},initialize:function(){this._super(),this._initNotifications()},_initProperties:function(){this._super(),this._activeNotification=null,this._notifications={}},_initNotifications:function(){t.each(this._elem("notification"),this._initNotification,this)},_initNotification:function(e){var t=n(e),i=t.data("notificationName"),s=new r({el:t});this._notifications[i]=s,s.on("show",this._onNotificationShow,this),s.on("hide",this._onNotificationHide,this)},_onNotificationShow:function(e){this._activeNotification&&this._activeNotification.hide(),this._activeNotification=e},_onNotificationHide:function(){this._activeNotification=null},show:function(e){var t=this.get(e);return t&&t.show(),this},hide:function(e){if(e){var n=this.get(e);n&&n.hide()}else t.each(this._notifications,function(e){e.hide()});return this},get:function(e){return this._notifications[e]}});return i}),define("global/elements/DataList/Filters/AbstractFilterModel",["underscore","BackboneX"],function(e,t){var n=t.Model.extend({_initProperties:function(){this._super(),this._name=""},initialize:function(){this._super(),this.on("change",this.filter,this)},filter:function(){return this.trigger("filter",this),this},getName:function(){return this._name},getQueryParams:function(){return this.toJSON()}});return n}),define("global/elements/DataList/Filters/FiltersCollection",["BackboneX","./AbstractFilterModel"],function(e,t){var n=e.Collection.extend({model:t,getByName:function(e){return this.find(function(t){return t.getName()===e})}});return n}),define("global/elements/DataList/FilteredDataListModel",["BackboneX","underscore","global/elements/Queries/Queries","./Filters/FiltersCollection"],function(e,t,n,r){var i=e.Model.mix(n).extend({_initProperties:function(){this._super(),this.filters=new r,this.filters.on("change",this._onFilterChange,this),this.filters.on("filter",this._onFilter,this),this.filters.on("add",this._onFilterAdd,this)},_queries:function(){return t.defaults({fetch:this.fetch},this._super())},_onFilter:function(e){this.trigger("filter:"+e.getName(),e),this._fetchDeferred()},_onFilterChange:function(e){this.trigger("change:filter:"+e.getName(),e),this.set(e.getQueryParams())},_onFilterAdd:function(e){this.set(e.getQueryParams(),{silent:!0})},getQueryParams:function(){var e=this.toJSON(),t="";for(t in e)e[t]===""&&delete e[t];return e},_fetchDeferred:t.method.debounce(function(){this.fetch()}),fetch:function(e){return e=e||{},e.data=this.getQueryParams(),this._sendQuery("fetch",e),this}});return i}),define("global/elements/DataList/Filters/AbstractFilterView",["BackboneX","./AbstractFilterModel"],function(e,t){var n=e.View.extend({_ModelConstructor:t,model:null,initialize:function(){this._super(),this._initModel()},_initModel:function(){this.model=new this._ModelConstructor},updateFromResponse:function(e){},updateOnResponseComplete:function(){}});return n}),define("global/elements/DataList/Filters/Form/FormFilterModel",["../../Filters/AbstractFilterModel"],function(e){var t=e.extend({_initProperties:function(){this._super(),this._name="form",this._form=null},setForm:function(e){return this._form=e,this},getForm:function(){return this._form},getFieldsValues:function(){var e={};return this.getForm().eachField(function(t){e[t.get("name")]=t.value()}),e}});return t}),define("global_forms/Abstract/LinkValueHelper",["vendors/Backbone/Mixin"],function(e){var t=new e({link:function(e,t,n){return typeof e!="string"&&(n=t,t=e,e="value"),this._super(e,t,n)},unlink:function(e,t,n){return typeof e!="string"&&(n=t,t=e,e="value"),this._super(e,t,n)}});return t}),define("global_forms/Inputs/Abstract/AbstractInputModel",["BackboneX","global_forms/Abstract/LinkValueHelper"],function(e,t){var n=e.Model.mix(t).extend({defaults:function(){return{value:"",startValue:""}},_initProperties:function(){this._super(),this._convertValueToString=!0},value:function(e){return e===undefined?this.get("value"):(this._convertValueToString&&(e=e===null?"":e+""),this.set({value:e}),this)},clearValue:function(){return this.value(""),this},resetValue:function(){return this.value(this.get("startValue")),this},updateInitialValue:function(){return this.set("startValue",this.value()),this}});return n}),define("global_forms/Inputs/Abstract/AbstractInputsCollection",["BackboneX","./AbstractInputModel"],function(e,t){var n=e.Collection.extend({model:t});return n}),define("global_forms/Validation/FormFieldValidator",["BackboneX","underscore"],function(e,t){var n=e.Model.extend({_initProperties:function(){this._super(),this._errorData={}},initialize:function(){this._super(),this._ruleNameForRequired="not-empty",this._rulesMap=this._processRulesMap()},_processRulesMap:function(){var e={};return t(this._getRulesMap()).each(function(t,n){typeof t=="string"&&(t=this[n]);if(typeof t!="function")throw new TypeError("_getRulesMap should return an object that contains functions or validator method names as values");e[n]=t},this),e[this._ruleNameForRequired]=this._required,e},_getRulesMap:function(){return{}},_required:function(e,t){var n,r,i;this._errorData={},i=!this.isEmptyValue(e,t);if(!i)for(n=0,r=e.length;n<r;n++)if(!e[n]){this._errorData.input=n;break}return i},addRule:function(e,t){if(typeof t!="function")throw new TypeError("Second parameter in addRule must be a function");return this._rulesMap[e]=t,this},hasRule:function(e){return!!this._rulesMap[e]},check:function(e,n,r){if(!e.length)return null;var i=this._required(r,n),s=e.indexOf(this._ruleNameForRequired);if(!i)return s>-1?{rule:this._ruleNameForRequired,errorData:this._errorData}:null;s>-1&&(e=e.slice(0),e.splice(s,1));var o=t(e).find(function(e){var t=this._getValidationMethod(e);if(typeof t!="function")throw console.trace(),new Error("There was no function for "+e+" rule found.");return!t.call(this,r,n)},this)||null;return o?{rule:o,errorData:this._errorData}:null},isEmptyValue:function(e,t){return!e.length||!e.every(function(e){return e})},_getValidationMethod:function(e){return this._rulesMap[e]}});return n}),define("global_forms/Fields/FormField/FormFieldModel",["BackboneX","underscore.string","global_forms/Abstract/LinkValueHelper","global_forms/Inputs/Abstract/AbstractInputsCollection","global_forms/Validation/FormFieldValidator"],function(e,t,n,r,i){var s=e.Model.mix(n).extend({defaults:function(){return{value:[],error:"",errorData:null,valid:!0,startValue:null}},_initProperties:function(){this._super(),this._validationAllowed=!0,this._validationRun=!1,this._validationRules=[],this._submittable=this.get("submittable"),this._formattersMap={"default":"_defaultFormatter"}},initialize:function(){this._super(),this.initInputs()},updateInitialValue:function(){return this._updateValue({silent:!0,validate:!1}),this.set("startValue",this.value()),this},initInputs:function(){this._inputs=new r},addInput:function(e){return this._inputs.add(e),e.on("change:value",this._onChangeInputValue,this),this},_onChangeInputValue:function(){this._updateValue()},getType:function(){return this.get("type")},set:function(e,t,n){if(e==null)return this;var r=e==="value";return n=n||{},typeof e=="object"&&(t=t||n,n=t,typeof e.value!="undefined"&&(r=!0)),n.validate===undefined&&r&&(n.validate=!0),this._super(e,t,n)},validate:function(e){this._validationAllowed&&!this._validationRun&&(e=e||{},this._validationRun=!0,this._updateValidationStatus(e.value),this._validationRun=!1)},isValid:function(){return!this._validationAllowed||this.get("valid")},isEmpty:function(){return this._validator.isEmptyValue(this.value(),this)},isValidationAllowed:function(){return this._validationAllowed},toggleValidation:function(e){return this._validationAllowed=e,this.validate(),this.trigger("change:validationAllowed",this,this._validationAllowed),this},isSubmittable:function(){return this._submittable},toggleSubmittability:function(e){return this._submittable=e,this},_updateValidationStatus:function(e){var t=this._checkValue(e);this.setValidationStatus(!t,t)},_checkValue:function(e){return e===undefined&&(e=this.get("value")),this._validator.check(this._validationRules,this,e)},setValidationStatus:function(e,t){if(!t||typeof t=="string")t={rule:t,errorData:null};return this.set({valid:!!e,error:e?"":t.rule,errorData:t.errorData}),this},value:function(e){return e===undefined?this.get("value"):(t.isArray(e)||(e=this._convertValueToArray(arguments)),this.eachInput(function(t,n){t.value(e[n])}),this)},_convertValueToArray:function(e){return t.toArray(e)},_updateValue:function(e){this.set({value:this._getInputValues()},e)},_getInputValues:function(){return this._inputs.map(function(e){return e.value()})},_arrayValueToString:function(e){return e.join("")},_defaultFormatter:function(e){return this._arrayValueToString(e)},_getFormatter:function(e){return this[this._formattersMap[e]]},getStringValue:function(e){e=e||"default",typeof e=="string"&&(e=this._getFormatter(e));if(!e)throw new Error("There is no formatter "+e);return e.call(this,this.get("value"))},getIntValue:function(){return parseInt(this.getFloatValue(),10)},getFloatValue:function(){return t.toNumber(this.getStringValue())},getPostValue:function(){return this.getStringValue()},getBooleanValue:function(){return!!this.value()[0]},waitForChanges:function(e){this._originValidate||(this._originValidate=this.validate);var n=this.value();return this.validate=function(r){return!this._validationRun&&t.isEqual(r.value,n)?(this._validationRun=!0,this.setValidationStatus(!1,e),this._validationRun=!1,e):this._originValidate(r)},this},clearValue:function(){return this.eachInput(function(e){e.clearValue()}),this},resetValue:function(){return this.eachInput(function(e){e.resetValue()}),this},isEqualsToInitial:function(){return t.isEqual(this.value(),this.get("startValue"))},addRelationTo:function(e,t,n){typeof t=="function"&&(n=t,t="value"),t||(t="value");var r=function(e,t){n.call(this,t,e)};return n.__relationCallback=r,this.listenTo(e,"change:"+t,r),n.call(this,e.get(t),e),this},removeRelation:function(e,t,n){return typeof t=="function"&&(t="value",n=t),t||(t="value"),this.stopListening(e,"change:"+t,n.__relationCallback),this},getFirstInput:function(){return this._inputs.first()},getInputByNumber:function(e){return this._inputs.at(e)||null},eachInput:function(e,t){return this._inputs.each(e,t),this},_validator:new i,addValidationRule:function(e){return this.hasValidationRule(e)||(this._validationRules.push(e),this.validate()),this},addValidationRules:function(e){return this._validationRules=t.union(this._validationRules,e),this.validate(),this},removeValidationRules:function(){return this._validationRules=[],this.validate(),this},removeValidationRule:function(e){if(!this.hasValidationRule(e))return this;var t=this._validationRules;return t.splice(t.indexOf(e),1),this.validate(),this},hasValidationRule:function(e){return this._validationRules.indexOf(e)>-1}},{getValidator:function(){return this.prototype._validator}});return s}),define("global_forms/Fields/FormField/FormFieldsCollection",["BackboneX","underscore","jquery","./FormFieldModel"],function(e,t,n,r){var i=e.Collection.extend({model:r,form:null,serialize:function(e){var t=this.filter(e||function(e){return e.isSubmittable()});return t.reduce(function(e,t){return e[t.get("name")]=t.getPostValue(),e},{})}});return i}),define("global_forms/Validation/TextInputFieldValidator",["global_forms/Validation/FormFieldValidator"],function(e){var t=e.extend({_generators:function(){return[{reg:/^lte(\d+)$/,fn:function(e,t){return e.join("").length<=parseFloat(t[1])}},{reg:/^gte(\d+)$/,fn:function(e,t){return e.join("").length>=parseFloat(t[1])}},{reg:/^eq(\d+)$/,fn:function(e,t){return e.join("").length===parseFloat(t[1])}}]},_generateValidationMethod:function(e){var t={},n=this._generators().some(function(n){var r=n.reg.exec(e);return r?(t.matchers=r,t.fn=n.fn,!0):!1});n&&this.addRule(e,function(e){return t.fn(e,t.matchers)})},_getValidationMethod:function(e){var t=this._super(e);return typeof t!="function"&&(this._generateValidationMethod(e),t=this._super(e)),t}});return t}),define("global_forms/Fields/Text/TextInputFieldModel",["underscore","../FormField/FormFieldModel","global_forms/Validation/TextInputFieldValidator"],function(e,t,n){var r=t.extend({_validator:new n,value:function(t){return t===undefined?e(this.get("value")).map(function(e){return e.toString().trim()}):this._super(t)},followAndTranslit:function(e){var t=this;return e.bind("change:value",function(){t.value([e.getStringValue().translit()])}),e.bind("success",function(){t.value([e.getStringValue().translit()])}),e.bind("error",function(){e.get("error")==="not-empty"&&t.clearValue()}),this},_getInputValues:function(){var e=[];return this.eachInput(function(t){var n=t.value();if(n===undefined||n===null)n="";e.push(n.toString().trim())}),e}});return r}),define("global_forms/Validation/TextCurrencyFieldValidator",["underscore.string","./TextInputFieldValidator"],function(e,t){var n=t.extend({_getRulesMap:function(){return e({"twelve-digits-overflow":this._checkTwelveDigitsOverflow}).defaults(this._super())},_checkTwelveDigitsOverflow:function(t){var n=e.toNumber(t[0]);return!isNaN(n)&&n>-1e12&&n<1e12},_generators:function(){return this._super().concat([{reg:/^numgt([\d.]+)$/,fn:function(e,t){return parseFloat(e.join(""))>parseFloat(t[1])}},{reg:/^numlt([\d.]+)$/,fn:function(e,t){return parseFloat(e.join(""))<parseFloat(t[1])}},{reg:/^numgte([\d.]+)$/,fn:function(e,t){return parseFloat(e.join(""))>=parseFloat(t[1])}},{reg:/^numlte([\d.]+)$/,fn:function(e,t){return parseFloat(e.join(""))<=parseFloat(t[1])}}])}});return n}),define("global_forms/Fields/TextCurrency/TextCurrencyFieldModel",["../Text/TextInputFieldModel","global_forms/Validation/TextCurrencyFieldValidator"],function(e,t){var n=e.extend({_validator:new t,initialize:function(){this._super(),this.addValidationRule("twelve-digits-overflow")}});return n}),define("global_forms/Rules/rules",["underscore.string","global_forms/Fields/Text/TextInputFieldModel","global_forms/Fields/TextCurrency/TextCurrencyFieldModel"],function(e,t,n){function l(e,t){return e.join("").length<=t}var r=t.getValidator(),i=n.getValidator(),s=function(t){var n=e.toNumber(t);return!isNaN(n)&&n>0},o=function(t){var n=e.toNumber(t);return!isNaN(n)&&n>=0},u=function(t){var n=e.toNumber(t);return!isNaN(n)&&n>=-214783648&&n<=2147483647};r.addRule("positive-number",s),r.addRule("not-negative-number",o),r.addRule("int32",u),i.addRule("positive-number",s),i.addRule("not-negative-number",o),i.addRule("int32",u);var a=function(e){return/^\d{4}$/.test(e.join(""))},f=function(e){return/^\d{6}$/.test(e.join(""))};r.addRule("captcha",a),r.addRule("confirmationCode",a),r.addRule("confirmationCodeLong",f),r.addRule("extendedCaptcha",function(e){return/^[a-zA-Z0-9]{4,5}$/.test(e.join(""))}),r.addRule("email",function(e){return/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/i.test(e.join(""))}),r.addRule("login",function(e){return/^[a-zA-Z0-9!#$%&'*+\-\/=?^_`{|}~(),\.:;<>@\[\\\]]+$/.test(e.join(""))}),r.addRule("password",function(e){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9_\-.,\^!@#\$%&*();"\'+=\[\]:\/\\\?|`\~\{\}]{8,}$/.test(e.join(""))}),r.addRule("passwords-not-match",function(e,t){var n=t.collection.form.getField("password").getStringValue();return e[0]===n}),r.addRule("phone",function(e){return/^\+[1-9][0-9]{6,19}$/.test(e.join(""))}),r.addRule("maxLength50",function(e){return l(e,50)})}),define("global_forms/Form/FormModel",["BackboneX","underscore","global_forms/Fields/FormField/FormFieldsCollection","global_forms/Rules/rules"],function(e,t,n){var r=e.Model.extend({defaults:function(){return{name:""}},_initProperties:function(){this._super(),this._NO_VALIDATION={validation:[]}},initialize:function(){this._super(),this.formFields=new n,this.formFields.form=this,this._state=null,this._fieldsConfig=this._getFieldsConfiguration()},_initFieldValidation:function(e){var n=this._getFieldsValidationRules()[e.get("name")];if(!n)return;if(t.isArray(n)){e.addValidationRules(n);return}if(typeof n=="string"){e.addValidationRule(n);return}throw new TypeError("Field "+e.get("name")+" has wrong declared rules. Expected Array or String, got "+n+".")},_getFieldsValidationRules:function(){return{}},_getFieldsConfiguration:function(){return this._fieldsConfig||{}},setFieldsConfiguration:function(e){this._fieldsConfig=t.defaults(e,this._fieldsConfig)},addField:function(e){return e.set("formName",this.get("name")),this.formFields.add(e),this._initFieldValidation(e),this._initField(e),this},_initField:function(e){var n=this._fieldsConfig[e.get("name")]||{};n=t.defaults(n,this._fieldsConfig["*"]),typeof n.validation=="boolean"&&e.toggleValidation(n.validation),typeof n.submittable=="boolean"&&e.toggleSubmittability(n.submittable);if(e.isValidationAllowed()){var r=n.validation;t.isArray(r)&&e.addValidationRules(r),typeof r=="string"&&e.addValidationRule(r)}t(n.events).each(function(t,n){e.on(n,t,this)},this),typeof n.initialize=="function"&&n.initialize.call(this,e)},removeField:function(e){var t=this.getField(e);return this.formFields.remove(t),this.resetFieldsCache(),this},getField:t.method.memoize(function(e){return this.formFields.find(function(t){return t.get("name")===e})||null}),eachField:function(e,t){return this.formFields.each(e,t),this},resetFieldsCache:function(){this._reWrapMethod("getField")},getFieldsHash:function(){var e={};return this.formFields.each(function(t){e[t.get("name")]=t}),e},isValid:function(){return this.formFields.all(function(e){return e.isValid()})},reset:function(){return this.formFields.each(function(e){e.resetValue()}),this.trigger("reset"),this},hasChangedFields:function(){return this.formFields.some(function(e){return!e.isEqualsToInitial()})},saveState:function(){return this._state=this.formFields.map(function(e){return e.value()}),this},getState:function(){return this.saveState(),this._state},clearState:function(){return this._state=null,this},restoreState:function(){return t(this._state).each(function(e,t){this.formFields.at(t).value(e)},this),this},setState:function(e){return this._state=e,this.restoreState()}});return r}),define("global_forms/Abstract/FormFieldStatusCondition",["underscore"],function(e){var t=function(t){this._status={error:!1,success:!1},this._hint={error:!1,success:!1},t=t||{},t.status&&(t.status===!0?this.allowDisplayStatusFor():e(t.status).each(function(e,t){this.allowDisplayStatusFor(t)},this)),t.hint&&(t.hint===!0?this.allowDisplayHintFor():e(t.hint).each(function(e,t){this.allowDisplayHintFor(t)},this))};return e(t.prototype).extend({hasState:function(e){return/^(success|error)$/.test(e)},allowDisplayStatusFor:function(e){e?this._status[e]=!0:(this._status.error=!0,this._status.success=!0)},allowDisplayHintFor:function(e){e?this._hint[e]=!0:(this._hint.error=!0,this._hint.success=!0)},needShowStatusOn:function(e){return!!this._status[e]},needShowHintOn:function(e){return!!this._hint[e]}}),t}),define("mobile/FormClasses/Hints/hintsHolder",["jquery","underscore.string","BackboneX"],function(e,t,n){var r=n.View.extend({_classes:function(){return t.defaults({textHolders:"errors__text"},this._super())},_initProperties:function(){this._super(),this._textHolders={},this._textHoldersCache={},this._defaultTextHolder="default"},initialize:function(){this._super(),this._initTextHolders()},_nameRegExp:/errors__text_type_([\w-]+)/,_initTextHolders:function(){t.each(this._elem("textHolders"),function(t){var n=e(t),r=n.attr("class").match(this._nameRegExp);if(!r){console.log("Text holder name does not found!");return}this._textHolders[r[1]]=n.html()},this)},get:function(e,n){var r=this._textHolders[e];r||(e=this._defaultTextHolder,r=this._textHolders[e]);if(n&&n.length){var i=t.clone(n);return i.unshift(r),r=this._textHoldersCache[e]=t.sprintf.apply(t,i),r}return this._textHoldersCache[e]||r}});return new r({el:e(".errors")})}),define("mobile/FormClasses/Abstract/FormFieldStatus",["underscore","BackboneX","global_forms/Abstract/FormFieldStatusCondition","mobile/FormClasses/Hints/hintsHolder"],function(e,t,n,r){var i=t.View.extend({_classes:function(){return e.defaults({error:"field_state_error",checked:"field_state_checked"},this._super())},_selectors:function(){return e.defaults({status:".field__status"},this._super())},initialize:function(){this._super(),this.reset(),this._initHandlers()},_initProperties:function(){this._super(),this._fieldView=this.options.field,this._fieldModel=this._fieldView.model,this._conditions=null,this._ignoredValidationRules=null,this._checkConditionOptions={status:{error:!0}},this._checkFirstFieldConditionOptions={status:!0,hint:{error:!0}},this._viewEvents=this.options.viewEvents||"focus blur",this._modelEvents=this.options.modelEvents||""},_initHandlers:function(){this._viewEvents.split(" ").forEach(function(e){this._fieldView.on(e,this.show.bind(this,e))},this),this._modelEvents.split(" ").forEach(function(e){this._fieldModel.on(e,function(){this.show(e),this._fieldView.isFocused()||this.show(e+":inactive")},this)},this),this._fieldModel.on("change:valid",function(e,t){var n=t?"success":"error";this.show(n),this._fieldView.isFocused()||this.show(n+":inactive")},this),this._fieldModel.on("change:errorData",this._onFieldErrorDataChange,this)},showStatusOn:function(e,t){return this._eachConditions(e,function(e){e.allowDisplayStatusFor(t)}),this},showHintOn:function(e,t){return this._eachConditions(e,function(e){e.allowDisplayHintFor(t)}),this},_eachConditions:function(e,t){var r=this._conditions;e.split(/\s+/).forEach(function(e){r[e]||(r[e]=new n),t(r[e])})},ignore:function(t){e.isArray(t)||(t=e.toArray(arguments));var n=this._ignoredValidationRules;return t.forEach(function(e){n[e]=!0}),this},stopIgnoring:function(t){if(!t)return this._ignoredValidationRules={},this;e.isArray(t)||(t=e.toArray(arguments));var n=this._ignoredValidationRules;return t.forEach(function(e){delete n[e]}),this},show:function(e){var t;if(e===undefined)t=this._conditions["default"];else{t=this._conditions[e];if(!t)return this}if(!this._fieldModel.isValid()){var n=this._fieldModel.get("error");if(this._ignoredValidationRules[n])return this.hide(),this;this._removeClass("checked"),t.needShowStatusOn("error")&&(this._elem("status").html(r.get(n)),this._addClass("error"))}else this._removeClass("error"),t.needShowStatusOn("success")&&this._addClass("checked");return this},_onFieldErrorDataChange:function(e,t){t&&t.hint&&this._elem("status").html(r.get(e.get("error"),t.hint))},hide:function(){return this._removeClass("error"),this._removeClass("checked"),this},reset:function(){return this._conditions={},this.setCondition("default").setCondition("check",this._checkConditionOptions).setCondition("checkFirstField",this._checkFirstFieldConditionOptions),this._ignoredValidationRules={},this},setCondition:function(e,t){return t instanceof n||(t=new n(t)),this._conditions[e]=t,this}});return i}),define("global/elements/DragAndDrop/WithDocumentTapHandling",["underscore","vendors/Backbone/Backbone.MethodUtils","vendors/hand"],function(e){var t={_initProperties:function(){this._super(),this._startScrollX=0,this._startScrollY=0,this._minMove=3,this._EVENTS_NAMESPACE=".DocumentTapHandler",this._handling=!1},_startHandlingDocumentTap:function(){this._handling||(this._handling=!0,this._$document.on("pointerdown"+this._EVENTS_NAMESPACE,this._onDocumentPointerDown))},_stopHandlingDocumentTap:function(){this._handling=!1,this._$document.off(this._EVENTS_NAMESPACE)},_onDocumentTap:function(e){this._containsEventTarget(e)||this._onTapOutsideElement(e)},_onTapOutsideElement:function(e){},_onDocumentPointerDown:e.method.bind(function(e){if(this._isMouse(e))return;this._$document.on("pointerup"+this._EVENTS_NAMESPACE,this._onDocumentPointerUp),this._startScrollX=this._$body.scrollLeft(),this._startScrollY=this._$body.scrollTop()}),_onDocumentPointerUp:e.method.bind(function(e){if(this._isMouse(e))return;this._$document.off("pointerup"+this._EVENTS_NAMESPACE);var t=this._$body.scrollLeft()-this._startScrollX,n=this._$body.scrollTop()-this._startScrollY,r=Math.sqrt(t*t+n*n);r<this._minMove&&this._onDocumentTap(e)})};return t}),define("vendors/jquery/plugins/jquery.focusable",["jquery"],function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+s+"]")[0],!!o&&n(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e}),define("global/elements/AbleToFocus",["underscore","vendors/Backbone/Mixin","global/elements/DragAndDrop/WithDocumentTapHandling","vendors/Backbone/Backbone.MethodUtils","vendors/jquery/plugins/jquery.focusable"],function(e,t,n){var r=new t({dependencies:[n]},{_selectors:function(){return e.defaults({excludedFocusableElements:""},this._super())},events:function(){var e=this._super();return e.focusin=this._onFocusEventInside,e},_initProperties:function(){this._super(),this._focused=!1,this._boundBlurEventInside=this._onBlurEventInside.bind(this),this._blurTimeout=null},initialize:function(){this._super(),this._handleFocus()},_handleFocus:function(){this.containsActiveElement()&&this._onFocus()},containsActiveElement:function(){var e=document.activeElement;return this.el===e||this.$el.has(e).length&&!this._isExcludedFocusableElement(e)},_onTapOutsideElement:function(e){this._onBlurEventInside(e),this.el.blur()},_onFocusEventInside:function(e){if(this._isExcludedFocusableElement(e.target))return;if(this._focused){clearTimeout(this._blurTimeout);return}this._$document.on("focusin",{originEvent:e},this._onDocumentFocusAfterElFocus)},_onBlurEventInside:function(e){this._blurTimeout=setTimeout(this._deferredBlur.bind(this,e),0),this._$document.on("focusin",{originEvent:e},this._onDocumentFocusAfterElBlur)},_onDocumentFocusAfterElFocus:e.method.bind(function(e){this._$document.off("focusin",this._onDocumentFocusAfterElFocus),this._onFocus(),this.trigger("focus",this,e.data.originEvent)}),_onDocumentFocusAfterElBlur:e.method.bind(function(e){this._$document.off("focusin",this._onDocumentFocusAfterElBlur),this.containsActiveElement()||(clearTimeout(this._blurTimeout),this._onBlur(e.data.originEvent))}),_deferredBlur:function(e){if(this.containsActiveElement())return;this._$document.off("focusin",this._onDocumentFocusAfterElBlur),this._onBlur(e)},_isExcludedFocusableElement:function(e){return this._hasSelector("excludedFocusableElements")&&this._elem("excludedFocusableElements").is(e)},_onFocus:function(){this._focused=!0,this._startHandlingDocumentTap(),this.$el.on("focusout",this._boundBlurEventInside)},_onBlur:function(e){this._focused=!1,this._stopHandlingDocumentTap(),this.$el.off("focusout",this._boundBlurEventInside),this.trigger("blur",this,e)},isFocused:function(){return this._focused},focus:function(){return this.$el.focus(),this}});return r}),define("global_forms/Inputs/Abstract/AbstractInputView",["BackboneX","underscore","jquery","global/elements/AbleToFocus","./AbstractInputModel"],function(e,t,n,r,i){var s=e.View.mix(r).extend({_ModelConstructor:i,model:null,_disabledAttribute:"disabled",_classes:function(){return t.defaults({focus:"focus",disabled:"disabled"},this._super())},_selectors:function(){return t.defaults({input:"input"},this._super())},_initProperties:function(){this._super(),this._disabled=!1},initialize:function(){this._super(),this.$input=this.getInput(),this._handleModel(),this._setInitialValue(),this._setInitialDisabled()},value:function(e){return e!==undefined?(this.model.value(e),this):this.model.value()},_handleModel:function(){var e=this.options.modelOptions||{};this.model=this.model||new this._ModelConstructor(e),this.model.on("change:value",this._onChangeModelValue,this)},_onChangeModelValue:function(e,t){this._setValue(t)},_tryToChangeValueByUser:function(){var e=this.model.value();this._setValueToModel();var t=this.model.value(),n=e!==t;return n&&this._onChangeValueByUser(t),n},_onChangeValueByUser:function(e){this.trigger("change:value:byUser",this.model,e)},_setInitialValue:function(){this._setValueToModel(),this.model.updateInitialValue()},_setInitialDisabled:function(){this.$input.prop(this._disabledAttribute)&&this.disable()},_setValue:function(e){var t=this._prepareValue(e);if(this.$input.val()===t)return;this.$input.val(t),this.model.value(e)},_getValue:function(){return this._parseValue(this.$input.val())},_prepareValue:function(e){return e},_parseValue:function(e){return e},keyEvent:function(e,t){switch(t.keyCode){case 13:this.trigger(e+":enter",t);break;default:this.trigger(e,t)}},_getInputSelector:function(){var e=this._selector("input");return this.$el.is(e)?"":e},_getDisablableElement:function(){return this.$el},getInput:function(){return this.$el.is(this._selector("input"))?this.$el:this._elem("input")},_setValueToModel:function(){this.model.value(this._getValue())},_onFocusEventInside:function(e){this.isDisabled()||this._super(e)},_onFocus:function(){this._super(),this._setFocusClass()},_setFocusClass:function(){this.$el.hasClass(this._class("focus"))||this.$el.addClass(this._class("focus"))},_onBlur:function(e){this._removeFocusClass(),this._super(e)},_removeFocusClass:function(){this.$el.removeClass(this._class("focus"))},focus:function(){var e=this.$input;e.focus();if(e.length){var t=e[0].getBoundingClientRect();(t.top<0||t.bottom>this._$window.height())&&n.scrollTo(e)}return this},disable:function(){return this._addClass("disabled",this._getDisablableElement()),this._disabledAttribute&&this.$input.prop(this._disabledAttribute,!0),this._adjustTabindexForState("disabled"),this._disabled=!0,this},enable:function(){return this._removeClass("disabled",this._getDisablableElement()),this._disabledAttribute&&this.$input.prop(this._disabledAttribute,!1),this._adjustTabindexForState("enabled"),this._disabled=!1,this},toggleEnabled:function(e){this[e?"enable":"disable"]()},_adjustTabindexForState:function(e){var t=e==="enabled"?0:-1;this.$input.attr("tabindex",t)},isVisible:function(){return this.$el.is(":visible")},isDisabled:function(){return this._disabled}});return s}),define("mobile/FormClasses/Inputs/Abstract/AbstractInputView",["global_forms/Inputs/Abstract/AbstractInputView","global/elements/ServiceManager/WithServiceManager"],function(e,t){return e.mix(t).extend({focus:function(){var e=this.$input;e.focus();if(e.length){var t=e[0].getBoundingClientRect();(t.top<0||t.bottom>this._$window.height())&&this._getService("viewport").scrollTo(e)}return this}})}),window.Modernizr=function(e,t,n){function N(e){f.cssText=e}function C(e,t){return N(p.join(e+";")+(t||""))}function k(e,t){return typeof e===t}function L(e,t){return!!~(""+e).indexOf(t)}function A(e,t){for(var r in e){var i=e[r];if(!L(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function O(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:k(s,"function")?s.bind(r||t):s}return!1}function M(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return k(t,"string")||k(t,"undefined")?A(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),O(i,t,n))}function _(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)b[n[r]]=n[r]in l;return b.list&&(b.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),b}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),y[e[r]]=!!i;return y}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.8.3",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={},y={},b={},w=[],E=w.slice,S,x={}.hasOwnProperty,T;!k(x,"undefined")&&!k(x.call,"undefined")?T=function(e,t){return x.call(e,t)}:T=function(e,t){return t in e&&k(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=E.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(E.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(E.call(arguments)))};return i}),g.flexbox=function(){return M("flexWrap")},g.flexboxlegacy=function(){return M("boxDirection")},g.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},g.cssanimations=function(){return M("animationName")},g.csstransitions=function(){return M("transition")},g.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},g.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n};for(var D in g)T(g,D)&&(S=D.toLowerCase(),i[S]=g[D](),w.push((i[S]?"":"no-")+S));return i.input||_(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)T(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,typeof s!="undefined"&&s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},N(""),a=l=null,i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.testProp=function(e){return A([e])},i.testAllProps=M,o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+w.join(" "):""),i}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==d.call(e)}function i(e){return"string"==typeof e}function s(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function u(){var e=v.shift();m=1,e?e.t?h(function(){("c"==e.t?k.injectCss:k.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),u()):m=0}function a(e,n,r,i,s,a,f){function l(t){if(!d&&o(c.readyState)&&(w.r=d=1,!m&&u(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){b.removeChild(c)},50);for(var r in T[n])T[n].hasOwnProperty(r)&&T[n][r].onload()}}var f=f||k.errorTimeout,c=t.createElement(e),d=0,g=0,w={t:r,s:n,e:s,a:a,x:f};1===T[n]&&(g=1,T[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=e&&(g||2===T[n]?(b.insertBefore(c,y?null:p),h(l,f)):T[n].push(c))}function f(e,t,n,r,s){return m=0,t=t||"j",i(e)?a("c"==t?E:w,e,t,this.i++,n,r,s):(v.splice(this.i++,0,e),1==v.length&&u()),this}function l(){var e=k;return e.loader={load:f,i:0},e}var c=t.documentElement,h=e.setTimeout,p=t.getElementsByTagName("script")[0],d={}.toString,v=[],m=0,g="MozAppearance"in c.style,y=g&&!!t.createRange().compareNode,b=y?c:p.parentNode,c=e.opera&&"[object Opera]"==d.call(e.opera),c=!!t.attachEvent&&!c,w=g?"object":c?"script":"img",E=c?"script":w,S=Array.isArray||function(e){return"[object Array]"==d.call(e)},x=[],T={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}},C,k;k=function(e){function t(e){var e=e.split("!"),t=x.length,n=e.pop(),r=e.length,n={url:n,origUrl:n,prefixes:e},i,s,o;for(s=0;s<r;s++)o=e[s].split("="),(i=N[o.shift()])&&(n=i(n,o));for(s=0;s<t;s++)n=x[s](n);return n}function o(e,i,s,o,u){var a=t(e),f=a.autoCallback;a.url.split(".").pop().split("?").shift(),a.bypass||(i&&(i=r(i)?i:i[e]||i[o]||i[e.split("/").pop().split("?")[0]]),a.instead?a.instead(e,i,s,o,u):(T[a.url]?a.noexec=!0:T[a.url]=1,s.load(a.url,a.forceCSS||!a.forceJS&&"css"==a.url.split(".").pop().split("?").shift()?"c":n,a.noexec,a.attrs,a.timeout),(r(i)||r(f))&&s.load(function(){l(),i&&i(a.origUrl,u,o),f&&f(a.origUrl,u,o),T[a.url]=2})))}function u(e,t){function n(e,n){if(e){if(i(e))n||(f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}),o(e,f,t,0,u);else if(Object(e)===e)for(p in h=function(){var t=0,n;for(n in e)e.hasOwnProperty(n)&&t++;return t}(),e)e.hasOwnProperty(p)&&(!n&&!--h&&(r(f)?f=function(){var e=[].slice.call(arguments);l.apply(this,e),c()}:f[p]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),c()}}(l[p])),o(e[p],f,t,p,u))}else!n&&c()}var u=!!e.test,a=e.load||e.both,f=e.callback||s,l=f,c=e.complete||s,h,p;n(u?e.yep:e.nope,!!a),a&&n(a)}var a,f,c=this.yepnope.loader;if(i(e))o(e,0,c,0);else if(S(e))for(a=0;a<e.length;a++)f=e[a],i(f)?o(f,0,c,0):S(f)?k(f):Object(f)===f&&u(f,c);else Object(e)===e&&u(e,c)},k.addPrefix=function(e,t){N[e]=t},k.addFilter=function(e){x.push(e)},k.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",C=function(){t.removeEventListener("DOMContentLoaded",C,0),t.readyState="complete"},0)),e.yepnope=l(),e.yepnope.executeStack=u,e.yepnope.injectJs=function(e,n,r,i,a,f){var l=t.createElement("script"),c,d,i=i||k.errorTimeout;l.src=e;for(d in r)l.setAttribute(d,r[d]);n=f?u:n||s,l.onreadystatechange=l.onload=function(){!c&&o(l.readyState)&&(c=1,n(),l.onload=l.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),a?l.onload():p.parentNode.insertBefore(l,p)},e.yepnope.injectCss=function(e,n,r,i,o,a){var i=t.createElement("link"),f,n=a?u:n||s;i.href=e,i.rel="stylesheet",i.type="text/css";for(f in r)i.setAttribute(f,r[f]);o||(p.parentNode.insertBefore(i,p),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("csspositionsticky",function(){var e="position:",t="sticky",n=document.createElement("modernizr"),r=n.style;return r.cssText=e+Modernizr._prefixes.join(t+";"+e).slice(0,-e.length),r.position.indexOf(t)!==-1}),Modernizr.addTest("filereader",function(){return!!(window.File&&window.FileList&&window.FileReader)}),define("Modernizr",function(e){return function(){var t,n;return t||e.Modernizr}}(this)),function(e){function r(e){e=e.replace(/left|top/g,"0px"),e=e.replace(/right|bottom/g,"100%"),e=e.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var t=e.match(/(-?[0-9\.]+)(px|%|em|pt)\s(-?[0-9\.]+)(px|%|em|pt)/);return[parseFloat(t[1]),t[2],parseFloat(t[3]),t[4]]}if(!document.defaultView||!document.defaultView.getComputedStyle){var t=e.curCSS;e.curCSS=function(e,n,r){n==="background-position"&&(n="backgroundPosition");if(n!=="backgroundPosition"||!e.currentStyle||e.currentStyle[n])return t.apply(this,arguments);var i=e.style;return!r&&i&&i[n]?i[n]:t(e,"backgroundPositionX",r)+" "+t(e,"backgroundPositionY",r)}}var n=e.fn.animate;e.fn.animate=function(e){return"background-position"in e&&(e.backgroundPosition=e["background-position"],delete e["background-position"]),"backgroundPosition"in e&&(e.backgroundPosition="("+e.backgroundPosition),n.apply(this,arguments)},e.fx.step.backgroundPosition=function(t){if(!t.bgPosReady){var n=e.curCSS(t.elem,"backgroundPosition");n||(n="0px 0px"),n=r(n),t.start=[n[0],n[2]];var i=r(t.end);t.end=[i[0],i[2]],t.unit=[i[1],i[3]],t.bgPosReady=!0}var s=[];s[0]=(t.end[0]-t.start[0])*t.pos+t.start[0]+t.unit[0],s[1]=(t.end[1]-t.start[1])*t.pos+t.start[1]+t.unit[1],t.elem.style.backgroundPosition=s[0]+" "+s[1]}}(jQuery),define("vendors/jquery/plugins/jquery.backgroundPosition",function(){}),define("global_forms/Mixins/LoadingInputView",["vendors/Backbone/Mixin","underscore","Modernizr","vendors/jquery/plugins/jquery.backgroundPosition"],function(e,t,n){var r=new e({_classes:function(){return t.defaults({loading:"form-el_loading"},this._super())},disable:function(){return this._stopLoading(),this._super()},enable:function(){return this._stopLoading(),this._super()},load:function(){return this._addClass("loading"),this._loading=!0,this},_stopLoading:function(){this._removeClass("loading"),this._loading=!1},isDisabled:function(){return this._super()||this._loading}});if(n.cssanimations&&n.csstransitions)return r;var i=new e({dependencies:[r]},{_classes:function(){return t.defaults({loaderDeco:"form-el__loading-deco"},this._super())},_loadingBackgroundStartPosition:"-20px 0px",_loadingBackgroundAnimationTime:500,_animateLoader:function(){var e=this;this._elem("loaderDeco").css("backgroundPosition",this._loadingBackgroundStartPosition).animate({backgroundPosition:"0px 0px"},this._loadingBackgroundAnimationTime,"linear",function(){e._animateLoader()})},_stopAnimateLoader:function(){this._elem("loaderDeco").stop(!0)},load:function(){return this._super(),this._animateLoader(),this},_stopLoading:function(){this._super(),this._stopAnimateLoader()}});return i}),define("global_forms/Inputs/Text/TextInputModel",["global_forms/Inputs/Abstract/AbstractInputModel"],function(e){var t=e.extend();return t}),define("global_forms/Inputs/Text/TextInputView",["underscore","global_forms/Inputs/Abstract/AbstractInputView","global_forms/Mixins/LoadingInputView","global_forms/Inputs/Text/TextInputModel"],function(e,t,n,r){var i=t.mix(n).extend({_ModelConstructor:r,_disabledAttribute:"readonly",_classes:function(){return e.defaults({clear:"input__clear",clearActive:"input__clear_active_yes",loading:"input_state_loading",loaderDeco:"input__loader",focus:"input_focus_yes",disabled:"input_disabled_yes"},this._super())},_selectors:function(){return e.defaults({eye:".input__eye"},this._super())},events:function(){var e=this._super(),t=this._getInputSelector();return t&&(t=" "+t),e["change"+t]=this._onChange,e["cut"+t]=this._onCut,e["input"+t]=this._onInput,e["keyup"+t]=this._onKeyup,e["keydown"+t]=this._onKeydown,e["keypress"+t]=this._onKeypress,e["click "+this._selector("clear")]=this._onClearClick,e["click "+this._selector("eye")]=this._onEyeClick,e},_initProperties:function(){this._super(),this._allowedCharsRegExp=null},initialize:function(){this._super();var e=this._data.allowedChars;this._allowedCharsRegExp=e?new RegExp(e):null,this._elem("clear").length&&this.model.link(this._toggleClearActive,this)},_onChange:function(e){this._tryToChangeValueByUser()},_onCut:function(){this._tryToChangeValueByUser()},_onBlur:function(e){this._super(e),this._tryToChangeValueByUser()},_onKeyup:function(e){this.isDisabled()||(this._isNavigationKey(e)||this._tryToChangeValueByUser(),this.keyEvent("keyup",e))},_onKeydown:function(e){this.isDisabled()||this.keyEvent("keydown",e)},_onKeypress:function(e){var t=e.which;if(this.isDisabled()||!this._allowedCharsRegExp||!t||this._isMetaKey(e))return;var n=String.fromCharCode(t);this._isCharAllowed(n)||e.preventDefault()},_onInput:function(e){if(this._allowedCharsRegExp){var t=this._getValue(),n=Array.prototype.filter.call(t,this._isCharAllowed,this).join("");n!==t&&this.$input.val(n)}this._tryToChangeValueByUser()},_isCharAllowed:function(e){return this._allowedCharsRegExp?this._allowedCharsRegExp.test(e):!0},_toggleClearActive:function(){this._elem("clear").toggleClass(this._class("clearActive"),this.model.value()!=="")},_onClearClick:function(){this.model.clearValue(),this.$input.focus()},_onEyeClick:function(e){e.preventDefault(),this.$input[0].type==="password"?this.$input[0].type="text":this.$input[0].type="password"}});return i}),define("mobile/FormClasses/Inputs/Textarea/TextareaInputView",["underscore","global_forms/Inputs/Text/TextInputView"],function(e,t){var n=t.extend({_classes:function(){return e.defaults({focus:"textarea_focus_yes",disabled:"textarea_disabled_yes"},this._super())},_selectors:function(){return e.defaults({input:"textarea"},this._super())}});return n}),define("global_forms/Inputs/BaseSelect/WithOptions",["vendors/Backbone/Mixin"],function(e){var t=new e({_updateModelData:function(){this._fillData(),this.model.setData(this._data.data)},_fillData:function(){this._data.data||(this._data.data={})}});return t}),define("global_forms/Inputs/BaseSelect/WithAllowedValues",["underscore","vendors/Backbone/Mixin"],function(e,t){var n=new t({defaults:function(){return e({defaultValue:"",allowedValues:[]}).defaults(this._super())},_initProperties:function(){this._super(),this._data={},this._allowedValuesLookup={},this._forceSelection=!0},value:function(e){return e!==undefined&&this._forceSelection&&!this._allowedValuesLookup[e]?this:this._super(e)},setData:function(t){this._data=t,this.trigger("change:data"),this._possibleValues=e.keys(this._data),this.allowValues()},getDataForCurrentValue:function(e){return this.getDataForValue(this.value(),e)},getDataForValue:function(e,t){var n=this._data[e]||{};return t===undefined?n||{}:n[t]||null},setDefaultValue:function(e){return e!==undefined&&this.set("defaultValue",e+""),this.value(this.get("defaultValue")),this},allowValues:function(t){var n;e.isArray(t)?n=t:typeof t=="object"?n=this._filterValuesByObject(t):typeof t=="function"?n=this._filterValuesByFunction(t):n=this._possibleValues;if(e.isEqual(n,this.get("allowedValues")))return this;this.trigger("allowedValues",n),this.set("allowedValues",n);if(!this._forceSelection)return this;var r=this.value();this._allowedValuesLookup=n.reduce(function(e,t){return e[t]=!0,e},{});if(this._allowedValuesLookup[r])return this;var i=this.get("defaultValue");return i&&this._allowedValuesLookup[i]?(this.value(i),this):n.length?(this.value(n[0]),this):(this.resetValue(),this)},_filterValuesByObject:function(e){var t=[];e:for(var n in this._data){if(!this._data.hasOwnProperty(n))continue;var r=this._data[n];for(var i in e){if(!e.hasOwnProperty(i))continue;if(e[i]!==r[i])continue e}t.push(n)}return t},_filterValuesByFunction:function(e){var t=[];for(var n in this._data){if(!this._data.hasOwnProperty(n))continue;e.call(this,n,this._data[n])&&t.push(n)}return t},key:function(t){if(t===undefined)return this.getDataForCurrentValue("key");var n=e(this.get("allowedValues")).find(function(e){var n=this._data[e]||{};if(n.key===t)return!0},this);return n!==undefined&&this.value(n),this},forEachDataValue:function(e,t,n){return typeof e=="function"&&(n=t,t=e,e=undefined),this.get("allowedValues").forEach(function(r){var i=this._data[r]||{};t.call(n,e===undefined?i:i[e]||"",r)},this),this}});return n}),define("global_forms/Inputs/BaseSelect/BaseSelectInputModel",["underscore","global_forms/Inputs/Abstract/AbstractInputModel","./WithAllowedValues"],function(e,t,n){var r=t.mix(n);return r}),define("global_forms/Inputs/BaseSelect/BaseSelectInputView",["global_forms/Inputs/Abstract/AbstractInputView","./WithOptions","./BaseSelectInputModel"],function(e,t,n){var r=e.mix(t).extend({_ModelConstructor:n});return r}),define("global_forms/Inputs/SimpleSelect/SimpleSelectInputView",["jquery","underscore","global_forms/Inputs/BaseSelect/BaseSelectInputView"],function(e,t,n){var r=n.extend({_classes:function(){return t.defaults({focus:"select_focus_yes",disabled:"select_disabled_yes"},this._super())},_selectors:function(){var e=".select__option",n=e+":not(.hidden)";return t.defaults({input:"select",option:e,optionValue:'option[value="%s"]',visibleOption:n,selectableOption:n+":not(:disabled)",optionsGroup:".select__group"},this._super())},events:function(){var e=this._super();return e["change "+this._selector("input")]=this._onChange,e},_initProperties:function(){this._super(),this._$startInput=null},_onChange:function(e){this._tryToChangeValueByUser()},_setInitialValue:function(){var e=this.$input.val();return this._updateModelData(),this.model.setDefaultValue(this._data["default"]),e!==""&&this.$input.val(e),this._super(),this},_fillData:function(){this._super();var n=this._data.data;this._elem("visibleOption").each(function(r,i){var s=e(i),o=s.val(),u=n[o];u||(u=n[o]={}),t(u).extend(s.data())});var r=this._elem("optionValue","");r.length&&(n[""]=n[""]||{})},_handleModel:function(){this._super(),this.model.on("allowedValues",this._filterValues,this)},_filterValues:function(e){this._$startInput||(this._$startInput=this.$input.clone(!0,!0));var n=this._$startInput.clone(!0,!0),r=this.$input.val();if(!t.isArray(e))this.$input.empty().append(n.children());else if(e.length){var i=n.find(this._selector("option"));i.each(function(t,n){e.indexOf(n.value)===-1&&i.eq(t).remove()}),this.$input.empty().append(n.children())}this.$input.val(r),this._checkEmptyGroups()},_checkEmptyGroups:function(){this._findElem("optionsGroup").each(function(t,n){var r=e(n);r.children().length||r.remove()})}});return r}),define("global_forms/Inputs/Select/WithOptionsDropdown",["jquery","underscore","vendors/Backbone/Mixin","../BaseSelect/WithOptions","global/elements/ServiceManager/WithServiceManager","vendors/Backbone/Backbone.MethodUtils"],function(e,t,n,r,i){var s=new n({dependencies:[r,i]},{_classes:function(){return t.defaults({focus:"select_focus_yes",disabled:"select_disabled_yes",firstOption:"option_first_yes"},this._super())},_selectors:function(){var e=".option",n=e+":not(.option_hidden_yes):not(.hidden)",r=n+":not(.option_disabled_yes)";return t.defaults({input:".select__value",title:".select__text",optionsGroup:".optgroup",option:e,visibleOption:n,selectableOption:r,firstSelectableOption:r+":first",optionValue:'[data-value="%s"]'},this._super())},_initProperties:function(){this._super(),this._options=null,this._dropdownManager=this.options.dropdownManager||this._getService("dropdowns"),this._handleDropdown()},initialize:function(){this._super(),this._markFirstOption()},_fillData:function(){this._super();var n=this._data.data;this._elem("visibleOption").each(function(r,i){var s=e(i),o=s.data(),u=s.attr("data-value");o.value=u,n[u]||(n[u]={});var a=n[u];a.key===undefined&&(a.key=this._getOptionHtml(s)),t(a).extend(o)}.bind(this));var r=this._elem("optionValue","");r.length&&(n[""]=n[""]||{key:this._getOptionHtml(r)})},_setInitialValue:function(){var e=this.$input.val();return this._updateModelData(),this.model.setDefaultValue(this._data["default"]),e!==""&&this.$input.val(e),this._super(),this},_handleModel:function(){this._super(),this.model.on("allowedValues",this._filterValues,this)},_setInitialDisabled:function(){this._hasClass("disabled")&&this.disable()},disable:function(){return this._super(),this._getDropdown().undelegateEvents(),this},enable:function(){return this._super(),this._getDropdown().delegateEvents(),this},_adjustTabindexForState:function(e){e==="enabled"?this.$el.attr("tabindex",0):this.$el.removeAttr("tabindex")},_handleDropdown:function(){var e=this._getDropdown();e.on("show",this._onShowDropdown,this).on("hide",this._onHideDropdown,this).on("change:content",this._onDropdownContentChanged,this),this._options=e.getOptions().on("selectOption",this._onSelectOption,this)},_setValue:function(e){var t=e.replace(/"/g,'\\"');this._options.selectOptionBySelector(this._selector("optionValue",t));var n=this._getOptionByValue(t);this._updateViewForOption(n),this._super(e)},isGroupSelected:function(){return this._options.isGroupSelected()},_getOptionByValue:function(e){var t='[data-value="'+e+'"]',n=this.$(this._selector("option")+t);return n.length?n:null},focus:function(){return this.isFocused()||this._getDropdown().focus(),this},_getDropdown:t.method.once(function(){return this._dropdownManager.getDropdown(this.$el)}),_filterValues:function(n){var r=this._elem("option");t.isArray(n)?r.each(function(r,i){var s=e(i),o=t.find(n,function(e){return e+""==s.data("value")+""})===undefined;s.toggleClass(this._class("hidden"),o)}.bind(this)):r.removeClass(this._class("hidden")),this._markFirstOption(),this._checkEmptyGroups(),this._getDropdown().resetScroll()},_markFirstOption:function(){var e=this._class("firstOption");this._elem("option").removeClass(e).filter(this._selector("firstSelectableOption")).addClass(e)},_checkEmptyGroups:function(){this._elem("optionsGroup").each(function(t,n){var r=e(n);r.has(this._selector("visibleOption")).length?r.removeClass(this._class("hidden")):r.addClass(this._class("hidden"))}.bind(this))},_updateViewForOption:function(e){e&&(this.$input.val(e.data("value")),this._setTitle(this._getOptionHtml(e)))},_onSelectOption:function(e){this._setTitle(this._getOptionHtml(e)),this.trigger("preChange:value",e.data("value"))},_onShowDropdown:function(){this._options.highlightActiveOption()},_onHideDropdown:function(){this._updateViewForOption(this._options.getActiveOption()),this._tryToChangeValueByUser()},_onDropdownContentChanged:function(){this._dropElemCache()},_setTitle:function(e){var t=this._elem("title");t.html(e),t[0]&&t[0].scrollWidth>t.width()?t.attr("title",t.text()):t.removeAttr("title")},_getOptionHtml:function(e){return e.html()}});return s}),define("global_forms/Inputs/Select/SelectInputView",["jquery","underscore","../BaseSelect/BaseSelectInputView","./WithOptionsDropdown","global_forms/Mixins/LoadingInputView"],function(e,t,n,r,i){var s=n.mix(r,i).extend({_classes:function(){return t.defaults({loading:"select_state_loading",loaderDeco:"select__loader"},this._super())}});return s}),define("global_forms/Inputs/Button/ButtonInputView",["jquery","underscore","global_forms/Inputs/Abstract/AbstractInputView","global_forms/Mixins/LoadingInputView"],function(e,t,n,r){var i=n.mix(r).extend({_classes:function(){return t.defaults({loading:"button_status_loading",loaderDeco:"button__deco",disabled:"button_disabled_yes"},this._super())},_selectors:function(){return t.defaults({input:"button,input"},this._super())},events:function(){var e=this._super();return e.click=this._onClick,e.mouseup=this._onMouseUp,e.keyup=this._onKeyUp,e.keydown=this._onKeyDown,e},_onClick:function(e){this.isDisabled()?e.preventDefault():this.trigger("click",e)},_onMouseUp:function(e){this.isDisabled()?e.preventDefault():this.trigger("mouseup",e)},_onKeyUp:function(e){this.isDisabled()?e.preventDefault():this.keyEvent("keyup",e)},_onKeyDown:function(e){this.isDisabled()?e.preventDefault():this.keyEvent("keydown",e)}});return i}),define("global_forms/Inputs/Checkbox/CheckboxInputModel",["underscore","../Abstract/AbstractInputModel"],function(e,t){var n=t.extend({defaults:function(){return e({value:!1,startValue:!1,checkedValue:"on"}).defaults(this._super())},_initProperties:function(){this._super(),this._convertValueToString=!1},isChecked:function(){return!!this.value()},toggle:function(e){return typeof e=="undefined"?this.toggle(!this.isChecked()):(e?this.value(this.get("checkedValue")):this.clearValue(),this)},value:function(e){return e===undefined?this._super():this._super(e?this.get("checkedValue"):!1)}});return n}),define("global_forms/Inputs/Checkbox/CheckboxInputView",["underscore","global_forms/Inputs/Abstract/AbstractInputView","./CheckboxInputModel"],function(e,t,n){var r=t.extend({_ModelConstructor:n,_classes:function(){return e.defaults({active:"checkbox_checked_yes",focus:"checkbox_focus_yes",disabled:"checkbox_disabled_yes"},this._super())},_selectors:function(){return e.defaults({excludedFocusableElements:"a"},this._super())},events:function(){var e=this._super();return e["change "+this._selector("input")]=this._onChange,e},_setInitialValue:function(){this.model.set("checkedValue",this.$input.val()),this._super()},_setValue:function(e){var t=!!e;this.$el.toggleClass(this._class("active"),t),this.$input.prop("checked",t)},_getValue:function(){return this.$input.prop("checked")},_onChange:function(){this.isDisabled()||this._tryToChangeValueByUser()}});return r}),define("global_forms/Inputs/Radio/RadioInputView",["jquery","underscore","../BaseSelect/BaseSelectInputView"],function(e,t,n){var r=n.extend({_classes:function(){return t.defaults({active:"radio_checked_yes",focus:"radio_focus_yes",disabled:"radio_disabled_yes"},this._super())},_selectors:function(){return t.defaults({checkedRadioInput:".radio__input:checked",radioInput:".radio__input",firstFocusableRadio:".radio__input:focusable:first",radioInputHolder:".radio"},this._super())},events:function(){var e=this._super(),t=this._selector("input"),n=this._selector("radioInputHolder");return e["change "+t]=this._tryToChangeValueByUser,e["blur "+n]=this._onRadioBlur,e["focus "+n]=this._onRadioFocus,e},_initProperties:function(){this._super(),this._$activeRadio=null},initialize:function(){this._super(),this._setInitialFocus()},_setInitialValue:function(){this._$activeRadio=this._elem("active").find(this._selector("radioInput")),this._setActiveRadio(this._elem("checkedRadioInput")),this._updateModelData(),this._super()},_fillData:function(){this._super();var n=this._data.data;this._elem("radioInput").each(function(r,i){var s=e(i),o=s.data(),u=s.val();n[u]||(n[u]={});var a=n[u];a.key===undefined&&(a.key=u),t(a).extend(o)}.bind(this)),n[""]=n[""]||{key:""}},_getValue:function(){var e=this.$(this._selector("checkedRadioInput")).val();return e===undefined?"":e},_setValue:function(e){var t=this._elem("radioInput").filter('[value="'+e+'"]');this._setActiveRadio(t.length?t:null)},_setActiveRadio:function(e){if(this._$activeRadio&&e&&this._$activeRadio[0]===e[0])return;var t=this._selector("radioInputHolder"),n=this._class("active");this._$activeRadio&&this._$activeRadio.closest(t).removeClass(n),e?e.prop("checked",!0).closest(t).addClass(n):this._$activeRadio&&this._$activeRadio.prop("checked",!1),this._$activeRadio=e},_setInitialDisabled:function(){this._elem("radioInputHolder").hasClass(this._class("disabled"))&&this.disable()},_setInitialFocus:function(){if(!this.isFocused())return;var t=e(document.activeElement).closest(this._selector("radioInputHolder"));this._setRadioFocusClass(t)},_setFocusClass:function(){},_removeFocusClass:function(){},_onRadioFocus:function(t){this._setRadioFocusClass(e(t.currentTarget))},_onRadioBlur:function(t){this._removeRadioFocusClass(e(t.currentTarget))},_setRadioFocusClass:function(e){e.addClass(this._class("focus"))},_removeRadioFocusClass:function(e){e.removeClass(this._class("focus"))},focus:function(){return this._findElem("firstFocusableRadio").focus(),this},_getDisablableElement:function(){return this._elem("radioInputHolder")}});return r}),define("FormClasses/Inputs/Radio/RadioInputView",["jquery","underscore","global_forms/Inputs/Radio/RadioInputView"],function(e,t,n){return n.extend({_selectors:function(){return t.defaults({radioInputValue:'.radio__input[value="%s"]',radioInputHolderDisabled:".radio_disabled_yes"},this._super())},_setInitialDisabled:function(){this._elem("radioInputHolder").length===this._elem("radioInputHolderDisabled").length&&this.disable()},_enableInput:function(e){var t=this._elem("radioInputValue",e);return this._removeClass("disabled",t.closest(this._selector("radioInputHolder"))),t.prop(this._disabledAttribute,!1).attr("tabindex",0),this._disabled=!1,this},allowValues:function(e){t.isArray(e)?(this.disable(),e.length&&e.forEach(this._enableInput,this)):this.enable()},filterValues:function(t){this._elem("radioInputHolder").each(function(n,r){var i=e(r),s=i.find(this._selector("radioInput")).val();this._toggleClass("hidden",i,t.indexOf(s)===-1)}.bind(this))}})}),define("global_forms/Mixins/Caret",["vendors/Backbone/Mixin"],function(e){return new e({_getCaretPosition:function(e){return e=$(e)[0]||this.$input[0],e.selectionStart||0},_caret:function(e,t,n){var r;typeof e=="object"&&(n=e),n=n||this.$input;if(this.$el.is(":hidden"))return this.$el;if(typeof e=="number")return t=typeof t=="number"?t:e,n.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(r=this.createTextRange(),r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",e),r.select())});var i=n[0];return i.setSelectionRange?(e=i.selectionStart,t=i.selectionEnd):document.selection&&document.selection.createRange&&(r=document.selection.createRange(),e=0-r.duplicate().moveStart("character",-1e5),t=e+r.text.length),{begin:e,end:t}}})}),define("global_forms/Inputs/CompositeFormat/CompositeFormatInputModel",["underscore","../Text/TextInputModel"],function(e,t){var n=t.extend({_valuePartsSeparator:".",_initProperties:function(){this._super(),this._valuePartsNames=[],this._isManuallyCleared={}},addValuePart:function(e,t){t=t||null,this.set(e,t),this.on("change:"+e,this._onPartUpdate,this),this._valuePartsNames.push(e),this._isManuallyCleared[e]=!0},_onPartUpdate:function(){this.set("value",this._buildValueFromParts())},clearPart:function(e){this._isManuallyCleared[e]=!0,this.set(e,null)},clearValue:function(){return this._valuePartsNames.forEach(function(e){this._isManuallyCleared[e]=!1,this.set(e,null)},this),this},_somePartHasManuallyCleared:function(){for(var e=0;e<this._valuePartsNames.length;e++)if(this._isManuallyCleared[this._valuePartsNames[e]])return!0;return!1},value:function(e){return typeof e!="undefined"&&((e||!e&&!this._somePartHasManuallyCleared())&&this.set(this._getPartsFromValue(e),{silent:!0}),e=this._buildValueFromParts()),this._super(e)},_buildValueFromParts:function(){var e="",t=!0;return e=this._valuePartsNames.map(function(e){var n=this.get(e);return n===null?t=!1:this._isManuallyCleared[e]=!1,this._preparePartValue(n)},this).join(this._valuePartsSeparator),t||(e=""),e},_preparePartValue:function(e){return e},_getPartsFromValue:function(e){var t={},n=String(e).split(this._valuePartsSeparator),r=0,i=null;for(var s=0;s<this._valuePartsNames.length;s++)i=this._valuePartsNames[s],t[i]=null,typeof n[s]!="undefined"&&(r=parseInt(n[s],10),isFinite(r)&&(t[i]=r));return t}});return n}),define("global_forms/Inputs/CompositeFormat/CompositeFormatInputView",["underscore","global_forms/Inputs/Text/TextInputView","global_forms/Mixins/Caret","./CompositeFormatInputModel","global/userProfile"],function(e,t,n,r,i){var s=t.mix(n).extend({_ModelConstructor:r,_classes:function(){return e.defaults({up:"input__button_type_up",down:"input__button_type_down"},this._super())},events:function(){var e=this._super(),t=this._getInputSelector();return t&&(t=" "+t),e["click"+t]=this._onInputClick,e["dblclick"+t]=this._onInputDblClick,e["mousedown"+t]=this._onInputMouseDown,e["focus"+t]=this._onInputFocus,e["blur"+t]=this._onInputBlur,e["mousedown "+this._selector("up")]=this._onUpArrowMouseDown,e["mousedown "+this._selector("down")]=this._onDownArrowMouseDown,e},_initProperties:function(){this._super(),this._partsBounds=[],this._partsCount=this._partsBounds.length,this._valueRegExp=null,this._initFormat(),this._initParts(),this._selectPartOnFocus=!0,this._currentPartIndex=0,this._TYPING_DELAY=i.get("TYPING_DELAY"),this._inputTimer=null,this._typing=!1,this._keysInCurrentPart=0,this._preventSelectOnFocus=!1,this._tripleClickTimer=null,this._preventSelectionOnTripleClick=!1,this._TRIPLE_CLICK_TIMEOUT=400},_initFormat:function(){this._separator=".",this._parts=[]},_initParts:function(){var e=null,t=0,n;for(var r=0;r<this._parts.length;r++)e=this._parts[r],this._partsBounds.push([t,t+e.placeholder.length]),t+=e.placeholder.length+1,e.numPlaceholder=(new Array(e.placeholder.length+1)).join("0");n="^"+this._parts.map(function(e){var t=(new Array(e.placeholder.length+1)).join("\\d");return"("+t+"|"+e.placeholder+")"}).join(this._separator)+"$",this._valueRegExp=new RegExp(n),this._partsCount=this._partsBounds.length},_handleModel:function(){this._super(),this._parts.forEach(function(e){this.model.addValuePart(e.name),this.model.on("change:"+e.name,this._onChangeValuePart,this)},this)},_incCurrentPart:function(){this._changeCurrentPart(1)},_decCurrentPart:function(){this._changeCurrentPart(-1)},_changeCurrentPart:function(e){var t=this._parts[this._currentPartIndex],n=t.range[1]-t.range[0]+1,r=this.model.get(t.name);r=t.range[0]+(r-t.range[0]+e+n)%n,this.model.set(t.name,r),this._selectCurrentPart()},_onChangeValuePart:function(){this._setValue(this.model.value())},_prepareValue:function(){return this._parts.map(function(e){var t=this.model.get(e.name);return t===null?e.placeholder:(e.numPlaceholder+t).slice(-e.numPlaceholder.length)},this).join(this._separator)},_parseValue:function(e){return e.match(this._valueRegExp)||(e=this.getFullPlaceholder(),this.$input.val(e)),e},getFullPlaceholder:function(){return this._parts.map(function(e){return e.placeholder},this).join(this._separator)},_onInputFocus:function(){this._selectPartOnFocus&&!this._preventSelectOnFocus&&(this._currentPartIndex=0,setTimeout(function(){this.$input.is(":focus")&&this._selectCurrentPart()}.bind(this),0)),this._preventSelectOnFocus=!1},_onBlur:function(e){this._super(e),this._preventSelectOnFocus=!1,this._clearInputTimer()},_onInputBlur:function(){this._checkCurrentPart()},_onInputClick:function(){var e=this._currentPartIndex;this._defineCurrentPartIndex(),this._checkPart(e),this._selectPartOnFocus&&this._selectCurrentPart()},_onInputDblClick:function(){clearTimeout(this._tripleClickTimer),this._preventSelectionOnTripleClick=!0,this._tripleClickTimer=setTimeout(function(){this._preventSelectionOnTripleClick=!1}.bind(this),this._TRIPLE_CLICK_TIMEOUT)},_onInputMouseDown:function(e){this._preventSelectOnFocus=!0,this._preventSelectionOnTripleClick&&e.preventDefault()},_onUpArrowMouseDown:function(e){this._checkFocusOnArrowButtonsMouseDown(e),this._incCurrentPart()},_onDownArrowMouseDown:function(e){this._checkFocusOnArrowButtonsMouseDown(e),this._decCurrentPart()},_checkFocusOnArrowButtonsMouseDown:function(e){this.isFocused()?e.preventDefault():this.$input[0].focus()},_defineCurrentPartIndex:function(){var e=this._caret();for(var t=0;t<this._partsBounds.length;t++)if(e.begin>=this._partsBounds[t][0]&&e.begin<=this._partsBounds[t][1]){this._currentPartIndex=t;break}},_selectCurrentPart:function(){this._caret.apply(this,this._partsBounds[this._currentPartIndex])},_onKeydown:function(e){this._super(e);var t=e.which,n=!0;switch(t){case this._KEYS.BACKSPACE:case this._KEYS.DELETE:this._clearCurrentPart(),this._selectCurrentPart();break;case this._KEYS.UP:this._incCurrentPart();break;case this._KEYS.DOWN:this._decCurrentPart();break;case this._KEYS.RIGHT:this._changeCurrentPartIndex(Math.min(this._currentPartIndex+1,this._partsCount-1)),this._selectCurrentPart();break;case this._KEYS.LEFT:this._changeCurrentPartIndex(Math.max(this._currentPartIndex-1,0)),this._selectCurrentPart();break;default:n=!1}n&&(this._clearInputTimer(),e.preventDefault())},_onKeypress:function(e){var t=e.which;if(!t||this._isMetaKey(e))return;e.preventDefault();var n=parseInt(String.fromCharCode(t),10);if(isNaN(n))return;var r=0,i,s,o,u=!1;this._typing&&(r=this._getCurrentPartIndexValue()),i=r*10+n,s=this._parts[this._currentPartIndex].placeholder.length===this._keysInCurrentPart,s||this._setCurrentPartValue(i),this._keysInCurrentPart++,o=i*10<=this._parts[this._currentPartIndex].range[1],s=this._parts[this._currentPartIndex].placeholder.length===this._keysInCurrentPart;if(s||!o)u=this._changeCurrentPartIndex(this._currentPartIndex+1);this._selectCurrentPart(),this._clearInputTimer(),u||(this._typing=!0,this._inputTimer=setTimeout(this._onStopTyping.bind(this),this._TYPING_DELAY))},_onStopTyping:function(){this._typing=!1,this._keysInCurrentPart=0},_changeCurrentPartIndex:function(e){return e=e>this._partsCount-1?this._partsCount-1:e<0?0:e,this._currentPartIndex==e?!1:(this._checkCurrentPart(),this._keysInCurrentPart=0,this._currentPartIndex=e,!0)},_setCurrentPartValue:function(e){this.model.set(this._parts[this._currentPartIndex].name,e)},_clearCurrentPart:function(){this.model.clearPart(this._parts[this._currentPartIndex].name)},_getCurrentPartIndexValue:function(){return this.model.get(this._parts[this._currentPartIndex].name)},_clearInputTimer:function(){this._inputTimer&&(clearTimeout(this._inputTimer),this._inputTimer=null),this._typing=!1},_checkCurrentPart:function(){this._checkPart(this._currentPartIndex)},_checkPart:function(e){var t=this._parts[e],n=this.model.get(t.name);n!==null&&(n=n<t.range[0]?t.range[0]:n>t.range[1]?t.range[1]:n,this.model.set(t.name,n))}});return s}),define("global_forms/Inputs/Calendar/CalendarInputModel",["underscore","global_forms/Inputs/CompositeFormat/CompositeFormatInputModel","moment"],function(e,t,n){var r=t.extend({defaults:function(){return e({format:"YYYY-MM-DD"}).defaults(this._super())},_valuePartsSeparator:"-",_buildValueFromParts:function(){return this._super()?("0000"+this.get("year")).slice(-4)+"-"+("00"+this.get("month")).slice(-2)+"-"+("00"+this.get("day")).slice(-2):""},_getPartsFromValue:function(e){var t=String(e).split("-"),n=null,r=null,i=null;return t.length>=3&&(n=Number(t[2]),r=Number(t[1]),i=Number(t[0])),{day:isFinite(n)?n:null,month:isFinite(r)?r:null,year:isFinite(i)?i:null}},isValidDateValue:function(){var e=this.value(),t=this.get("maxValue"),r=this.get("minValue"),i=e&&n(e,this.get("format")).isValid();return i&&(!r||r<=e)&&(!t||t>=e)},normalizeDateValue:function(){var e=this.value(),t=this.get("maxValue"),n=this.get("minValue");if(!e)return;e=t&&e>t?t:e,e=n&&e<n?n:e,this.value()!==e&&this.value(e)}});return r}),define("global_forms/Inputs/Calendar/CalendarInputView",["underscore","Modernizr","global_forms/Inputs/CompositeFormat/CompositeFormatInputView","./CalendarInputModel","global/elements/ServiceManager/WithServiceManager"],function(e,t,n,r,i){var s=n.mix(i).extend({_ModelConstructor:r,_selectors:function(){return e.defaults({icon:".input__calendar",selects:".select"},this._super())},_classes:function(){return e.defaults({"short":"input_short_yes"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("icon")]=this.focus,e},_elem:function(e){var t=this._super("selects");return this._super(e).filter(function(){return!t.has(this).length})},_initProperties:function(){this._super(),this._dropdown=null,this._calendar=null},initialize:function(){this._super(),this.model.set({maxValue:this._data.max||null,minValue:this._data.min||null}),this._handleDropdown(),this.model.on("change:value",this._updateCalendar,this),this.on("keydown:enter",this._normalizeValue,this)},showCalendar:function(){return this._dropdown.show(),this},_initFormat:function(){this._separator=LOCALES.dateSeparator,this._parts=[],this._prepareParts()},_prepareParts:function(){var e={d:{name:"day",range:[1,31],placeholder:LOCALES.dates["## DD"]},m:{name:"month",range:[1,12],placeholder:LOCALES.dates["## MM"]},y:{name:"year",range:[0,9999],placeholder:LOCALES.dates[this._hasClass("short")?"## YY":"## YYYY"]}},t=LOCALES.dates["## format"];t.split(this._separator).forEach(function(t){var n=t.toLowerCase();this._parts.push(e[n[0]])},this)},_handleDropdown:function(){this._dropdown=this._getService("dropdowns").getDropdown(this.$el),this._dropdown.once("show:before",this._handleCalendar,this),this._selectPartOnFocus&&(this._dropdown.on("show",function(){this._selectPartOnFocus=!1},this),this._dropdown.on("hide",function(){this._selectPartOnFocus=!0},this))},_handleCalendar:function(){this._calendar=this._dropdown.getCalendar(),this._calendar.setValue(this.model.value()),this._calendar.on("change:value",this._setDate,this)},_updateCalendar:function(){this._setDateToCalendar()},_setDateToCalendar:function(){this._calendar&&this.model.isValidDateValue()&&this._calendar.setValue(this.model.value())},_setDate:function(e){this.model.value(e.format(this.model.get("format")))},_parseValue:function(e){var t=e.match(this._valueRegExp);if(t){var n={};for(var r=1;r<t.length;r++)n[this._parts[r-1].name]=t[r];e=this._buildValueString(n)}else e=this.getFullPlaceholder(),this.$input.val(e);return e},_buildValueString:function(e){return e.year+"-"+e.month+"-"+e.day},_normalizeValue:function(){this.model.normalizeDateValue()},_onBlur:function(e){this._super(e),this._normalizeValue()}});return s}),define("global_forms/Inputs/Time/TimeInputModel",["global_forms/Inputs/CompositeFormat/CompositeFormatInputModel"],function(e){var t=e.extend({_valuePartsSeparator:":",_preparePartValue:function(e){return("0"+e).slice(-2)}});return t}),define("global_forms/Inputs/Time/TimeInputView",["Modernizr","global_forms/Inputs/CompositeFormat/CompositeFormatInputView","./TimeInputModel"],function(e,t,n){var r=t.extend({_ModelConstructor:n,_initFormat:function(){this._separator=":",this._parts=[{name:"hours",range:[0,23],placeholder:LOCALES.dates["## hh"]},{name:"minutes",range:[0,59],placeholder:LOCALES.dates["## mm"]}]},_selectCurrentPart:function(){this.$input[0].focus(),this._super()}});return r}),define("global_forms/Inputs/TextMasked/TextMaskedInputBuffer",["BackboneX"],function(e){var t=e.Model.extend({defaults:{buffer:[],placeholder:""},clearRange:function(e,t){var n=e,r=this.get("buffer");while(n<t&&n<r.length)r[n]=this.get("placeholder"),n++},setChar:function(e,t){this.get("buffer")[e]=t},getChar:function(e){return this.get("buffer")[e]},at:function(e){return this.get("buffer")[e]},isPlaceholder:function(e){return this.at(e)===this.get("placeholder")},remove:function(e){this.get("buffer").splice(e,1)},insert:function(e,t){this.get("buffer").splice(e,0,t)},prepend:function(e){this.get("buffer").unshift(e)},append:function(e){this.get("buffer").push(e)},getString:function(){return this.get("buffer").join("")},getInt:function(){var e=this.getString().split(".")[0];return e?e:0},getLength:function(){return this.getString().length},indexOf:function(e){return this.get("buffer").indexOf(e)},isStringStartsWith:function(e){return this.getString().charAt(0)===e}});return t}),define("global_forms/Inputs/TextMasked/TextMaskedInputView",["underscore","global_forms/Inputs/Text/TextInputView","global_forms/Mixins/Caret","./TextMaskedInputBuffer"],function(e,t,n,r){var i=t.mix(n).extend({initialize:function(){this._super(),this._initBuffer();var e=this._data.mask;e&&this.setMask(String(e))},_initProperties:function(){this._super(),this._maskPlaceholder="",this._regAliases={1:"[1-9]",9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"}},_initBuffer:function(){this._buffer=new r({buffer:(this.$input.val()||"").split(""),placeholder:this._maskPlaceholder})},setMask:function(t){this._maxLength=t.length,this._tests=e(t).map(function(e){return this._regAliases[e]?new RegExp(this._regAliases[e]):null},this)},_writeBuffer:function(){this.$input.val(this._buffer.getString())},_onKeydown:function(e){if(this.isDisabled())return;this._super(e);var t=e.which,n,r,i;if(t===this._KEYS.BACKSPACE||t===this._KEYS.DELETE)n=this._caret(),r=n.begin,i=n.end,i-r===0&&(r=t!==this._KEYS.DELETE?this._seekPrev(r):i=this._seekNext(r-1),i=t===this._KEYS.DELETE?this._seekNext(i):i),this._deleteChars(r,i,t===this._KEYS.DELETE),this._tryToChangeValueByUser(),e.preventDefault()},_deleteChars:function(e,t,n){this._buffer.clearRange(e,t),t--,this._shiftToLeft(e,t),this._writeDeletionResult(e,t,n)},_writeDeletionResult:function(e,t,n){this._writeBuffer(),n?this._caret(t):this._caret(e)},_onKeypress:function(e){if(this.isDisabled())return;var t=e.which,n=this._caret(),r,i;t&&!this._isMetaKey(e)&&(n.end-n.begin!==0&&this._deleteChars(n.begin,n.end,!1),r=this._seekNext(n.begin-1),r<this._maxLength&&(i=String.fromCharCode(t),this._isValid(r,i)&&this._insertValidChar(r,i)),this._tryToChangeValueByUser(),e.preventDefault())},_insertValidChar:function(e,t){this._shiftToRight(e),this._buffer.setChar(e,t),this._writeBuffer();var n=this._seekNext(e);this._caret(n)},_seekNext:function(e){do e++;while(e<this._maxLength&&!this._tests[e]);return e},_seekPrev:function(e){do e--;while(e>=0&&!this._tests[e]);return e},_isValid:function(e,t){return this._tests[e].test(t)},_shiftToLeft:function(e,t){var n,r;if(e<0)return;for(n=e,r=this._seekNext(t);n<this._maxLength;n++)if(this._tests[n]){if(!(r<this._maxLength&&this._tests[n].test(this._buffer.at(r))))break;this._buffer.setChar(n,this._buffer.at(r)),this._buffer.setChar(r,this._maskPlaceholder),r=this._seekNext(r)}},_shiftToRight:function(e){var t,n,r,i;for(t=e,n=this._maskPlaceholder;t<this._maxLength;t++)if(this._tests[t]){r=this._seekNext(t),i=this._buffer.at(t),this._buffer.setChar(t,n);if(!(r<this._maxLength&&this._tests[r].test(i)))break;n=i}}});return i}),define("global_forms/Inputs/TextCurrency/TextCurrencyInputModel",["underscore.string","global_forms/Inputs/Text/TextInputModel"],function(e,t){var n=t.extend({defaults:function(){return e({defaultValue:"0.00"}).defaults(this._super())},getTrailingZerosCount:function(e){return(this.get("defaultValue").split(".")[1]||"00").length},value:function(t){if(t!==undefined){var n=e.toNumber(t);isNaN(n)||!n?t=this.get("defaultValue"):t=e.normalizeNumberString(t.toString(),this.getTrailingZerosCount())}return this._super(t)}});return n}),define("global_forms/Inputs/TextCurrency/TextCurrencyInputView",["jquery","underscore.string","global_forms/Inputs/TextMasked/TextMaskedInputView","./TextCurrencyInputModel","global_forms/Inputs/Text/TextInputView"],function(e,t,n,r,i){if(e.browser.webkit&&/Android/.test(navigator.appVersion))return i;var s=n.extend({_ModelConstructor:r,events:function(){var e=this._super();return e["paste "+this._getInputSelector()]=this._onPaste,e},_initProperties:function(){this._super(),this._JS_POINT=".",this._POINT=LOCALES.decimalSeparator,this._ALTERNATIVE_POINT=LOCALES.alternativeDecimalSeparator,this._countOfZerosBeforePoint=1,this._isDataPasted=!1,this._trailingZeros="",this._regAliases["."]=LOCALES.decimalSeparatorRegExp,this._maxValue=null},initialize:function(){this._super(),this._trailingZeros=this.model.get("defaultValue").split(".")[1],this._updateMask(),this._maxValue=this._getMaxValue()},_tryToChangeValueByUser:function(){this._super();var e=this.model.value();this.$input.val()!==e&&this._onChangeValueByUser(e)},_onChangeValueByUser:function(e){this._super(),this._setValue(e),this._updateMask()},_onPaste:function(){this._isDataPasted=!0},_onInput:function(e){var t=!1,n=!1;if(this._isDataPasted){t=this._buffer.isStringStartsWith("0");if(t){var r=this._caret().begin,i=this.$input.val(),s=i.charAt(r);s==="0"&&i.charAt(r+1)===this._POINT&&(n=!0)}}this._super(e);if(this._isDataPasted){this._isDataPasted=!1;if(n){var o=this._buffer.indexOf(this._POINT);this._deleteChars(o-1,o,!1),this._tryToChangeValueByUser()}}},_onKeypress:function(e){if(this.isDisabled())return;var t=e.which,n=this._caret(),r,i=!1,s;if(t&&!this._isMetaKey(e)){if(n.end-n.begin!==0){var o=this._buffer.indexOf(this._POINT);this._deleteChars(n.begin,n.end,!1),o>n.end&&(i=!0)}r=this._seekNext(n.begin-1),r<this._maxLength&&(s=String.fromCharCode(t),this._isValid(r,s)&&this._insertValidChar(r,s,i)),this._tryToChangeValueByUser(),e.preventDefault()}},_setInitialValue:function(){this._POINT!==this._JS_POINT&&this.$input.val(this.$input.val().replace(this._JS_POINT,this._POINT)),this._super()},_isPoint:function(e){return this._buffer.at(e)===this._POINT},_isValid:function(e,t){return this._super(e,t)||this._isCharBeforePoint(e,t)},_isCharBeforePoint:function(e,t){return this._isPoint(e)&&this._tests[0].test(t)},_insertCharBeforePoint:function(e,t,n){e===0&&!n&&this._buffer.indexOf(this._POINT)===1&&this._removeLeadingZero(0),(this._maxValue===undefined||this._buffer.getInt()<this._maxValue)&&this._buffer.insert(e,t),this._writeBuffer(),this._buffer.getLength()>this.model.get("defaultValue").length&&(e=this._removeLeadingZero(e)),this._updateMask();var r=this._seekNext(e);this._caret(r)},_updateMask:function(){var e=this.$input.val().replace(/\d/g,"9").replace(this._POINT,this._JS_POINT);e.charAt(0)===this._JS_POINT&&(e="9"+e),this.setMask(e),this._buffer.set("buffer",t.compact(this._buffer.get("buffer")))},_removeLeadingZero:function(e){return this._buffer.isStringStartsWith("0")&&(this._buffer.remove(this._buffer.indexOf("0")),this._writeBuffer(),e--),e},_insertValidChar:function(e,t,n){this._ALTERNATIVE_POINT&&t===this._ALTERNATIVE_POINT&&(t=this._POINT);var r=this._buffer.indexOf(this._POINT);e<r||t!==this._POINT&&e===r||this._isCharBeforePoint(e,t)?this._insertCharBeforePoint(e,t,n):this._super(e,t)},_deleteChars:function(e,t,n){var r=this._buffer.indexOf(this._POINT),i=!1,s=r>=e&&r<t;this._buffer.clearRange(e,t),s&&e!==0?this._shiftToLeft(e,r-1):this._shiftToLeft(e,t-1);var o=this._buffer.getString();if(o===""||o===this._trailingZeros)this._buffer.set("buffer",("0"+this._POINT+this._trailingZeros).split("")),i=!0;else{s&&e===0&&(this._buffer.prepend(this._POINT),r=0,i=!0);var u=this._buffer.isStringStartsWith(this._POINT)?r-this._countOfZerosBeforePoint:r;for(;u<=r+this.model.getTrailingZerosCount();u++)if(this._buffer.isPlaceholder(u)){if(u>r&&n){var a=this._buffer.getChar(u-1);a!==this._POINT?(this._buffer.setChar(u-1,"0"),this._buffer.setChar(u,a)):this._buffer.setChar(u,"0")}else this._buffer.setChar(u,u===r?this._POINT:"0");i=!0}}this._writeDeletionResult(e,i?t:t-1,n),this._updateMask()},_setValue:function(e){e!==undefined&&this._POINT!==this._JS_POINT&&(e=e.replace(this._JS_POINT,this._POINT));var n=!1;this._buffer&&(e===this.model.get("defaultValue")&&t.toNumber(this._buffer.getString())===0&&(e=this._buffer.getString()),e!==undefined&&(this._buffer.set("buffer",e.split("")),n=!0));var r=this._super(e);return n&&this._updateMask(),r},_getMaxValue:function(){return this.$input.data("max")},focus:function(){return this._super(),this._caret(0),this}});return s}),define("vendors/Modernizr/mobileDeviceDetection",["jquery"],function(e){/iPhone/i.test(navigator.userAgent)&&e("html").addClass("iphone").addClass("iosdevice"),/iPod/i.test(navigator.userAgent)&&e("html").addClass("ipod").addClass("iosdevice"),/iPad/i.test(navigator.userAgent)&&e("html").addClass("ipad").addClass("iosdevice")}),define("mobile/FormClasses/Inputs/TextCurrency/TextCurrencyInputView",["underscore","jquery","global_forms/Inputs/TextCurrency/TextCurrencyInputView","global_forms/Mixins/Caret","vendors/Modernizr/mobileDeviceDetection","vendors/hand"],function(e,t,n,r){return n.mix(r).extend({_onFocus:function(e){this.$el.on("click",this._onClick),this._super(e)},_onClick:e.method.bind(function(){this.$el.off("click",this._onClick);var e=this._getValue().indexOf(".");if(!t("html").hasClass("iosdevice")){var n=this._getCaretPosition();n>e&&e++}this._caret(e)})})}),define("global_forms/Inputs/TextCurrencyPairs/TextCurrencyPairsInputModel",["underscore.string","global_forms/Inputs/TextCurrency/TextCurrencyInputModel"],function(e,t){var n=t.extend({defaults:function(){return e({defaultValue:"0.00000"}).defaults(this._super())},value:function(t){if(t!==undefined){var n=e.toNumber(t,5);isNaN(n)||!n?t=this.get("defaultValue"):t=e.normalizeNumberString(t.toString(),this.getTrailingZerosCount())}return this._super(t)}});return n}),define("global_forms/Inputs/TextCurrencyPairs/TextCurrencyPairsInputView",["global_forms/Inputs/TextCurrency/TextCurrencyInputView","./TextCurrencyPairsInputModel"],function(e,t){var n=e.extend({_ModelConstructor:t});return n}),define("global_forms/Inputs/AutocompleteInput/WithAutocomplete",["underscore","vendors/Backbone/Mixin","global_forms/Inputs/Select/WithOptionsDropdown"],function(e,t,n){var r=new t({dependencies:[n]},{_selectors:function(){return e.defaults({title:".select__input"},this._super())},_setTitle:function(e){this._elem("title").val(e)},_handleDropdown:function(){this._super(),this._options.on("clickToOption",this._onOptionClick,this)},_onOptionClick:function(){this._elem("title").focus()},_adjustTabindexForState:function(e){this._super(e),this._elem("title").attr("tabindex",e==="enabled"?0:-1)}});return r}),define("global_forms/Inputs/AutocompleteSelect/AutocompleteSelectInputView",["underscore","jquery","global_forms/Inputs/Select/SelectInputView","global_forms/Mixins/Caret","global_forms/Inputs/AutocompleteInput/WithAutocomplete"],function(e,t,n,r,i){var s=n.mix(r,i).extend({_selectors:function(){return e.defaults({arrow:".select__arrow",hint:".js-hint-autocomplete"},this._super())},events:function(){var e=this._super(),t=this._selector("title");return e["cut "+t]=this._onTitleChange,e["input "+t]=this._onTitleChange,e["keyup "+t]=this._onKeyup,e["keydown "+t]=this._onKeydown,e["keypress "+t]=this._onKeypress,e["change "+t]=this._onTitleChange,e},_initProperties:function(){this._super(),this._titleValue="",this._shortValue="",this._fullValue="",this._wasFocusedAfterOptionClick=!1,this._isMatches=!1},_onTitleChange:function(){this._handleTitleChanges()},_onKeyup:function(e){this._isNavigationKey(e)||this._handleTitleChanges()},_onKeypress:function(e){if(e.keyCode&&!this._isAlphanumericKey(e.keyCode))return;this._handleTitleChanges()},_handleTitleChanges:function(){if(this.isDisabled())return;var e=this._elem("title").val();this._titleValue!==e&&(this._titleValue=e,this._autocomplete(e))},_onChangeModelValue:function(e,t){this._shortValue=this._fullValue=t,this._super(e,t),t||this.model.allowValues()},_autocomplete:function(e){if(e===this._fullValue)return;this._shortValue=e;if(e){this._allowValuesStartsWith(e);var t=this._findElem("firstSelectableOption"),n;t.length?n=this._fullValue=this.model.getDataForValue(this._findElem("firstSelectableOption").data("value"),"key"):n=this._fullValue=this._shortValue,this._options.removeSelection()}else this.model.allowValues(),this._fullValue=e,this.model.value(""),this._getDropdown().show(),this._toggleHint(!0)},_allowValuesStartsWith:function(e){var t=this;t._isMatches=!1,e=e.trim().toLowerCase(),this.model.allowValues(function(n,r){return r.hasOwnProperty("search")||(r.search=r.key.toLowerCase()),r.search.indexOf(e)!==-1&&(t._isMatches=!0),r.search.indexOf(e)!==-1||n===""}),this._toggleHint(t._isMatches)},_toggleHint:function(e){var n=t(this._selector("hint"));if(e){this._getDropdown().show(),n.hide();return}this._getDropdown().hide(),n.show()},_onOptionClick:function(){this._wasFocusedAfterOptionClick=!0,this._super()},_onFocusEventInside:function(e){this._super(e),!this._wasFocusedAfterOptionClick&&this._isMatches&&!this._getDropdown().isVisible()&&t(e.target).is(this._selector("title"))&&this._getDropdown().show(),this._wasFocusedAfterOptionClick=!1},_onKeydown:function(e){switch(e.keyCode){case this._KEYS.DELETE:e.preventDefault();var t=this._caret(this._elem("title")),n;t.begin!==t.end&&(n=this._shortValue.substr(0,t.begin),this._setTitle(n),this._handleTitleChanges());break;case this._KEYS.BACKSPACE:var t=this._caret(this._elem("title")),n;this._shortValue.length===t.begin&&this._fullValue.length===t.end&&(e.preventDefault(),n=this._shortValue.substr(0,this._shortValue.length-1),this._setTitle(n)),this._handleTitleChanges()}},_onShowDropdown:function(){this._super(),this._elem("arrow").is(":focus")&&this._elem("title").focus()},_onHideDropdown:function(){this._super(),this._fullValue=this._shortValue=this._titleValue=this.model.getDataForCurrentValue("key")||"";var e=this.model.value();this._fullValue&&e!==""&&this.model.allowValues(function(t){return t===e||t===""})}});return s}),define("global_forms/Inputs/AutocompleteSelect/AutocompleteSelectWithAlphabetFilterInputView",["underscore","jquery","./AutocompleteSelectInputView"],function(e,t,n){var r=n.extend({_selectors:function(){return e.defaults({filterLetter:".select__filter-letter",filterAnyLetter:".select__filter-any-letter"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("filterLetter")]=this._onFilterLetterClick,e["click "+this._selector("filterAnyLetter")]=this._onFilterAnyLetterClick,e},_onFilterLetterClick:function(e){var n=t(e.currentTarget).text();this._allowValuesStartsWith(n)},_onFilterAnyLetterClick:function(){this.model.allowValues()}});return r}),define("global_forms/Inputs/inputsFactory",["jquery","underscore","global/Factories/Factory","./Abstract/AbstractInputView","./Text/TextInputView","./Textarea/TextareaInputView","./SimpleSelect/SimpleSelectInputView","./Select/SelectInputView","./Button/ButtonInputView","./Checkbox/CheckboxInputView","./Radio/RadioInputView","./Calendar/CalendarInputView","./Time/TimeInputView","./TextCurrency/TextCurrencyInputView","./TextCurrencyPairs/TextCurrencyPairsInputView","./AutocompleteSelect/AutocompleteSelectWithAlphabetFilterInputView"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=n.extend({_products:function(){return t.defaults({"*":r,TextInput:i,TextareaInput:s,SimpleSelectInput:o,SelectInput:u,ButtonInput:a,CheckboxInput:f,RadioInput:l,HiddenInput:r,CalendarInput:c,TimeInput:h,TextCurrencyInput:p,TextCurrencyPairsInput:d,AutocompleteSelectInput:v},this._super())},_getTypeFromEl:function(e){return e.data("inputType")},_getSuitableProductDescriptor:function(e){var t=this._getTypeFromEl(e);if(!this._productDescriptors[t])throw new Error('Unknown input view type "'+t+'"');return this._productDescriptors[t]},createInstance:function(n,r){var i=e(n),s=i.data("inputView");if(s)return s;var o=this._getTypeFromEl(i),u=i.data("inputName")||i.attr("name");return r=t({modelOptions:{type:o,name:u}}).defaults(r),s=this._super(n,r),i.data("inputView",s),s}});return new m}),define("global_forms/Fields/FormField/FormFieldView",["BackboneX","underscore","global_forms/Fields/FormField/FormFieldModel","global_forms/Abstract/FormFieldStatus","global_forms/Inputs/inputsFactory"],function(e,t,n,r,i){var s=e.View.extend({_ModelConstructor:n,_classes:function(){return t.defaults({inputHolder:"js-form-el-holder",active:"field_active"},this._super())},_initProperties:function(){this._super(),this._focused=!1,this._inputs=[],this._elements=[],this._disabled=!1,this.status=null,this._statusViewEvents="focus blur",this._statusModelEvents="change:error",this._statusConditions="focus blur success error",this._hintConditions="focus",this._statusType="error",this._hintType="error"},initialize:function(){this._super(),this._initModel(),this._initFieldStatus(),this._initInputs(),this._handleModel(),this._initDisabled(),this._initFocus(),this._initValidation(),this.model.updateInitialValue()},_initFieldStatus:function(){this.status=new r({el:this.el,field:this,viewEvents:this._statusViewEvents,modelEvents:this._statusModelEvents}),this.status.hint&&this._addElement(this.status.hint)},initStatusConditions:function(){return this.status.showStatusOn(this._statusConditions,this._statusType).showHintOn(this._hintConditions,this._hintType),this},_addElement:function(e){this._elements.push(e),e.on("focus",this._onElementFocus,this),e.on("blur",this._onElementBlur,this)},_initModel:function(){var e=this.options.modelOptions||{};this.model=this.model||new this._ModelConstructor(e)},_handleModel:function(){this.model.on("change:validationAllowed",this.status.hide,this.status)},_initDisabled:function(){this._disabled=this._inputs.every(function(e){return e.isDisabled()})},_initValidation:function(){var e=this.$el.data("rules");e&&(typeof e=="string"&&(e=e.split(" ")),this.model.addValidationRules(e))},focus:function(){var e=this.$el.is(":focusable")?this.$el:this.getFirstInput();return e.focus(),this},focusInvalidInput:function(){var e=this.model.get("errorData"),t=e&&e.input||0,n=this.$el.is(":focusable")?this.$el:this.getInputByNumber(t);return n.focus(),this},_getInputHolders:function(){return this.$el.hasClass(this._class("inputHolder"))?this.$el:this._elem("inputHolder")},getFirstInput:function(){return this.getInputByNumber(0)},getInputByNumber:function(e){return this._inputs[e]||null},findInput:function(e){return t(this._inputs).find(e)},value:function(e){return e===undefined?this.model.value():(this.model.value(e),this)},_initInputs:function(){var e=this._getInputHolders();e.each(this._initInput.bind(this))},_initInput:function(e,t){var n=i.createInstance(t);this._addInput(n),this._addElement(n)},_addInput:function(e){this.model.addInput(e.model),this._inputs.push(e)},_initFocus:function(){this._focused=this._elements.some(function(e){return e.isFocused()})},_onElementFocus:function(e,t){if(this._focused)return;this._onFocus(e,t)},_onFocus:function(e,t){this._focused=!0,this.$el.addClass(this._class("active")),this.trigger("focus",this,e,t)},_onElementBlur:function(e,t){if(!this._focused)return;this._focused=this._elements.some(function(e){return e.containsActiveElement()}),this._focused||this._onBlur(e,t)},_onBlur:function(e,t){this.$el.removeClass(this._class("active")),this.trigger("blur",this,e,t)},isVisible:function(){return this.$el.is(":visible")},isFocused:function(){return this._focused},isDisabled:function(){return this._disabled},disable:function(){return this.toggleEnabled(!1)},enable:function(){return this.toggleEnabled(!0)},toggleEnabled:function(e){e=t.isUndefined(e)?this._disabled:e;var n=e?"enable":"disable";return this._inputs.forEach(function(e){e[n]()}),this._disabled=!e,this},show:function(){return this.toggleVisibility(!0)},hide:function(){return this.toggleVisibility(!1)},eachInput:function(e,t){return this._inputs.forEach(e,t),this},setValidationStatus:function(e,t){return this.model.setValidationStatus(e,t),this.status.show("check"),this},toggleVisibility:function(e){return this._toggleClass("hidden",this.$el,!e),this},toggleSubmittability:function(e){return this.model.toggleSubmittability(e),this},toggleValidation:function(e){return this.model.toggleValidation(e),this}});return s}),define("global_forms/Mixins/LoadingFieldView",["vendors/Backbone/Mixin"],function(e){var t=new e({_initProperties:function(){this._super(),this._loading=!1,this._disabledBeforeLoad=!1},load:function(){return this._loading||(this.eachInput(function(e){e.load()}),this._loading=!0,this._disabledBeforeLoad=this.isDisabled(),this._disabled=!0),this},stopLoading:function(){return this._loading?(this._disabledBeforeLoad?this.disable():this.enable(),this):this},disable:function(){return this._loading=!1,this._super()},enable:function(){return this._loading=!1,this._super()}});return t}),define("global_forms/Fields/Text/TextInputFieldView",["global_forms/Fields/FormField/FormFieldView","global_forms/Mixins/LoadingFieldView","./TextInputFieldModel"],function(e,t,n){var r=e.mix(t).extend({_ModelConstructor:n,_initProperties:function(){this._super(),this._statusConditions="focus blur error:inactive success:inactive change:error:inactive"},initialize:function(){this._super(),this.getFirstInput().bind("all",function(e){/keyup|keydown/.test(e)&&this.trigger(e)},this)}});return r}),define("mobile/FormClasses/Fields/Text/TextInputFieldView",["underscore","global_forms/Fields/Text/TextInputFieldView"],function(e,t){return t.extend({_classes:function(){return e.defaults({positionAbsolute:"s_position_absolute"},this._super())},_selectors:function(){return e.defaults({mainMenu:".menu-main"},this._super())},_initProperties:function(){this._super(),this._statusConditions="focus blur error:inactive success change:error:inactive"},_onFocus:function(e,t){this._super(e,t),this._$body.find(this._selector("mainMenu")).addClass(this._class("positionAbsolute"))},_onBlur:function(e,t){this._super(e,t),this._$body.find(this._selector("mainMenu")).removeClass(this._class("positionAbsolute"))}})}),define("global_forms/Fields/TextCurrency/TextCurrencyFieldView",["../Text/TextInputFieldView","./TextCurrencyFieldModel"],function(e,t){var n=e.extend({_ModelConstructor:t});return n}),define("global/elements/WithDeferredFocus",["underscore"],function(e){var t={events:function(){var e=this._super();return e["mousedown "+this._selector("deferredFocused")]=this._onDeferredFocusElementsMouseDown,e},_selectors:function(){return e.defaults({deferredFocused:":focusable"},this._super())},_initProperties:function(){this._super(),this._waitForMouseUp=!1,this._boundOnDocumentMouseUp=this._onDocumentMouseUp.bind(this)},initialize:function(){this._super(),this.on("focus",this._onViewFocus,this)},_onDeferredFocusElementsMouseDown:function(e){if(this.isFocused())return;this._waitForMouseUp=!0,this._$document.off("mouseup.withDeferredFocus",this._boundOnDocumentMouseUp).on("mouseup.withDeferredFocus",this._boundOnDocumentMouseUp)},_onDocumentMouseUp:function(){this._waitForMouseUp=!1,this._$document.off("mouseup.withDeferredFocus",this._boundOnDocumentMouseUp),this._triggerDeferredFocus()},_onViewFocus:function(){this._waitForMouseUp||this._triggerDeferredFocus()},_triggerDeferredFocus:function(){this.trigger("deferredFocus")}};return t}),define("global_forms/Fields/FormField/FormFieldViewWithDeferredFocus",["jquery","underscore","./FormFieldView","global/elements/WithDeferredFocus"],function(e,t,n,r){var i=n.mix(r).extend({_initProperties:function(){this._super(),this._statusConditions="deferredFocus blur success error",this._hintConditions="deferredFocus",this._statusViewEvents+=" deferredFocus"}});return i}),define("global_forms/Validation/CheckboxFieldValidator",["underscore","./FormFieldValidator"],function(e,t){var n=t.extend({_getRulesMap:function(){return e({"something-checked":this._somethingShouldBeChecked}).defaults(this._super())},_somethingShouldBeChecked:function(e){return e.length&&e.some(function(e){return e})},isEmptyValue:function(e){return!this._somethingShouldBeChecked(e)}});return n}),define("global_forms/Fields/Checkbox/CheckboxFieldModel",["underscore","../FormField/FormFieldModel","global_forms/Validation/CheckboxFieldValidator"],function(e,t,n){var r=t.extend({_validator:new n,getPostValue:function(){if(!this.get("multiple")&&this._inputs.length==1){var t=this.getFirstInput().value();return t===!1?[]:t}return e(this.get("value")).filter(function(e){return e!==!1})},_arrayValueToString:function(t){return e(t).filter(function(e){return e!==!1}).join(",")},checkByValues:function(e){this.eachInput(function(t){var n=t.value(),r=e.indexOf(n)!==-1;t.toggle(r)},this)},getHashValue:function(){var t={};return e(this.get("value")).forEach(function(e){e!==!1&&(t[e]=!0)}),t},_getInputValues:function(){var e=[];return this.eachInput(function(t){t.value()!==undefined&&e.push(t.value())}),e},isAllInputsSelected:function(){return this.value().every(function(e){return e})},hasSelectedInputs:function(){return this.value().some(function(e){return e})},setValueToAllInputs:function(e){this.eachInput(function(t){t.value(e)})},toggleAll:function(e){return typeof e=="undefined"?this.toggleAll(!this.isAllInputsSelected()):(this.eachInput(function(t){t.toggle(e)}),this)}});return r}),define("global_forms/Fields/Checkbox/CheckboxFieldView",["jquery","underscore","global_forms/Fields/FormField/FormFieldViewWithDeferredFocus","./CheckboxFieldModel"],function(e,t,n,r){var i=n.extend({_ModelConstructor:r,_selectors:function(){return t.defaults({deferredFocused:".checkbox__input, label.checkbox",status:".tooltip__holder"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("status")]=this._onStatusClick,e},_onStatusClick:function(t){e(t.target).is(this._selector("status"))&&this.trigger("click:status")},_initProperties:function(){this._super(),this._hintConditions+=" click:status",this._statusViewEvents+=" click:status"},setHashValue:function(e,t){return t=t||{},t.useDefaultValue===undefined&&(t.useDefaultValue=!0),t.defaultValue===undefined&&(t.defaultValue=!1),this.eachInput(function(n){if(t.withoutDisabled&&n.isDisabled())return;var r=e[n.value()];r!==undefined?n.model.value(r):t.useDefaultValue&&n.model.value(t.defaultValue)}),this}});return i}),define("global_forms/Fields/Button/ButtonFieldModel",["../FormField/FormFieldModel"],function(e){var t=e.extend({initialize:function(){this._super(),this.toggleSubmittability(!1).toggleValidation(!1)}});return t}),define("global_forms/Fields/Button/ButtonFieldView",["global_forms/Fields/FormField/FormFieldView","global_forms/Mixins/LoadingFieldView","./ButtonFieldModel"],function(e,t,n){var r=e.mix(t).extend({_ModelConstructor:n,_addInput:function(e){this._super(e),e.on("all",this._onInputAll,this)},_onInputAll:function(e,t){/keyup|keydown|click/.test(e)&&this.trigger(e,t)}});return r}),define("global_forms/Fields/DateTime/DateTimeFieldModel",["global_forms/Fields/Text/TextInputFieldModel"],function(e){var t=e.extend({_arrayValueToString:function(e){var t=e[0],n=e[1]?e[1]+":00":"";return n&&t?t+" "+n:""},_convertValueToArray:function(e){return e=this._super(e),e.length===1&&e[0]&&typeof e[0]=="string"?e[0].split(" "):e}});return t}),define("global_forms/Fields/DateTime/DateTimeFieldView",["global_forms/Fields/Text/TextInputFieldView","./DateTimeFieldModel"],function(e,t){var n=e.extend({_ModelConstructor:t});return n}),define("global_forms/Fields/fieldFactory",["jquery","underscore","global/Factories/Factory","./Text/TextInputFieldView","./TextCurrency/TextCurrencyFieldView","./Checkbox/CheckboxFieldView","./Button/ButtonFieldView","./DateTime/DateTimeFieldView","./FormField/FormFieldViewWithDeferredFocus"],function(e,t,n,r,i,s,o,u,a){var f=n.extend({_products:function(){return t.defaults({"*":r,TextInputField:r,TextCurrencyField:i,SelectInputField:r,CheckboxField:s,ButtonField:o,RadioInputField:a,HiddenInputField:r,DateTimeField:u,CalendarInputField:r},this._super())},_getTypeFromEl:function(e){return e.data("fieldType")},_getSuitableProductDescriptor:function(e){var t=this._getTypeFromEl(e);if(!this._productDescriptors[t])throw new Error('Unknown field type "'+t+'"');return this._productDescriptors[t]},createInstance:function(n,r){var i=e(n),s=i.data("fieldView");if(s)return s;var o=this._getTypeFromEl(i),u=i.data("fieldName")||i.attr("name"),a=typeof i.data("submittable")!="undefined"?i.data("submittable"):!0;return r=t.extend({modelOptions:{type:o,name:u,submittable:a,multiple:!!i.data("multiple")}},r),s=this._super(n,r),i.data("fieldView",s),s}});return new f}),!function(e){function t(){}function n(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function i(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void (1===e._state?s:o)(t.promise,e._value);var r;try{r=n(e._value)}catch(i){return void o(t.promise,i)}s(t.promise,r)}))}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof r)return e._state=3,e._value=t,void u(e);if("function"==typeof i)return void f(n(i,t),e)}e._state=1,e._value=t,u(e)}catch(s){o(e,s)}}function o(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function a(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,o(t,e))})}catch(r){if(n)return;n=!0,o(t,r)}}var l=setTimeout;r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,n){var r=new this.constructor(t);return i(this,new a(e,n,r)),r},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function r(s,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(e){r(s,e)},n)}t[s]=o,0===--i&&e(t)}catch(a){n(a)}}if(0===t.length)return e([]);for(var i=t.length,s=0;s<t.length;s++)r(s,t[s])})},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._setImmediateFn=function(e){r._immediateFn=e},r._setUnhandledRejectionFn=function(e){r._unhandledRejectionFn=e},"undefined"!=typeof module&&module.exports?module.exports=r:e.Promise||(e.Promise=r)}(this),define("PromisePolyfill",function(){}),define("global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeProps",["underscore","jquery","vendors/Backbone/Mixin"],function(e,t,n){var r=new n({},{_selectors:function(){return e.defaults({blockButtonSendCodeNew:".js-block-button-send-code-new",inputCaptchaCodeContainer:".js-container-input-captcha-code",blockCodeConfirm:".js-block-code-confirm",confirmationCodeTemplateError:"#js-confirmation-code-template-error",confirmationCodeAvalibleOptionsTemplate:"#js-confirmation-code-avalible-options-template",confirmationCodeCaptchaTemplate:"#js-confirmation-code-captcha-template",confirmationCodeTimerTemplate:"#js-confirmation-code-timer-template",confirmationCodeButtonSendCodeTemplate:"#js-confirmation-code-button-send-code-template",confirmationCodeInputConfirmCodeTemplate:"#js-confirmation-code-input-confirm-code-template"},this._super())},_initProperties:function(){this._super();var e=this;this.captchaCounter=0,this.props={data:{},namesFormsExceptions:["gttRegistrationRegister","gttAuthorizationResetChange","gttRegistrationRegisterMobile"],namesFormsExceptionsToggleHideBlock:["phoneInfo","emailInfo"],isTimeRun:!1,deliveryOption:"",exceptionsData:{},isValidInputConfirmationCode:!1,classGetCodeButton:{disable:"button_disabled_yes",loading:"button_status_loading"},translate:{one_time_password:LOCALES.labelGA,telegram:"Telegram",sms:LOCALES.labelSms,call:LOCALES.labelAutomatedCall,email:LOCALES.labelEmail},blockError:{CAPTCHA:e._selector("blockButtonSendCodeNew"),WRONG_CAPTCHA:e._selector("inputCaptchaCodeContainer"),WRONG_CODE:e._selector("blockCodeConfirm"),CODE_SEND_FAILED:e._selector("blockButtonSendCodeNew"),CODE_NOT_SENT:e._selector("blockCodeConfirm"),CODE_EXPIRED:e._selector("blockButtonSendCodeNew"),CODE_BLOCKED:e._selector("blockCodeConfirm"),CODE_CONFIRMATION:e._selector("blockCodeConfirm"),TIMER_ERROR:e._selector("blockButtonSendCodeNew"),NOT_ALLOWED_SEND_TYPE:e._selector("blockButtonSendCodeNew")},textError:{CAPTCHA:LOCALES.errorCaptcha,WRONG_CAPTCHA:LOCALES.errorWrongCaptcha,WRONG_CODE:LOCALES.errorWrongCode,CODE_SEND_FAILED:LOCALES.errorCodeSendFailed,CODE_NOT_SENT:LOCALES.errorCodeNotSent,CODE_EXPIRED:LOCALES.errorCodeExpired,CODE_BLOCKED:LOCALES.errorCodeBlocked,CODE_CONFIRMATION:LOCALES.errorCodeConfirmation,TIMER_ERROR:LOCALES.errorTimerError,NOT_ALLOWED_SEND_TYPE:LOCALES.errorNotAllowedSendType,CHANGE_PASSWORD_ERROR:LOCALES.errorChangeOldPasswordError},templateError:e._findElem("confirmationCodeTemplateError").text(),avalibaleOptionsTemplate:e._findElem("confirmationCodeAvalibleOptionsTemplate").text(),captchaTemplate:e._findElem("confirmationCodeCaptchaTemplate").text(),timerTemplate:e._findElem("confirmationCodeTimerTemplate").text(),buttonSendCodeTemplate:e._findElem("confirmationCodeButtonSendCodeTemplate").text(),inputConfirmCodeTemplate:e._findElem("confirmationCodeInputConfirmCodeTemplate").text(),allTemplate:"",bottomTemplate:""}}});return r}),define("global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeAjax",["underscore","jquery","vendors/Backbone/Mixin"],function(e,t,n){var r=new n({},{ajaxRequest:function(e,n){var n=n||{};return new Promise(function(r,i){t.ajax({type:"POST",url:e,data:n,statusCode:{200:function(e,t,n){r(e)}},success:function(e,t,n){},error:function(e,t,n){i(e)}})})},requestConfirmationCode:function(n){var r=this,i=["captcha","deliveryOption"];if(r.props.name==="gttAuthorizationSecondStepCompleteFirst"||r.props.name==="gttAuthorizationNewPasswordChange")r.props.data.code.deliveryPath=this.editPathnameLinkForCORS(r.props.data.code.deliveryPath,SITE_URLS.my_domain_pathname),r.props.data.captcha&&(r.props.data.captcha.deliveryPath=this.editPathnameLinkForCORS(r.props.data.captcha.deliveryPath,SITE_URLS.my_domain_pathname));r.props.data.timer&&r.blockedButtonRequestConfirmationCode(),r.loadButtonGetCaptchaCode();var s=this.$el.closest("form").serializeArray(),o={};s.map(function(e){i.indexOf(e.name)!==-1&&(o[e.name]=e.value)}),o.deliveryOption!==void 0&&(r.props.deliveryOption=o.deliveryOption,r.updateTextTimer()),t.ajax({type:"POST",data:e.extend(o,r.props.exceptionsData),url:r.props.data.code.deliveryPath,crossDomain:!0,xhrFields:{withCredentials:!0},statusCode:{206:function(e,t,n){r.initTemplateCodeConfirmation(e),r.showErrorAjax(e),r.clearInputCaptchaCode()},200:function(e,t,n){r.unblockInputCodeConfirmation(),r.unloadButtonRequestConfirmationCode(),r.clearInputCaptchaCode(),r.closeErrorTooltips(),r.toggleVisibleBlock("textStatusCodeTimeSent",!0),r.toggleVisibleBlock("textRequestCodeAgain",!1),r.toggleVisibleBlock("textStatusCode",!0),r.props.data.timer&&(r.toggleVisibleBlock("blockCaptcha",!1),r.timerBlockedInputConfirmationCode(r.props.data.code.codeLifetime),r.runTimer(r.props.data.timer.blockTime))},400:function(e){var t=JSON.parse(e.responseText);r.clearAfterResponseError(),r.triggerError(t.error),r.unloadButtonRequestConfirmationCode(),t.error==="CODE_SEND_FAILED"?r.props.data.captcha?(r.reloadCaptchaCode(),r.clearInputCaptchaCode(),r.blockedButtonRequestConfirmationCode()):r.unblockInputCodeConfirmation():r.props.data.captcha&&(r.reloadCaptchaCode(),r.clearInputCaptchaCode(),r.blockedButtonRequestConfirmationCode())}}})},reloadCaptchaCode:function(){var e=this;if(!e.props.data.captcha)return;e._findElem("imgCaptchaContainer").empty();if(e.props.name==="gttAuthorizationSecondStepCompleteFirst"||e.props.name==="gttAuthorizationNewPasswordChange")e.props.data.code.deliveryPath=this.editPathnameLinkForCORS(e.props.data.code.deliveryPath,SITE_URLS.my_domain_pathname),e.props.data.captcha.deliveryPath=this.editPathnameLinkForCORS(e.props.data.captcha.deliveryPath,SITE_URLS.my_domain_pathname);var n=t("<img src="+e.props.data.captcha.deliveryPath+"?id="+e.captchaCounter+" class='captcha__background' />");e._findElem("imgCaptchaContainer").html(n),this.captchaCounter++},addParametersForResponseConfirmCode:function(){this.props.name==="gttMyClientSaveSecuritySettingsPayment"&&(this.props.exceptionsData=e.extend(this.props.exceptionsData,{setting_name:"notification_payment"})),this.props.name==="gttMyClientSaveSecuritySettingsAuthSuccess"&&(this.props.exceptionsData=e.extend(this.props.exceptionsData,{setting_name:"notification_auth_success"})),this.props.name==="gttPaymentGetServerFields"&&(this.props.exceptionsData=e.extend(this.props.exceptionsData,{payment_token:this.$el.data("payment")}))},sendGttAuthorizationResetChangeForm:function(e,t){var n=this,r=JSON.parse(e);n.ajaxRequest(r,t).then(function(t){n.props.data=t,n.initTemplateCodeConfirmation(t),n.$el.closest(".popup").trigger("click"),n.gttAuthorizationResetChangeForm(e)}).catch(function(e){console.dir(e)})},sendGttRegistrationRegisterForm:function(e){var t=this,e=JSON.parse(e),n=t.props.exceptionsData;t.ajaxRequest(e,n).then(function(e){t.props.data=e,t.initTemplateCodeConfirmation(e),t.$el.closest(".popup").trigger("click")}).catch(function(e){console.dir(e)})}});return r}),define("global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeExclusionForms",["underscore","jquery","vendors/Backbone/Mixin"],function(e,t,n){var r=new n({},{gttAuthorizationResetChangeForm:function(e){var n=this,r=t("form[name='reset_password']"),i=r.find("input[name='account']"),s=n.props.exceptionsData;i.on("focusout",function(){var o=t(this);i=r.find("input[name='account']"),s[o.attr("name")]=i.val(),n.validateFieldInputOnEmpty(s.account)===!0&&n.sendGttAuthorizationResetChangeForm(e,s)})},gttRegistrationRegisterForm:function(e){var n=this,r=t("form[name='first']"),i=r.find("input[name$='mobile_phone']"),s=i.attr("name"),o=r.find("input[name$='email']"),u=o.attr("name"),a=r.find("input[name='client_type']").val(),f=n.props.exceptionsData;n.props.client_type=f.client_type=a,i.on("focusout",function(){var r=t(this);f[s]=r.val(),n.props.phone="+"+r.val(),n.validateFieldInputOnEmpty(f[s],f[u])===!0&&n.sendGttRegistrationRegisterForm(e)}),o.on("focusout",function(){var r=t(this);f[u]=r.val(),n.props.email=r.val(),n.validateFieldInputOnEmpty(f[s],f[u])===!0&&n.sendGttRegistrationRegisterForm(e)})}});return r}),define("global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeValidation",["underscore","jquery","vendors/Backbone/Mixin"],function(e,t,n){var r=new n({},{inputMainCodeValidation:function(e){var t=this;e=e||event;if(e.ctrlKey||e.altKey||e.metaKey)return;var n=t.getCharInputMainCode(e);if(n==null)return;return t.props.data.code.codeValidation.codeAlphabet.indexOf(n)!==-1},getCharInputMainCode:function(e){return e.which==null?e.keyCode<32?null:String.fromCharCode(e.keyCode):e.which!=0&&e.charCode!=0?e.which<32?null:String.fromCharCode(e.which):null},validateFieldInputOnEmpty:function(){var e=Array.prototype.slice.call(arguments,0);return e.some(function(e){return e!==""})},isValidInputConfirmationCode:function(){var e=this,t=this._findElem("confirmCodeInput")[0];if(t==void 0){e.props.isValidInputConfirmationCode=!0;return}if(t.value=="")return e.props.isValidInputConfirmationCode=!1,!1;var n=t.value,r=e.props.data.code.codeValidation.length;return e.props.isValidInputConfirmationCode=n.split("").some(function(t){return toString(e.props.data.code.codeValidation.codeAlphabet).indexOf(t)===-1}),n.length!==r?e.props.isValidInputConfirmationCode=!1:e.props.isValidInputConfirmationCode=!0,e.props.isValidInputConfirmationCode}});return r}),define("global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeError",["underscore","jquery","vendors/Backbone/Mixin"],function(e,t,n){var r=new n({},{showErrorAjax:function(e){this.clearAfterResponseError(),this.triggerError(e.error)},clearAfterResponseError:function(){this.blockInputCodeConfirmation(),this.clearInputCodeConfirmation(),this.closeErrorTooltips()},triggerError:function(t,n){this.closeErrorTooltips();var r=Object.keys(this.props.textError);if(t==="TIMER_ERROR")return;if(r.indexOf(t)!==-1){var i=e.template(this.props.templateError,{errorText:this.props.textError[t]});this.$el.find(this.props.blockError[t]).append(i)}else{var i=e.template(this.props.templateError,{errorText:LOCALES.errorUnknownError});this.$el.find(this.props.blockError.NOT_ALLOWED_SEND_TYPE).append(i)}}});return r}),define("global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeTemplate",["underscore","jquery","vendors/Backbone/Mixin"],function(e,t,n){var r=new n({},{_selectors:function(){return e.defaults({textStatusCodeTimeSentText:"#js-text-status-code-time-sent-text"},this._super())},initializeBlockConfirmationBlock:function(){this.props.isValidInputConfirmationCode=!1,this.initTemplateCodeConfirmation(this.props.data)},setPropsData:function(){var e=this;e.props.allTemplate=""},buildTemplate:function(t){var n=this;if(t.info!==void 0){t.checksum!==n.props.data.checksum&&n.buildTemplate(t.info);return}if(t.code!==void 0){n.props.data={},n.props.data.code=t.code,n.props.data.checksum=t.checksum,n.props.data.infoPath=t.infoPath,t.code.deliveryProtection.timer&&(n.props.isTimeRun=t.code.deliveryProtection.timer.remainingTime>0?!0:!1),n.avalibaleOptionsTemplateCompiled(t.code),n.setHtmlCaptchaForTemplate(t.code.deliveryProtection);var r={captcha:t.code.deliveryProtection.captcha,timer:t.code.deliveryProtection.timer,code:t.code};switch(mode){case"mobile":n.buttonSendCodeAndInputConfirmCodeTemplateCompiledForMobile(e.extend({},r)),n.setHtmlTimerForTemplate(t.code);break;case"full":n.buttonSendCodeAndInputConfirmCodeTemplateCompiledForDesktop(e.extend({},r));break;default:n.buttonSendCodeAndInputConfirmCodeTemplateCompiledForMobile(e.extend({},r)),n.setHtmlTimerForTemplate(t.code)}return}t.captcha!==void 0&&n.setHtmlCaptchaForTemplate(t),t.timer!==void 0&&n.setHtmlTimerForTemplate(t)},setHtmlCaptchaForTemplate:function(t){t.captcha!==void 0&&(this.props.data.captcha=e.extend({},t.captcha),this.captchaTemplateCompiled(e.extend({},{captcha:t.captcha,timer:t.timer,captchaCounter:this.captchaCounter})))},setHtmlTimerForTemplate:function(t){if(t.deliveryProtection.timer==void 0)return;t.codeDeliveredVia!==""&&(this.props.deliveryOption=t.codeDeliveredVia),this.props.data.timer=e.extend({},t.deliveryProtection.timer),this.timerTemplateCompiled(e.extend({},{timer:t.deliveryProtection.timer,phone:this.props.phone}))},avalibaleOptionsTemplateCompiled:function(t){var n=this;return n.props.allTemplate+=e.template(n.props.avalibaleOptionsTemplate,t),n},timerTemplateCompiled:function(t){var n=this;return n.props.allTemplate+=e.template(n.props.timerTemplate,t),n},captchaTemplateCompiled:function(t){var n=this;return n.props.allTemplate+=e.template(n.props.captchaTemplate,t),n},buttonSendCodeTemplateCompiled:function(t){var n=this;return n.props.allTemplate+=e.template(n.props.buttonSendCodeTemplate,t),n},inputConfirmCodeTemplateCompiled:function(t){var n=this;return n.props.allTemplate+=e.template(n.props.inputConfirmCodeTemplate,t),n},buttonSendCodeAndInputConfirmCodeTemplateCompiledForMobile:function(e){var t=this;t.props.allTemplate+='<div class="confirmation-code__buttons-container">',t.buttonSendCodeTemplateCompiled(e),t.inputConfirmCodeTemplateCompiled(e.code),t.props.allTemplate+="</div>"},buttonSendCodeAndInputConfirmCodeTemplateCompiledForDesktop:function(e){var t=this;t.props.allTemplate+='<div class="confirmation-code__buttons-container">',t.buttonSendCodeTemplateCompiled(e),t.setHtmlTimerForTemplate(e.code),t.inputConfirmCodeTemplateCompiled(e.code),t.props.allTemplate+="</div>"},updateTextTimer:function(){var e=this,t="";e.props.deliveryOption==="sms"||e.props.deliveryOption==="call"?e.props.phone?t=LOCALES.statusCodeSentsms.replace("%phone%",e.props.phone):t=LOCALES.statusCodeSentNoPhone:e.props.deliveryOption==="email"?t=LOCALES.statusCodeSentemail.replace("%email%",e.props.email):e.props.deliveryOption==="telegram"?t=LOCALES.statusCodeSenttelegram:t=LOCALES.statusCodeSentsms.replace("%phone%","."),e._findElem("textStatusCodeTimeSentText").text(t)}});return r}),define("global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeInit",["underscore","BackboneX","PromisePolyfill","./DynamicBlockConfirmationCodeProps","./DynamicBlockConfirmationCodeAjax","./DynamicBlockConfirmationCodeExclusionForms","./DynamicBlockConfirmationCodeValidation","./DynamicBlockConfirmationCodeError","./DynamicBlockConfirmationCodeTemplate"],function(e,t,n,r,i,s,o,u,a){window.Promise||(window.Promise=n);var f=t.View.mix(r,i,s,o,u,a).extend({_classes:function(){return e.defaults({hidden:"hidden"},this._super())},_selectors:function(){return e.defaults({jsonDataGet:".js-json-data-get",buttonSendCodeNew:".js-button-send-code-new",reloadCaptchaCode:".js-reload-captcha-code",confirmCodeInput:".js-confirm-code-input",inputCaptchaCode:".js-input-captcha-code",closeTooltip:".js-close-tooltip",errorTooltip:".js-error-tooltip",textStatusCodeTimeSent:".js-text-status-code-time-sent",textRequestCodeAgain:".js-text-request-code-again",textStatusCode:".js-text-status-code",blockCaptcha:".js-block-captcha",imgCaptchaContainer:".js-container-img-captcha"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("buttonSendCodeNew")]=this.requestConfirmationCode,e["click "+this._selector("reloadCaptchaCode")]=this.reloadCaptchaCode,e["keypress "+this._selector("confirmCodeInput")]=this.inputMainCodeValidation,e["click "+this._selector("closeTooltip")]=this.closeTooltip,e},closeTooltip:function(e){$(e.currentTarget).closest(this._selector("errorTooltip")).detach()},closeErrorTooltips:function(){this._findElem("errorTooltip").detach()},unblockInputCodeConfirmation:function(){var e=this._findElem("confirmCodeInput");e.parent().parent().removeClass("input_disabled_yes"),e.removeProp("readonly"),e.focus()},blockedButtonRequestConfirmationCode:function(){var e=this._findElem("buttonSendCodeNew");e.addClass("button_disabled_yes"),e.attr("disabled","disabled")},unblockedButtonRequestConfirmationCode:function(){var e=this._findElem("buttonSendCodeNew");e.removeClass("button_disabled_yes"),e.removeProp("disabled")},unloadButtonRequestConfirmationCode:function(){var e=this._findElem("buttonSendCodeNew");e.removeClass("button_status_loading")},loadButtonGetCaptchaCode:function(){var e=this._findElem("buttonSendCodeNew");e.addClass("button_status_loading")},clearInputCaptchaCode:function(){this._findElem("inputCaptchaCode").val("")},emptyBlockConfirmationBlock:function(){this.props.isValidInputConfirmationCode=!0,this.$el.html("")},blockInputCodeConfirmation:function(){var e=this._findElem("confirmCodeInput");e.parent().parent().addClass("input_disabled_yes"),e.attr("readonly",""),e.focusout()},clearInputCodeConfirmation:function(){var e=this._findElem("confirmCodeInput");e.val("")},editPathnameLinkForCORS:function(e,t){var n=document.createElement("a");return n.href=e,t+n.pathname},toggleVisibleBlock:function(e,t){t===!0?this._findElem(e).removeClass("hidden"):this._findElem(e).addClass("hidden")},initialize:function(){var e=this;e._super();if(this.$el.find(this._selector("jsonDataGet")).length){e.$el=e._elem("jsonDataGet");var t=e.$el.data("props"),n=e.$el.closest("form"),r=n.attr("name");if(e.props.namesFormsExceptionsToggleHideBlock.indexOf(r)!==-1){e.listenRadioChange();if(n.find(":radio[name='type']:checked").attr("value")==="document")return e.emptyBlockConfirmationBlock()}e.props.name=e.$el.data("name-confirmation"),e.props.data=t,e.addParametersForResponseConfirmCode();if(e.props.namesFormsExceptions.indexOf(e.props.name)===-1)try{e.props.phone=e.$el.data("props-phone"),e.initTemplateCodeConfirmation(t)}catch(i){console.error(i)}else{e.props.name==="gttRegistrationRegister"&&e.gttRegistrationRegisterForm(t),e.props.name==="gttRegistrationRegisterMobile"&&e.gttRegistrationRegisterForm(t);if(e.props.name==="gttAuthorizationResetChange"){e.gttAuthorizationResetChangeForm(t);var n=$("form[name='reset_password']"),s=n.find("input[name='account']");s.trigger("focusout")}}}},initTemplateCodeConfirmation:function(e){var t=this;t.setPropsData(),t.buildTemplate(e),t.render(),Object.keys(t.props.data.code.deliveryProtection).indexOf("captcha")!=-1&&t.reloadCaptchaCode()},render:function(){var e=this;return e.$el.html(e.props.allTemplate),e.listenerValidationFileds(),e.listenerDeliveryOptions(),e.$el.find($("[data-translate-text]")).map(function(t,n){$(n).text(e.props.translate[$(n).data("translate-text")]),t===0&&$(n).prev().attr("checked","checked")}),e.updateTextTimer(),e.props.data.timer&&e.props.data.timer.remainingTime!==0&&e.runTimer(e.props.data.timer.remainingTime),e.props.data.code&&e.timerBlockedInputConfirmationCode(e.props.data.code.codeExpiresIn),e},listenerValidationFileds:function(e){var t=this,n=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9_\-.,\^!@#\$%&*();"\'+=\[\]:\/\\\?|`\~\{\}]{8,}$/,r=/^([a-z0-9\+_\-]+)(\.[a-z0-9\+_\-]+)*@([a-z0-9\-]+\.)+[a-z]{2,6}$/,i=t.$el.closest(".form").find("input[type='password'], input[type='text'], input[name='email']").not(t._selector("confirmCodeInput")+", [name='documentNumber'], [name='templateName'], [name='is_newsletter_allowed'], input[name='partner_id']"),s=t.$el.closest(".form").find("div[data-input-type='SelectInput'] .select__text");i.off().on("keyup",function(e){var i=[],s=t.$el.closest(".form"),o=s.data("form-name"),u=s.not("[name='transfersNotify']").find("[data-input-type='SelectInput'] .select__text")[0]!==void 0?s.find("[data-input-type='SelectInput'] .select__text")[0].childNodes[0].nodeType:void 0,a=s.find("input[type='password'], input[type='text']").not(t._selector("confirmCodeInput")+", [name='documentNumber'], [name='templateName'], input[name='partner_id']");if(o==="changingPass"||o==="changingPhonePass")n=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9]{6,15}$/;var f=s.find($("input[type='password'][name='password']")),l=f.val(),c=s.find($("input[type='password'][name='password_confirm']")).val();l!==void 0&&(l.search(n)===0?i[i.length]=!1:i[i.length]=!0);var h=s.find($("input[name='email']")),p=h.val();p!==void 0&&(p.search(r)===0?i[i.length]=!1:i[i.length]=!0),i[i.length]=Array.prototype.some.call(a,function(e){return e.value===""}),u!==void 0&&(u===3?i[i.length]=!1:i[i.length]=!0),l!==void 0&&c!==void 0&&(l===c?i[i.length]=!1:i[i.length]=!0);var d=i.some(function(e){return e===!0});if(t.props.isTimeRun===!0)return!1;d===!1?t.unblockedButtonRequestConfirmationCode():t.blockedButtonRequestConfirmationCode()}),s.off().on("DOMNodeInserted",function(e){i.trigger("keyup")}),i.length===0&&s.length===0&&t.props.isTimeRun===!1?t.unblockedButtonRequestConfirmationCode():t.blockedButtonRequestConfirmationCode(),i.trigger("keyup")},listenRadioChange:function(){var e=this,t=this.$el.closest("form");t.find(":radio[name='type']").on("change",function(t){var n=$(t.target)[0],r=n.value;r==="code"?e.initializeBlockConfirmationBlock():r==="document"&&e.emptyBlockConfirmationBlock()})},listenerDeliveryOptions:function(){var e=this,t=e.$el.closest("form");if(e.props.data.code===void 0)return;e.props.deliveryOption=e.props.data.code.availableOptions[0],t.find(":radio[name='deliveryOption']").off().on("change",function(t){e.props.deliveryOption=$(t.target)[0].value,e._findElem("confirmCodeInput").val("")})},runTimer:function(e){var t=this;t.props.isTimeRun=!0,(new Promise(function(n,r){t.timeLeft(e,t.$el.find(".jsOverTime"),n),Object.keys(t.props.data.code.deliveryProtection).indexOf("captcha")!=-1&&t.reloadCaptchaCode()})).then(function(e){t.props.isTimeRun=!1,t.toggleVisibleBlock("textStatusCodeTimeSent",!1),t.toggleVisibleBlock("textRequestCodeAgain",!0),t.toggleVisibleBlock("blockCaptcha",!0),t.props.data.hasOwnProperty("captcha")||(t.listenerValidationFileds(),t.listenerDeliveryOptions())}).catch(function(e){console.log(e)})},timeLeft:function(e,t,n){function l(){var e=r/i/o<<0,a=r/i%o;e<s?u="0"+e:u=e,a<s?u+=":0"+a:u+=":"+a,t.html(LOCALES.youCanRequestCodeAgain.replace("%timeout%",u)),e===0&&a===0&&(clearTimeout(f),n()),r-=i}if(e===0)return;var r=e*1e3,i=1e3,s=10,o=60,u,a=this,f=setInterval(l,i)},triggerSuccessEdit:function(e){var t=this,n=["telegramNotifyEnable"],r=t.$el.closest("form").attr("name");n.indexOf(r)===-1?t.ajaxRequest(t.props.data.infoPath,t.props.exceptionsData).then(function(e){t.props.data=e,t.initTemplateCodeConfirmation(e),t.$el.closest(".popup").trigger("click")}).catch(function(e){console.dir(e)}):(t.unblockInputCodeConfirmation(),t.clearInputCaptchaCode(),t.toggleVisibleBlock("textStatusCodeTimeSent",!0),t.toggleVisibleBlock("textRequestCodeAgain",!1),t.toggleVisibleBlock("textStatusCode",!0),t.props.data.timer&&(t.toggleVisibleBlock("blockCaptcha",!1),t.runTimer(t.props.data.timer.blockTime)))},timerBlockedInputConfirmationCode:function(e){var t=this,n=new Promise(function(n){t.timerPromiseConfirmationCode(n,e)});n.then(function(e){t.blockInputCodeConfirmation()}).catch(function(e){console.log(e)})},timerPromiseConfirmationCode:function(e,t){clearTimeout(this.timerIdConfirmationCode),this.timerIdConfirmationCode=setTimeout(function(){e("Done")},t*1e3)}});return f}),define("global_forms/Form/FormView",["BackboneX","underscore","./FormModel","global_forms/Fields/fieldFactory","global_forms/Form/DynamicBlockConfirmationCodeForForm/DynamicBlockConfirmationCodeInit"],function(e,t,n,r,i){var s=e.View.extend({classDynamicConfirmationCode:{},_ModelConstructor:n,_submitName:"send",_classes:function(){return t.defaults({field:"js-form-el-field",jsonDataGet:"js-json-data-get"},this._super())},initialize:function(){this._super(),this._fields=[],this.model=null,this._submitStarted=!1,this._initModel(),this._initFieldsInside(this.$el),this._initHandlers(),this._initValidation(),this._handleWindowUnload(),this.model.eachField(function(e){e.validate()}),this.$el.find(this._selector("jsonDataGet")).length&&(this.classDynamicConfirmationCode=new i({el:this.$el}))},_handleWindowUnload:function(){this.$el.attr("autocomplete")!=="off"&&this._$window.on("unload",this._onWindowUnload)},_onWindowUnload:t.method.bind(function(){this.enableSubmitButton()}),_initHandlers:function(){this.$el.submit(this._submit.bind(this)).on("reset",this._reset.bind(this))},_initModel:function(){var e=this.options.model||{},t=e.Constructor||this._ModelConstructor;this.model=new t(this._getModelOptions()),e.fieldsConfiguration&&this.model.setFieldsConfiguration(e.fieldsConfiguration),this.model.on("reset",this._onReset,this).formFields.on("remove",this._onFieldRemove,this)},_getModelOptions:function(){return{name:this._data.formName||this._data.name||this.$el.attr("name")||this.$el.prop("name")||this.options.name||"",action:this.$el.attr("action")||this.options.action||"/",method:this.$el.attr("method")||this.options.method||"POST"}},_initValidation:function(){this._initStatusConditions()},_initStatusConditions:function(){this.eachField(this._initFieldStatusConditions,this)},_initFieldStatusConditions:function(e){e.initStatusConditions().status.ignore("not-empty")},_initFieldsInside:function(e){return t(this._getFields(e)).each(this._initField,this),this},initFieldsInside:function(e){return this._resetFieldsCache(),this.model.resetFieldsCache(),this._initFieldsInside(e)},_initField:function(e){var t=r.createInstance(e);return this.model.addField(t.model),this._fields.push(t),t},initField:function(e){return this._resetFieldsCache(),this.model.resetFieldsCache(),this._initField(e)},_getFields:function(e){return e.hasClass(this._class("field"))?e:e.find(this._selector("field"))},getFieldsHashInside:function(e){var t={};return this.getFieldsInside(e).forEach(function(e){t[e.model.get("name")]=e}),t},getFieldsInside:function(e){var t=this._fields;return e!==undefined&&(t=t.filter(function(t){return e.has(t.el).length})),t},getFirstField:function(){return this._fields[0]},getField:t.method.memoize(function(e){return t(this._fields).find(function(t){return t.model.get("name")===e})||null}),_onFieldRemove:function(e){this._removeField(e.get("name"))},_removeField:function(e){var t=this.getField(e),n=this._fields.indexOf(t);this._fields.splice(n,1),this._resetFieldsCache()},_resetFieldsCache:function(){this._reWrapMethod("getField")},_reset:function(e){e.preventDefault(),this.model.reset()},_submit:function(e){this._stopIgnoring("not-empty"),this._submitStarted=!1;if(!$.isEmptyObject(this.classDynamicConfirmationCode)){var t=!0,n=this.getField("smsNotify")!==null?this.getField("smsNotify").model.getStringValue():"",r=this.$el.closest("form").attr("name");(n==="off"&&r==="transfersNotify"||r!=="transfersNotify")&&this.classDynamicConfirmationCode!==void 0&&this.classDynamicConfirmationCode.isValidInputConfirmationCode()===!1&&(this.classDynamicConfirmationCode.closeErrorTooltips(),this.classDynamicConfirmationCode.triggerError("CODE_CONFIRMATION"),t=!1),this.checkFieldsBefore()&&(e.preventDefault(),t=!1);if(!t)return}else{var t=!0;this.checkFieldsBefore()&&(e.preventDefault(),t=!1);if(!t)return}this.trigger("submit",e,this),this._beforeSendForm()},_stopIgnoring:function(e){this.eachField(function(t){t.status.stopIgnoring(e)})},_beforeSendForm:function(){this._submitStarted=!0,this._loadSubmitButton()},_loadSubmitButton:function(){var e=this.getField(this._submitName);e&&e.load()},enableSubmitButton:function(){var e=this.getField(this._submitName);return e&&e.enable(),this},disableSubmitButton:function(){var e=this.getField(this._submitName);return e&&e.disable(),this},submit:function(){return this.$el.submit(),this},eachField:function(e,t){return this._fields.forEach(e,t),this},focus:function(){var e=t(this._fields).find(function(e){return e.isVisible()});return e&&e.focus(),this},focusToFirstErrorField:function(){return this._fields.some(function(e){return!e.model.isValidationAllowed()||e.model.isValid()?!1:(e.focusInvalidInput(),!0)}),this},checkFieldsBefore:function(e){var t=!1,n;return this._fields.some(function(r){return r.model.get("name")===e?!0:r.model.isValidationAllowed()?(r.model.isValid()||(t=!0,n||(n=r)),r.status.show("check"),!1):!1}),n&&(n.focusInvalidInput(),n.status.show("checkFirstField")),t},_onReset:function(){return this.eachField(function(e){e.status.hide().reset()}),this._initStatusConditions(),this},showFieldError:function(e,t){var n=this.getField(e);return n&&(n.setValidationStatus(!1,t),n.isFocused()?n.status.show("focus"):n.focusInvalidInput(),this.model.once("reset",function(){n.model.validate()})),this}});return s}),define("global/elements/DataList/Filters/Form/FilterFormModel",["global_forms/Form/FormModel"],function(e){var t=e.extend({_getFieldsConfiguration:function(){return{}}});return t}),define("global/elements/DataList/Filters/Form/FilterFormView",["global_forms/Form/FormView","./FilterFormModel"],function(e,t){var n=e.extend({_ModelConstructor:t});return n}),define("global/elements/DataList/Filters/Form/FormFilterView",["underscore","../../Filters/AbstractFilterView","./FormFilterModel","./FilterFormView"],function(e,t,n,r){var i=t.extend({_ModelConstructor:n,_FormConstructor:r,_classes:function(){return e.defaults({form:"js-form-filter"},this._super())},_initProperties:function(){this._super(),this._form=null},initialize:function(){this._super(),this._initForm(),this._setFormFieldsToFilter(),this.model.on("change",this._onFilterStateChange,this)},_initForm:function(){var t=this.$el.hasClass(this._class("form"))?this.$el:this._elem("form"),n;n=this.options.FormClass||this._FormConstructor,this._form=new n(e.defaults({el:t},this.options.formOptions)),this.model.setForm(this._form.model),this._form.on("submit",this._onFormSubmit,this).model.on("reset",this._onFormReset,this),this._data.filterOnFieldsChange&&this._form.model.formFields.on("change:value",this._onFormFieldChange,this)},getForm:function(){return this._form},_setFormFieldsToFilter:function(){this.model.clear({silent:!0}).set(this._form.model.formFields.serialize())},_onFormSubmit:function(e){e.preventDefault(),this._filter()},_onFormReset:function(){this._filter()},_onFormFieldChange:function(){this._filter()},_filter:function(){if(this._form.checkFieldsBefore())return;this._setFormFieldsToFilter(),this.model.filter()},_onFilterStateChange:function(){e(this.model.getQueryParams()).each(function(e,t){var n=this._form.getField(t);n&&n.model.value(e)},this)},updateOnResponseComplete:function(){this._form.enableSubmitButton()}});return i}),define("global/elements/DataList/dataListFilterFactory",["underscore","global/Factories/Factory","./Filters/AbstractFilterView","./Filters/Form/FormFilterView"],function(e,t,n,r){var i=t.extend({_products:function(){return e.defaults({"*":n,FormFilter:r},this._super())},_getSuitableProductDescriptor:function(e){var t=e.data("filterType");return this._productDescriptors[t]||this._productDescriptors["*"]}});return new i}),define("global/elements/Visibility/VisibilityShowable",["underscore"],function(e){var t={_classes:function(){return e.defaults({hidden:"hidden"},this._super())},toggleVisibility:function(e){var t=!this.$el.hasClass(this._class("hidden"));return typeof e=="undefined"?this.toggleVisibility(!t):(e!=t&&(this.$el.toggleClass(this._class("hidden"),!e),this.trigger("change:visibility",e)),this)},show:function(){return this.toggleVisibility(!0),this},hide:function(){return this.toggleVisibility(!1),this}};return t}),define("mobile/elements/Pagination/Paginator",["underscore","BackboneX","global/elements/Visibility/VisibilityShowable"],function(e,t,n){var r=t.View.mix(n).extend({_selectors:function(){return e.defaults({prevPage:".paginator__prev",nextPage:".paginator__next",currentPage:".paginator__current",pagesCount:".paginator__items"},this._super())},_classes:function(){return e.defaults({disabled:"paginator_disabled_yes",disabledButton:"paginator__button_disabled_yes"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("prevPage")]=this._onClickPrevPage,e["click "+this._selector("nextPage")]=this._onClickNextPage,e},_initProperties:function(){this._super(),this._currentPage=1,this._pagesCount=this._data.pagesCount},getCurrentPage:function(){return this._currentPage},setPagesCount:function(e){return this._currentPage>e&&this.setCurrentPage(e),this._pagesCount===e?this:(this._pagesCount=e,this._elem("pagesCount").text(e),this._onPagesChanges(),this)},_onPagesChanges:function(){this._checkButtonsState()},setData:function(e){return e.totalCount?(this.setPagesCount(e.perPage>0?Math.ceil(e.totalCount/e.perPage)||1:1),this.setCurrentPage(e.page||1),this.show(),this):(this.hide(),this)},_onClickPrevPage:function(){if(this._currentPage<=1)return;this.setCurrentPage(this._currentPage-1)},_onClickNextPage:function(){if(this._currentPage>=this._pagesCount)return;this.setCurrentPage(this._currentPage+1)},setCurrentPage:function(e){return e==this._currentPage?this:(this._currentPage=e,this._elem("currentPage").text(e),this._onPagesChanges(),this.trigger("showPage",this._currentPage),this)},_checkButtonsState:function(){var e=this._class("disabledButton");this._currentPage===1?this._elem("prevPage").addClass(e):this._elem("prevPage").removeClass(e),this._currentPage===this._pagesCount?this._elem("nextPage").addClass(e):this._elem("nextPage").removeClass(e),this._toggleClass("disabled",this._pagesCount<2)}});return r}),define("global/elements/DataList/Filters/Pagination/PaginationFilterModel",["global/elements/DataList/Filters/AbstractFilterModel"],function(e){var t=e.extend({_initProperties:function(){this._super(),this._name="pagination"}});return t}),define("global/elements/DataList/Filters/Pagination/PaginationFilterView",["jquery","underscore","global/elements/DataList/Filters/AbstractFilterView","global/elements/Pagination/Paginator","./PaginationFilterModel"],function(e,t,n,r,i){var s=n.extend({_ModelConstructor:i,_Paginator:r,_classes:function(){return t.defaults({paginator:"paginator"},this._super())},_initProperties:function(){this._super(),this._paginator=null,this._updatingFromResponse=!1},initialize:function(){this._super(),this._initPaginator(),this.setPage(this._paginator.getCurrentPage()),this.model.on("change:page",this._onFilterPageChange,this)},show:function(){this._paginator.show()},hide:function(){this._paginator.hide()},setPage:function(e,t){t=t||{},this.model.set("page",e,t)},_initPaginator:function(){this._paginator=new this._Paginator({el:this.$el.hasClass(this._class("paginator"))?this.$el:this._elem("paginator")}),this._paginator.on("showPage",this._onPageShow,this).on("change:visibility",this._onPaginatorVisibilityChange,this)},_onPageShow:function(e){var t;this._updatingFromResponse&&(t={silent:!0}),this.setPage(e,t)},_onFilterPageChange:function(){var e=this.model.get("page");this._paginator.setCurrentPage(e)},updateFromResponse:function(t){this._super(t),this._updatingFromResponse=!0;var n=e(t).data();return this._paginator.setData(n),this._updatingFromResponse=!1,this},_onPaginatorVisibilityChange:function(e){this.trigger("change:visibility",e)}});return s}),define("mobile/elements/DataList/dataListFilterFactory",["global/elements/DataList/dataListFilterFactory","global/elements/DataList/Filters/Pagination/PaginationFilterView"],function(e,t){return e.addProduct("Pagination",t),e}),define("global/elements/Queries/QueryError",["BackboneX","underscore"],function(e,t){function r(e,t){return t.reduce(function(e,t,n,r){if(e)return e[t];r.length=n},e)}var n="*",i=function(e){var t=new Error('Ajax query error. Status: "'+e.error.status+'", code: "'+(e.error.code||"")+'", message: "'+(e.error.message||"")+'"');for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message,this.options=e,this._initProperties(),this.initialize(e)};i.prototype=Object.create(Error.prototype),t.extend(i.prototype,e.Events,{_initProperties:function(){var e=this.options.error;this._status=e.status,this._code=e.code,this._message=e.message,this._MASK=n},initialize:function(e){this._processError()},_getErrorHandler:function(e,n,r){var i=this._MASK,s;return t([[e,n,r],[i,n,r],[e,i,r],[i,i,r],[e,n,i],[i,n,i],[e,i,i],[i,i,i]]).some(function(e){return s=this._findErrorHandler(e),s},this),s},_processError:function(){var e=this._getErrorHandler(this._status,this._code,this._message);if(typeof e!="function")throw this;e.call(this,this._status,this._code,this._message)},_findErrorHandler:function(e){return this._walkThroughProperties(this._buildWay.apply(this,e))},_buildWay:function(e,t,n){return["_statuses",e,t,n]},_walkThroughProperties:function(e){return r(this,e)},_statuses:{},_codes:{},_messages:{}});var s=function(e,n,r,i){var s;typeof e[n]=="function"&&(s=e[n],e[n]={},e[n][r]=s),e[n]?t.extend(e[n],i||{}):e[n]=i||{}};return i.extend=function(i,o){var u=i._statuses,a=i._messages,f=i._codes,l=this.prototype._statuses;return u=u||{},f&&s(u,n,n,f),a&&(u[n]||s(u,n,n),s(u[n],n,n,a)),t.each(u,function(e,i){s(u,i,n,e),t.each(u[i],function(e,o){s(u[i],o,n,e),t.defaults(u[i][o],r(l,[i,o]))},this)},this),t.each(l,function(e,r){u[r]=u[r]||{},t.each(l[r],function(e,t){u[r][t]=u[r][t]||{},s(u[r],t,n,e)},this)},this),i._statuses=u,e.Model.extend.call(this,i,o)},i.mix=e.Model.mix,i.mixArguments=e.Model.mixArguments,i}),define("mobile/elements/Queries/AjaxError",["global/elements/Queries/QueryError","mobile/FormClasses/Hints/hintsHolder"],function(e,t){var n=e.extend({_statuses:{"*":function(){window.alert(t.get("unknown"))},0:function(){},206:function(e,n){var r=["CODE_NOT_SENT","CODE_EXPIRED","CODE_BLOCKED","CAPTCHA","WRONG_CAPTCHA","WRONG_CODE"];r.indexOf(n)===-1&&window.alert(t.get("unknown"))},400:function(e,n){var r=["CODE_SEND_FAILED","NOT_ALLOWED_SEND_TYPE"];r.indexOf(n)===-1&&window.alert(t.get("unknown"))}}});return n}),define("global_forms/Form/Ajax/AjaxFormError",["global/elements/Queries/AjaxError"],function(e){var t=e.extend({_initProperties:function(){this._super(),this._form=this.options.form}});return t}),define("global/elements/Loader",["underscore","BackboneX"],function(e,t){var n=t.View.extend({_classes:function(){return e.defaults({active:"loader_active_yes",state:"loader_state_%s"},this._super())},_selectors:function(){return e.defaults({reloadButton:".js-reload"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("reloadButton")]=this._onReloadButtonClick,e},_initProperties:function(){this._super(),this._avaliableStates=["loading","fail"],this._statesClasses=""},initialize:function(){this._super(),this._initStates()},_initStates:function(){this._statesClasses=this._avaliableStates.map(function(e){return this._class("state",e)},this).join(" ")},_onReloadButtonClick:function(){this.trigger("reload")},showLoading:function(){return this._showState("loading")},showFail:function(){return this._showState("fail")},_showState:function(e){return this.$el.removeClass(this._statesClasses).addClass(this._class("state",e)).toggleClass(this._class("active"),!0),this},hide:function(){return this._removeClass("active"),this}});return n}),define("global/elements/DataList/FilteredDataListView",["jquery","BackboneX","underscore","global/elements/Visibility/VisibilityListener","./FilteredDataListModel","./dataListFilterFactory","global_forms/Form/Ajax/AjaxFormError","global/elements/Loader"],function(e,t,n,r,i,s,o,u){var a=t.View.mix(r).extend({_classes:function(){return n.defaults({filter:"js-data-list-filter",content:"js-data-list-content",fetchStatus:"loader",fetchStatusHolder:"loader__holder_type_%s"},this._super())},_ModelConstructor:i,model:null,_initProperties:function(){this._super(),this._listFilters=[],this._fetchDeferred=!1,this._hasEmptyContent=!1,this._preventHideFetchStatus=!1,this._loader=null,this._filtersConfig=this.options.filtersConfig||{}},initialize:function(){this._super(),this._initLoader(),this._initModel(),this._initFilters(),this._initFetchDeferred()},_initModel:function(){this.model=new this._ModelConstructor,this.model.setUrl("fetch",this._data.fetchUrl),this.model.on("fetch:request",this._onFetchRequest,this).on("fetch:success",this._onFetchSuccess,this).on("fetch:error",this._onFetchError,this).on("fetch:complete",this._onFetchComplete,this)},_initFilters:function(){n(this._elem("filter")).each(this._initFilter,this)},_initFilter:function(t){var n,r=this._filtersConfig[e(t).data("filterType")]||{};return n=s.createInstance(t,r),this._listFilters.push(n),this.model.filters.add(n.model),n},getFilter:function(e){return n(this._listFilters).find(function(t){return t.model.getName()===e})},_initFetchDeferred:function(){this._fetchDeferred=this._data.fetchDeferred||!1,this._hasEmptyContent=this._fetchDeferred,this._handleFetchDeferred()},_handleFetchDeferred:function(){this._fetchDeferred&&this.isVisible()&&this.fetch()},_initLoader:function(){this._loader=new u({el:this._elem("fetchStatus")}),this._loader.on("reload",this._onReload,this)},_onFetchSuccess:function(e){this._hasEmptyContent=!1,this.updateContent(e)},_onFetchError:function(e,t){if(t.status===0&&t.statusText==="abort")return;this._isShowFailStatus(t)?(this._setEmptyContentHolder(),this._showFetchStatus("fail"),this._preventHideFetchStatus=!0):new o({form:this,error:{status:t.status,code:e.code,message:e.message}})},_isShowFailStatus:function(e){return this._loader.$el.length&&e.status!==401},_onFetchRequest:function(){this._showFetchStatus("loading"),this._preventHideFetchStatus=!1},_onFetchComplete:function(){this._preventHideFetchStatus||this._hideFetchStatus(),this._updateFiltersOnComplete()},_showFetchStatus:function(e){var t=this._loader.$el;if(!t.length)return;var n=this._hasEmptyContent?"static":"absolute";e==="fail"?this._loader.showFail():this._loader.showLoading(),this._updateLoaderPosition(n);var r=this._findElem("fetchStatusHolder",n);t.parent().is(r)||t.prependTo(r)},_updateLoaderPosition:function(e){e==="absolute"&&this._loader.$el.css("top",this._elem("content").position().top)},_setEmptyContentHolder:function(){this._hasEmptyContent||(this._hasEmptyContent=!0,this._renderEmptyContent())},_renderEmptyContent:function(){this._elem("content").html("")},_hideFetchStatus:function(){this._loader.hide()},_onReload:function(){this.model.fetch()},updateContent:function(e){return this._updateList(e),this._updateFilters(e),this},_updateList:function(e){this._replaceElem("content",e)},_updateFilters:function(e){this._listFilters.forEach(function(t){t.updateFromResponse(e)})},_updateFiltersOnComplete:function(){this._listFilters.forEach(function(e){e.updateOnResponseComplete()})},fetch:function(){this._fetchDeferred=!1,this.model.fetch()},update:function(){return this._handleFetchDeferred(),this},addFilter:function(e){return this._initFilter(e)}});return a}),define("mobile/elements/DataList/DataListWithPaginationModel",["global/elements/DataList/FilteredDataListModel"],function(e){var t=e.extend({_initProperties:function(){this._super(),this.loaderPositionBottom=!1},initialize:function(){this._super(),this.on("fetch:complete",this._onFetchComplete,this)},_onFetchComplete:function(){var e=this.filters.getByName("pagination");e&&e.on("change:page",this._onPaginationFilterChange,this)},_onPaginationFilterChange:function(){this.loaderPositionBottom=!0},_onFilterChange:function(e){this._super(e),e.getName()!=="pagination"&&(this.loaderPositionBottom=!1,this.filters.getByName("pagination").off("change:page",this._onPaginationFilterChange,this).set("page",1))}});return t}),define("mobile/elements/DataList/DataListWithPaginationView",["underscore","global/elements/DataList/FilteredDataListView","./DataListWithPaginationModel"],function(e,t,n){var r=t.extend({_classes:function(){return e.defaults({loaderPositionBottom:"loader_position_bottom"},this._super())},_ModelConstructor:n,_showFetchStatus:function(e){this._super(e);var t=e!=="fail"&&this.model.loaderPositionBottom;this._toggleClass("loaderPositionBottom",this._loader.$el,t)},_updateLoaderPosition:function(){}});return r}),define("global/Factories/SelectorsProductDescriptor",["underscore","./ProductDescriptor"],function(e,t){var n=t.extend({defaults:function(){return e({selector:""}).defaults(this._super())},getWeight:function(){return this.get("type")=="*"?0:this.getTypes().length},getTypes:function(){return this.get("type").split(" ")}});return n}),define("global/Factories/SelectorsFactory",["underscore","./Factory","./SelectorsProductDescriptor"],function(e,t,n){var r=t.extend({_addProductDescriptor:function(e,t){var r=this._productDescriptors[t]=new n({type:t,Constructor:e}),i=this,s=t=="*"?"*":r.getTypes().reduce(function(e,t){return e+i._selector(t)},"");return r.set("selector",s),r},_generateProductOptions:function(e,t){return t.getTypes().forEach(function(t){e=this._getProductOptions(t,e)},this),e},_getSuitableProductDescriptor:function(t){var n=e(this._productDescriptors).filter(function(e){return t.is(e.get("selector"))},this);return this._getMostRelevantProductDescriptor(n)},_getMostRelevantProductDescriptor:function(t){if(!t.length)throw new Error("Element does not match any product descriptor. Factory cannot instantiate it");var n=[],r=0;t.forEach(function(e){var t=e.getWeight();t>r?(n=[e],r=t):t==r&&n.push(e)});if(n.length>1){var i=n.map(function(e){return e.get("type")}).join(", "),s=e("Ambiguous product types: %s. Change the _products method to provide unequivocal rules for creating instances").s(i);throw new Error(s)}return n[0]}});return r}),define("global/elements/Accordion/WithAccordions",["underscore","vendors/Backbone/Mixin","./accordionsFactory"],function(e,t,n){var r=new t({_classes:function(){return e.defaults({accordion:"accordion"},this._super())},_initProperties:function(){this._super(),this._accordions=[]},initialize:function(){this._super(),this._initAccordions()},_initAccordions:function(){var e=this._accordions;this._elem("accordion").each(function(){var t=n.createInstance(this);e.push(t)})},getAccordionByName:function(t){return e(this._accordions).find(function(e){return e.name===t})}});return r}),define("global/elements/Queries/WithErrorHandling",["./AjaxError"],function(e){var t={_Error:e,_getErrorParams:function(e,t){return{error:{status:t.status,code:e.code===undefined?e:e.code,message:e.message}}},_processError:function(e,t){return new this._Error(this._getErrorParams(e,t))}};return t}),define("global/elements/Queries/ErrorsHandlerView",["vendors/Backbone/Mixin","./WithErrorHandling"],function(e,t){var n=new e({dependencies:[t]},{initialize:function(){this._super(),this._setErrorHandler()},_setErrorHandler:function(){this.model.on("query:error",this._processError,this)}});return n}),define("global_forms/Form/Ajax/AjaxFormModel",["underscore","global_forms/Form/FormModel","global/elements/Queries/Queries"],function(e,t,n){var r=t.mix(n).extend({defaults:function(){return e.defaults({action:"/",method:"POST",xhrFields:{withCredentials:!1}},this._super())},_queries:function(){return e.defaults({save:this.save},this._super())},_urls:function(){return e.defaults({save:this.get("action")},this._super())},_buildQueryData:function(t,n){return n=n||this.formFields,e(n.serialize(this._preRequestFieldsFilter)).extend(t.data)},_preRequestFieldsFilter:function(e){return e.isSubmittable()},save:function(t,n,r){t=e({type:this.get("method"),xhrFields:this.get("xhrFields")}).extend(t),t.data=this._buildQueryData(t,n);if(!r&&typeof this.get("name")=="string"){var i=this.get("name").split(" ");if(i[0]){var s=$("form[data-form-name="+i[0]+"]").find("input[name=code]")[0]||$("form[name="+i[0]+"]").find("input[name=code]")[0];s&&(t.data.code=s.value)}}return this._sendQuery("save",t,{transport:r}),this}});return r}),function(e){function r(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++)n[o]=n[o].replace(/\+/g," "),u=n[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100)),r.uploadProgress(e,n,i,t)},!1),t}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(e,t){t.data=n,a&&a.call(this,e,t)},e.ajax(u)}function A(t){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function r(){try{var e=T(v).readyState;s("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(r,50)}catch(t){s("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var t=a.attr2("target"),n=a.attr2("action");o.setAttribute("target",p),i||o.setAttribute("method","POST"),n!=l.url&&o.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var u=[];try{if(l.extraData)for(var f in l.extraData)l.extraData.hasOwnProperty(f)&&(e.isPlainObject(l.extraData[f])&&l.extraData[f].hasOwnProperty("name")&&l.extraData[f].hasOwnProperty("value")?u.push(e('<input type="hidden" name="'+l.extraData[f].name+'">').val(l.extraData[f].value).appendTo(o)[0]):u.push(e('<input type="hidden" name="'+f+'">').val(l.extraData[f]).appendTo(o)[0]));l.iframeTarget||(d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1)),setTimeout(r,15);try{o.submit()}catch(c){var h=document.createElement("form").submit;h.apply(o)}}finally{o.setAttribute("action",n),t?o.setAttribute("target",t):a.removeAttr("target"),e(u).remove()}}function _(t){if(m.aborted||M)return;A=T(v),A||(s("cannot access response document"),t=x);if(t===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(t==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){s("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){s("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(s("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&e.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&e.event.trigger("ajaxError",[m,l,r])),h&&e.event.trigger("ajaxComplete",[m,l]),h&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget||d.remove(),m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=e.Deferred();if(t)for(f=0;f<c.length;f++)u=e(c[f]),n?u.prop("disabled",!1):u.removeAttr("disabled");l=e.extend(!0,{},e.ajaxSettings,r),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=e(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,t),h&&e.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&e.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=o.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=o.clk_x,l.extraData[y+".y"]=o.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,u,a=this;typeof r=="function"&&(r={success:r}),i=r.type||this.attr2("method"),o=r.url||this.attr2("action"),u=typeof o=="string"?e.trim(o):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=r.traditional;l===undefined&&(l=e.ajaxSettings.traditional);var c=[],h,p=this.formToArray(r.semantic,c);r.data&&(r.extraData=r.data,h=e.param(r.data,l));if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=e.param(p,l);h&&(d=d?d+"&"+h:h),r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+d,r.data=null):r.data=d;var v=[];r.resetForm&&v.push(function(){a.resetForm()}),r.clearForm&&v.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else r.success&&v.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[e,t,n||a,a])};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e('input[type=file]:enabled[value!=""]',this),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x,N;r.iframe!==!1&&(r.iframe||T)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=e.ajax(r),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,r]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(t)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=n?s.getElementsByTagName("*"):s.elements;if(!o)return i;var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u],f=c.name;if(!f||c.disabled)continue;if(n&&s.clk&&c.type=="image"){s.clk==c&&(i.push({name:f,value:e(c).val(),type:c.type}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}));continue}l=e.fieldValue(c,!0);if(l&&l.constructor==Array){r&&r.push(c);for(a=0,p=l.length;a<p;a++)i.push({name:f,value:l[a]})}else if(t.fileapi&&c.type=="file"){r&&r.push(c);var d=c.files;if(d.length)for(a=0;a<d.length;a++)i.push({name:f,value:d[a],type:c.type});else i.push({name:f,value:"",type:c.type})}else l!==null&&typeof l!="undefined"&&(r&&r.push(c),i.push({name:f,value:l,type:c.type,required:c.required}))}if(!n&&s.clk){var v=e(s.clk),m=v[0];f=m.name,f&&!m.disabled&&m.type=="image"&&(i.push({name:f,value:v.val()}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),define("vendors/jquery/plugins/jquery.form",function(){}),define("global_forms/Form/Ajax/AjaxFormView",["underscore","global_forms/Form/FormView","global/elements/Queries/ErrorsHandlerView","./AjaxFormModel","./AjaxFormError","vendors/jquery/plugins/jquery.form"],function(e,t,n,r,i){var s=t.mix(n).extend({_Error:i,_ModelConstructor:r,initialize:function(){this._super(),this._handleModel(),this._initFormError(),this._initWithCredentials(),this.enableSubmitButton()},_initProperties:function(){this._super(),this._preventEnableSubmitButton=!1},_handleModel:function(){this.model.on("save:success",this._processSaveSuccess,this).on("save:error",this._processSaveError,this).on("save:complete",this._processSaveComplete,this)},_initFormError:function(){var e=this._getErrorMixins();this.options.ErrorMixins&&(e=e.concat(this.options.ErrorMixins)),this._Error=this._Error.mix.apply(this._Error,e)},_getErrorMixins:function(){return[]},_submit:function(e){e.preventDefault(),this._super(e),this._submitStarted&&this._sendForm()},_sendForm:function(){this.model.save()},_processSaveSuccess:function(e){Object.keys(this.classDynamicConfirmationCode).length!==0&&this.classDynamicConfirmationCode!==void 0&&e.status!=="success"&&this.classDynamicConfirmationCode.triggerSuccessEdit(e),this._initValidation()},_getErrorParams:function(t,n){return e({form:this}).defaults(this._super.apply(this,arguments))},_processSaveError:function(e,t){Object.keys(this.classDynamicConfirmationCode).length!==0&&(this.classDynamicConfirmationCode.clearInputCodeConfirmation(),this.classDynamicConfirmationCode.triggerError(e,t))},_processSaveComplete:function(){this._preventEnableSubmitButton||this.enableSubmitButton()},_initWithCredentials:function(){this.model.set({xhrFields:{withCredentials:!!this.$el.data("xhrFields")}})}});return s}),define("mobile/pages/alpari_cashback/ProlongationFormView",["global_forms/Form/Ajax/AjaxFormView"],function(e){var t=e.extend({initialize:function(){this._super(),this._initCheckboxField()},_initCheckboxField:function(){var e=this.getField("checkbox");if(!e)return;e.model.toggleSubmittability(!1).on("change:value",this._onCheckboxChange,this)},_onCheckboxChange:function(e){var t=e.getBooleanValue()?1:0;this.getField("isProlongationEnabled").model.value(t),this.submit()}});return t}),define("mobile/pages/alpari_cashback/WithProlongationForms",["underscore","vendors/Backbone/Mixin","./ProlongationFormView"],function(e,t,n){var r=new t({_selectors:function(){return e.defaults({prolongationForm:".js-prolongation-form"},this._super())},_initProperties:function(){this._super(),this._prolongationForms=[]},initialize:function(){this._super(),this._initProlongationForms()},_initProlongationForms:function(){e.each(this._elem("prolongationForm"),function(e){this._prolongationForms.push(new n({el:e}))},this)}});return r}),define("mobile/elements/DataList/contentInitFactory",["underscore","BackboneX","global/Factories/SelectorsFactory","global/elements/Accordion/WithAccordions","mobile/pages/alpari_cashback/WithProlongationForms"],function(e,t,n,r,i){var s=n.extend({_classes:function(){return e.defaults({accordions:"js-init-content-accordions",prolongationForms:"js-init-content-prolongation-forms"},this._super())},_products:function(){return e({"*":t.View,accordions:t.View.mix(r),prolongationForms:t.View.mix(i)}).defaults(this._super())}});return new s}),define("mobile/elements/DataList/DataListWithContentInitView",["./DataListWithPaginationView","./contentInitFactory"],function(e,t){var n=e.extend({_initProperties:function(){this._super(),this._contentView=null},updateContent:function(e){return this._super(e),this._contentView=t.createInstance(this._elem("content")),this}});return n}),define("mobile/elements/DataList/dataListFactory",["underscore","global/Factories/Factory","global/elements/DataList/FilteredDataListView","mobile/elements/DataList/DataListWithPaginationView","./DataListWithContentInitView"],function(e,t,n,r,i){var s=t.extend({_products:function(){return e.defaults({"*":n,DataListWithPagination:r,DataListWithContentInit:i},this._super())},_getNameFromEl:function(e){return e.data("type")},_getSuitableProductDescriptor:function(e){var t=this._getNameFromEl(e);return this._productDescriptors[t]||this._productDescriptors["*"]}});return new s}),define("mobile/pages/all/Menu/MessagesDataListView",["underscore","jquery","global/elements/ServiceManager/WithServiceManager","mobile/elements/DataList/DataListWithContentInitView"],function(e,t,n,r){var i=r.mix(n).extend({_classes:function(){return e.defaults({messageActive:"message_active_yes"},this._super())},_selectors:function(){return e.defaults({message:".js-message-item"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("message")]=this._onMessageClick,e},_initProperties:function(){this._super(),this._readMessageUrl=this._data.readMessageUrl},fetchNewMessages:function(){return this.isVisible()?(this._resetPagination(),this.model.fetch()):this._fetchDeferred=!0,this},_onMessageClick:function(e){var n=t(e.currentTarget);if(!this._hasClass("messageActive",n))return;var r=n.data("messageId");this._removeClass("messageActive",n),this._readMessage(r)},_readMessage:function(e){t.ajax({type:"POST",url:this._readMessageUrl,data:{messageId:e},success:this._onReadMessageSuccess,context:this})},_onReadMessageSuccess:function(){this._getService("pushNotificator").model.readMessage()},_resetPagination:function(){this.getFilter("pagination").setPage(1)},update:function(){return this._resetPagination(),this._super(),this}});return i}),function(){function e(t,r){function s(e,t){return function(){return e.apply(t,arguments)}}var i;r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=t,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700;if(e.notNeeded(t))return;var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],u=this;for(var a=0,f=o.length;a<f;a++)u[o[a]]=s(u[o[a]],u);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,r){var i=Node.prototype.removeEventListener;e==="click"?i.call(t,e,n.hijacked||n,r):i.call(t,e,n,r)},t.addEventListener=function(e,n,r){var i=Node.prototype.addEventListener;e==="click"?i.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(t,e,n,r)}),typeof t.onclick=="function"&&(i=t.onclick,t.addEventListener("click",function(e){i(e)},!1),t.onclick=null)}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,i=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),s=r&&/OS [6-7]_\d/.test(navigator.userAgent),o=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(r&&e.type==="file"||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&e.tagName.toLowerCase()==="select"?"mousedown":"click"},e.prototype.focus=function(e){var t;r&&e.setSelectionRange&&e.type.indexOf("date")!==0&&e.type!=="time"&&e.type!=="month"?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,s;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(r){s=window.getSelection();if(s.rangeCount&&!s.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))this.trackingClick=!1,this.targetElement=null;return!0},e.prototype.findControl=function(e){return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,o,u,a,f,l=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,o=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,s&&(f=e.changedTouches[0],l=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),u=l.tagName.toLowerCase();if(u==="label"){t=this.findControl(l);if(t){this.focus(l);if(n)return!1;l=t}}else if(this.needsFocus(l)){if(e.timeStamp-o>100||r&&window.top!==window&&u==="input")return this.targetElement=null,!1;this.focus(l),this.sendClick(l,e);if(!r||u!=="select")this.targetElement=null,e.preventDefault();return!1}if(r&&!i){a=l.fastClickScrollParent;if(a&&a.fastClickLastScrollTop!==a.scrollTop)return!0}return this.needsClick(l)||(e.preventDefault(),this.sendClick(l,e)),!1},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,r,i,s;if(typeof window.ontouchstart=="undefined")return!0;r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(r){if(!n)return!0;t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(o){i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(i[1]>=10&&i[2]>=3){t=document.querySelector("meta[name=viewport]");if(t){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}}}if(e.style.msTouchAction==="none"||e.style.touchAction==="manipulation")return!0;s=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(s>=27){t=document.querySelector("meta[name=viewport]");if(t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth))return!0}return e.style.touchAction==="none"||e.style.touchAction==="manipulation"?!0:!1},e.attach=function(t,n){return new e(t,n)},typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("vendors/fastclick/lib/fastclick",[],function(){return e}):typeof module!="undefined"&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),define("mobile/pages/all/fixAnchorTarget",["jquery"],function(e){return{init:function(){window.navigator.userAgent.match(/Windows Phone/i)&&e("a").filter("[target]").removeAttr("target")}}}),define("mobile/FormClasses/Form/Verification/VerificationError",["vendors/Backbone/Mixin"],function(e){var t=new e({_initProperties:function(){this._super(),this._confirmCodeFieldName=this._form.model.getConfirmationCodeFieldName(),this._leftSeconds=this.options.leftSeconds},_codes:{CODE_WAS_NOT_SEND:function(){this._form.showSendCodeError("confirmation-code-incorrect"),this._form.resetSendCodeState()},INVALID_CONFIRMATION_CODE:function(){this._form.showFieldError(this._confirmCodeFieldName)},CHANGE_PASSWORD_ERROR:{CURRENT_PASSWORD_INVALID:function(){this._form.showFieldError("oldPassword","current-password-invalid").resetSendCodeState()},PASSWORD_EQUALS_TO_CURRENT:function(){this._form.showFieldError("password","password-equals-to-current").resetSendCodeState()}},CONFIRMATION_CODE_CHECK_LIMIT_EXCEED:function(){this._form.showSendCodeError("confirmation-code-obsolete").resetSendCodeState()},TIMER_ERROR:function(){this._form._startSendTimer(this._leftSeconds)}}});return t}),define("global/elements/Timer/AbstractTimer",["underscore","BackboneX"],function(e,t){var n=t.View.extend({_initProperties:function(){this._super(),this._nextTickTimeoutId=null,this._currentClientTime=0,this._startClientTime=0,this._STEP=1e3},start:function(){return this._startClientTime=this._currentClientTime=Date.now(),this._tick(),this},_tick:function(e){clearTimeout(this._nextTickTimeoutId),this.trigger("tick");if(this._isTimerEnded()){this.trigger("end");return}e=e||0,this._nextTickTimeoutId=setTimeout(this._onTick,this._STEP-e)},_isTimerEnded:function(){return!1},_onTick:e.method.bind(function(){var e=Date.now(),t=(e-this._currentClientTime)%100;this._currentClientTime=e,this._tick(t)}),stop:function(){clearTimeout(this._nextTickTimeoutId)}});return n}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return this[this.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-jQuery.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?jQuery.easing.easeInBounce(e,t*2,0,r,i)*.5+n:jQuery.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}}),define("vendors/jquery/plugins/jquery.easing",function(){}),define("global/elements/Timer/TimerFormatsView",["underscore","./AbstractTimer","vendors/jquery/plugins/jquery.backgroundPosition","vendors/jquery/plugins/jquery.easing"],function(e,t){var n=t.extend({_selectors:function(){return e.defaults({digits:".js-timer-num",digit:".js-timer-%s"},this._super())},_initProperties:function(){this._super(),this._animationType="easeInOutBack",this._formats=null,this._prevFormats=null,this._digitHeight=this._elem("digits").height(),this._currentTime=0,this._startTime=0,this._updateDigitStrategy=this.options.updateDigitStrategy;if(!this._updateDigitStrategy)throw new Error("TimerView needs an updateDigitStrategy");this._formatStrategy=this.options.formatStrategy;if(!this._formatStrategy)throw new Error("TimerView needs an formatStrategy")},initialize:function(){this._super();var e=this._data.remainingTime;e&&this.start(e)},start:function(e){return this._startTime=this._currentTime=e,this._prevFormats=this._secondsToFormat(180),this._super()},_updateDigitsPositions:function(){e.each(this._formats,this._updateDigitsPairPositions,this)},_updateDigitsPairPositions:function(e,t){var n;for(var r=0;r<e.length;r++){n=e[r];if(this._prevFormats[t][r]===n)continue;this._updateDigit(this._elem("digit",t).eq(r),n)}},_updateDigit:function(e,t){this._updateDigitStrategy(e,t)},_secondsToFormat:function(e){return this._formatStrategy(e)},_numberToArray:function(e){return e>9?[Math.floor(e/10),e%10]:[0,e]},_tick:function(e){this._currentTime=this._startTime-Math.round((this._currentClientTime-this._startClientTime)/this._STEP),this._formats=this._secondsToFormat(this._currentTime),this._prevFormats=this._prevFormats||this._formats,this._updateDigitsPositions(),this._prevFormats=this._formats,this._super(e)},getFormats:function(){return this._formats},_isTimerEnded:function(){return this._currentTime<=0}});return n}),define("global/elements/Timer/contentUpdateDigitStrategy",[],function(){return function(e,t){e.text(t)}}),define("global/elements/Timer/formatStrategyMMSS",[],function(){return function(e){var t=Math.floor(e/60),n=e-t*60;return{mm:this._numberToArray(t),ss:this._numberToArray(n)}}}),define("mobile/FormClasses/Form/Verification/VerificationView",["underscore","jquery","vendors/Backbone/Mixin","./VerificationError","global/elements/Timer/TimerFormatsView","global/elements/Timer/contentUpdateDigitStrategy","global/elements/Timer/formatStrategyMMSS","mobile/FormClasses/Hints/hintsHolder"],function(e,t,n,r,i,s,o,u){var a=new n({},{_getErrorMixins:function(){return[r].concat(this._super())},_confirmCodeFieldName:"confirmCode",_selectors:function(){return e.defaults({codeSentStatus:".js-code-sent",sendCodeWaiting:".js-send-code-waiting",sendCodeReady:".js-send-code-ready",sendCodeTimer:".js-timer",sendCodeError:".js-send-code-error",toggleConfirmationOptions:".js-toggle-confirmation-options",confirmationOptions:".js-confirmation-options"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("toggleConfirmationOptions")]=this._toggleConfirmationOptions,e},_initProperties:function(){this._super(),this._sendCodeButtonName="send",this._sendCodeButton=null,this._confirmCodeField=null,this._notifyAboutCodeSent=!0,this._clearConfirmCodeOnSave=!0,this._sendCodeTimer=null,this._sendCodeLockTime=this._elem("sendCodeTimer").data("lockTime")},initialize:function(){this._super(),this._initSendCodeTimer()},_toggleConfirmationOptions:function(e){e.preventDefault(),this._elem("confirmationOptions").toggleClass(this._class("hidden"))},_initSendCodeTimer:function(){this._sendCodeTimer=new i({el:this._elem("sendCodeTimer"),updateDigitStrategy:s,formatStrategy:o}),this._sendCodeTimer.on("end",this._onSendCodeTimerEnd,this)},_onSendCodeTimerEnd:function(){this._sendCodeButton.enable(),this._enableSendType(),this._addClass("hidden","sendCodeWaiting"),this._removeClass("hidden","sendCodeReady")},_initHandlers:function(){this._super(),this._sendCodeButton=this.getField(this._sendCodeButtonName);if(!this._sendCodeButton)return;this._confirmCodeFieldName=this.model.getConfirmationCodeFieldName(),this._confirmCodeField=this.getField(this._confirmCodeFieldName),this._confirmCodeField!==null&&this._confirmCodeField.model.toggleValidation(!1),this._sendCodeButton.on("click",this._onSendCodeClick,this),this._data.sendCodeUrl&&this.model.setUrl("sendCode",this._data.sendCodeUrl),this.model.on("sendCode:complete",this._processSendingCodeComplete,this).on("sendCode:success",this._processSendingCodeSuccess,this).on("sendCode:error",this._processSendingCodeError,this).on("reset",this._hideCodeSentStatus,this)},_processSendingCodeError:function(e,t){var n=e.code||e;if(n==="TIMER_ERROR")try{var r=JSON.parse(t.responseText),i=r.params&&r.params.leftSeconds||r.error&&r.error.leftSeconds;this._startSendTimer(i),this._showCodeSentStatus(),this._addClass("hidden","codeSentStatus")}catch(s){}this._sendCodeButton.enable()},_onSendCodeClick:function(){var e=this._confirmCodeField;this._fields.some(function(t){return t===e?!0:(t.status.stopIgnoring(),!1)}),e!==null&&(e.initStatusConditions().status.ignore("not-empty"),e.model.validate())},_sendCode:function(e,t){this._disableSendType(),this._hideCodeSentStatus(),this._notifyAboutCodeSent=t!==!1,this.model.query("sendCode",e)},resetSendCodeState:function(){this._enableSendType(),this._sendCodeButton.enable(),this._preventEnableSubmitButton=!0},_enableSendType:function(){var e=this.getField("sendType");e&&e.enable()},_disableSendType:function(){var e=this.getField("sendType");e&&e.disable()},_processSendingCodeSuccess:function(){this._showCodeSentStatus(),this._startSendTimer(this._sendCodeLockTime)},_processSendingCodeComplete:function(){},_processSaveComplete:function(){this._super(),this._clearConfirmCodeOnSave&&this._confirmCodeField&&(this._confirmCodeField.status.ignore("not-empty"),this._confirmCodeField.model.clearValue())},_showCodeSentStatus:function(){this._removeClass("hidden","codeSentStatus"),this.hideSendCodeError(),this._confirmCodeField.enable().model.toggleValidation(!0).toggleSubmittability(!0).clearValue()},hideSendCodeError:function(){return this._addClass("hidden","sendCodeError"),this},_hideCodeSentStatus:function(){this._addClass("hidden","codeSentStatus"),this._addClass("hidden","sendCodeWaiting"),this._addClass("hidden","sendCodeReady")},hideCodeSentStatus:function(){this.resetSendCodeTimer()},resetSendCodeTimer:function(){return this._sendCodeTimer.stop(),this._hideCodeSentStatus(),this._sendCodeButton.enable(),this},showFieldError:function(e,t){return e===this._confirmCodeFieldName&&this._confirmCodeField.model.clearValue(),this._super(e,t)},hasConfirmCode:function(){return!!this._confirmCodeField},showSendCodeError:function(e){return this._confirmCodeField!==null&&this._confirmCodeField.model.clearValue(),this._elem("sendCodeError").html(u.get(e)),this._removeClass("hidden","sendCodeError"),this._sendCodeButton.focus(),this},_processSaveError:function(e,t){var n=e.code||e;n!=="INVALID_CONFIRMATION_CODE"&&this.resetSendCodeTimer(),n==="UNIQUENESS_ERROR"?(this.enableSubmitButton(),this.trigger("error:uniqueness",e.fields,this)):this._super.apply(this,arguments)},_getErrorParams:function(t,n){return e({leftSeconds:this._getLeftSeconds(n)}).defaults(this._super.apply(this,arguments))},_getLeftSeconds:function(e){var t=0;try{var n=JSON.parse(e.responseText);t=n.params&&n.params.leftSeconds||n.error&&n.error.leftSeconds}catch(r){}return t},_startSendTimer:function(e){this.hideCaptcha(),this._addClass("hidden","sendCodeReady"),this._removeClass("hidden","sendCodeWaiting"),this._sendCodeTimer.start(e),this.enableSubmitButton()},checkFieldsBefore:function(e){return this._super(e)}},{hasConfirmCode:function(e){return!!t(e).has('input[name="'+this.prototype._confirmCodeFieldName+'"]').length}});return a}),define("mobile/FormClasses/Form/Verification/VerificationModel",["underscore","vendors/Backbone/Mixin","global_forms/Fields/FormField/FormFieldsCollection"],function(e,t,n){var r=new t({_initProperties:function(){this._super(),this._confirmCodeFieldName="code",this._sendTypeFieldName="sendType",this._fieldsToSend=new n},_getFieldsConfiguration:function(){var t={};return t[this._confirmCodeFieldName]={validation:["not-empty","confirmationCode"],sendCode:this._NO_VALIDATION},e(t).defaults(this._super())},_urls:function(){var t=this._getService("urls");return e.defaults({sendCode:t.get("gtt_payment_send_code")},this._super())},_queries:function(){return e.defaults({sendCode:this._sendCodeQuery},this._super())},_sendCodeQuery:function(t){t=e({type:"post"}).defaults(t);var n={};n[this._sendTypeFieldName]=this.getField(this._sendTypeFieldName).getPostValue(),t.data=e(n).defaults(t.data),this._sendQuery("sendCode",t)},getConfirmationCodeFieldName:function(){return console.log(this._confirmCodeFieldName),this._confirmCodeFieldName},getSendTypeFieldName:function(){return this._sendTypeFieldName}});return r}),define("global_forms/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationFormModel",["../Ajax/AjaxFormModel","../Verification/VerificationModel"],function(e,t){var n=e.mix(t);return n}),define("global_forms/Form/Captcha/mobile/WithCaptcha",["jquery","underscore","vendors/Backbone/Mixin"],function(e,t,n){var r=new n({},{_selectors:function(){return t.defaults({captcha:".js-captcha",captchaHolder:".captcha__holder",updateCaptcha:".captcha__refresh"},this._super())},_classes:function(){return t.defaults({captchaImg:"captcha__image",captchaHolderActive:"captcha__holder_active_yes"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("updateCaptcha")]=this._onClickUpdateCaptcha,e},_initProperties:function(){this._super(),this._securityCode=null,this._updateCaptchaUrl=this._data.captchaUrl,this._captchaImgAlt=this._elem("captchaHolder").data("alt")},_securityCodeName:"imgcaptcha",initialize:function(){this._super(),this._initSecurityCode(),this.model.on("reset",this.hideCaptcha,this)},_initSecurityCode:function(){this._securityCode=this.getField(this._securityCodeName),this._securityCode!==null&&this._securityCode.model.toggleValidation(!1).toggleSubmittability(!1)},_onClickUpdateCaptcha:function(e){e.preventDefault(),this._securityCode!==null&&(this._securityCode.status.ignore("not-empty"),this._securityCode.model.setValidationStatus(!0).value("")),this._elem("captchaHolder").removeClass(this._class("captchaHolderActive")),this._updateCaptcha()},_updateCaptcha:function(){this._isCaptchaImgInserted()||this._createCaptchaImage();var e=this._elem("captchaImg"),t=this._elem("captchaHolder"),n=this._class("captchaHolderActive"),r=this._getCaptchaImgSrc(),i=this._class("hidden");e.attr("src",r).addClass(i).on("load",function(){t.addClass(n),e.removeClass(i)})},_isCaptchaImgInserted:function(){return!!this._findElem("captchaImg").length},_getCaptchaImgSrc:function(){return this._updateCaptchaUrl+"?"+Math.random()},_hideCaptchaImg:function(){this._elem("captchaImg").remove()},_createCaptchaImage:function(){this._dropElemCache("captchaImg");if(this._captchaImgAlt!==null){var t=e("<img>").attr("alt",this._captchaImgAlt).addClass(this._class("captchaImg"));this._elem("captchaHolder").addClass(this._class("captchaHolderActive")),this._elem("captchaHolder").append(t)}},showCaptcha:function(){return this._updateCaptcha(),this._removeClass("hidden","captcha"),this._securityCode.focus().model.toggleValidation(!0).toggleSubmittability(!0),this},updateCaptcha:function(){this._updateCaptcha()},hideCaptcha:function(){return this._addClass("hidden","captcha"),this._hideCaptchaImg(),this._securityCode!==null&&this._securityCode.model.resetValue().toggleValidation(!1).toggleSubmittability(!1),this}},{hasSecurityCode:function(t){return!!e(t).has('input[name="'+this.prototype._securityCodeName+'"]').length}});return r}),define("global_forms/Form/Captcha/mobile/CaptchaError",["vendors/Backbone/Mixin"],function(e){var t=new e({_codes:{CAPTCHA_INVALID:function(){this._form.getField("imgcaptcha").model.resetValue(),this._form.showFieldError("imgcaptcha"),this._form.updateCaptcha()},SHOW_CAPTCHA:function(){this._form.showCaptcha()}}});return t}),define("global_forms/Form/Captcha/mobile/WithAjaxCaptcha",["vendors/Backbone/Mixin","./WithCaptcha","./CaptchaError"],function(e,t,n){var r=new e({dependencies:[t]},{_getErrorMixins:function(){return this._super().concat([n])}});return r}),define("mobile/FormClasses/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationView",["underscore","vendors/Backbone/Mixin","global_forms/Form/Verification/VerificationView","global_forms/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationFormModel","global_forms/Form/Captcha/mobile/WithAjaxCaptcha"],function(e,t,n,r,i){var s=new t({dependencies:[n,i]},{_ModelConstructor:r,_processSendingCodeSuccess:function(){this.hideCaptcha(),this._super()},hideCaptcha:function(){return this._super(),this._securityCode!==null&&this._securityCode.model.off("change:value"),this},showCaptcha:function(){return this._super(),this._securityCode.model.link(this._onSecurityCodeChange,this),this._confirmCodeField.disable().model.toggleValidation(!1).clearValue(),this._securityCode.status.ignore("not-empty"),this},_onSecurityCodeChange:function(){var e=this._securityCode.model.getPostValue();this._sendCodeButton.toggleEnabled(e.length>3)},_sendCode:function(e,t){e=e||{},e.data=e.data||{};if(this._securityCode!==null){var n=this._securityCode.model.getPostValue();n&&(e.data.imgcaptcha=n)}this._super(e,t)}});return s}),define("global_forms/Form/PasswordsForm/ChangePasswordError",["vendors/Backbone/Mixin"],function(e){var t=new e({_codes:{CHANGE_PASSWORD_ERROR:{CURRENT_PASSWORD_INVALID:function(){this._form.showFieldError("oldPassword","current-password-invalid")},PASSWORD_EQUALS_TO_CURRENT:function(){this._form.showFieldError("password","password-equals-to-current")}},INVALID_AUTHENTICATION:function(){this._form.showFieldError("oldPassword")},INVALID_PARAMETERS:function(){this._form.showFieldError("password")},PASSWORDS_MISMATCH:function(){this._form.showFieldError("passwordConfirm")}}});return t}),define("global_forms/Form/PasswordsForm/PasswordsConfirmForm",["vendors/Backbone/Mixin","global_forms/Form/PasswordsForm/ChangePasswordError"],function(e,t){var n=new e({_getPasswordFieldsNamesMap:function(){return{password:"password",passwordConfirm:"password_confirm"}},_getErrorMixins:function(){return this._super().concat([t])},_initProperties:function(){this._super(),this._passwordFieldsNamesMap=this._getPasswordFieldsNamesMap(),this._passwordsRestrictionRule="password",this._passwordsMatchRestrictionRule="passwords-not-match"},initialize:function(){this._super(),this._addValidationRulesToFields()},_addValidationRulesToFields:function(){this.getField(this._passwordFieldsNamesMap.password).model.addValidationRule(this._passwordsRestrictionRule),this.getField(this._passwordFieldsNamesMap.passwordConfirm).model.addValidationRules([this._passwordsRestrictionRule,this._passwordsMatchRestrictionRule])},_initValidation:function(){this._super(),this.getField(this._passwordFieldsNamesMap.password).on("blur",this._checkPasswordsMatch,this)},_checkPasswordsMatch:function(){var e=this.getField(this._passwordFieldsNamesMap.passwordConfirm),t="check";e.model.validate(),e.isFocused()&&(t="focus"),e.status.show(t)},showFieldError:function(e,t){return e=this._passwordFieldsNamesMap[e]||e,this._super(e,t)}});return n}),define("global_forms/Form/PasswordsForm/PasswordsResetForm",["underscore","vendors/Backbone/Mixin","global_forms/Form/PasswordsForm/PasswordsConfirmForm"],function(e,t,n){var r=new t({dependencies:[n]},{_getPasswordFieldsNamesMap:function(){return e.defaults({oldPassword:"current_password"},this._super())}});return r}),define("mobile/pages/all/ChangePasswordForm/ChangePasswordFormModel",["underscore","global_forms/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationFormModel","global/elements/ServiceManager/WithServiceManager"],function(e,t,n){var r=t.mix(n).extend({_urls:function(){return e.defaults({sendCode:this._getService("urls").get("gtt_my_change_password_confirmation_code")},this._super())}});return r}),define("mobile/pages/all/ChangePasswordForm/ChangePasswordFormView",["underscore","global_forms/Form/Ajax/AjaxFormView","global_forms/Form/FormWithBlockingBruteForceVerification/BlockingBruteForceVerificationView","global_forms/Form/PasswordsForm/PasswordsResetForm","global/elements/ServiceManager/WithServiceManager","./ChangePasswordFormModel"],function(e,t,n,r,i,s){var o=t.mix(n,r,i).extend({_selectors:function(){return e.defaults({spoiler:".js-change-password-spoiler"},this._super())},_ModelConstructor:s,_processSaveSuccess:function(e){this._super(e),this.model.reset(),this._getService("spoilers").toggleSpoiler(this._elem("spoiler")),this._getService("notifications").show("passwordChangedSuccess"),this.resetSendCodeState()}});return o}),define("mobile/pages/all/alpariLimitedForm/alpariLimitedForm",["global_forms/Form/Ajax/AjaxFormView"],function(e){var t=e.extend({_processSaveSuccess:function(e){this._super(e),window.location.reload()}});return t}),define("elements/Chat/InfoBlock",["jquery","BackboneX","underscore"],function(e,t,n){var r=t.View.extend({_selectors:function(){return n.defaults({close:".js-info-block-back"},this._super())},events:function(){var e={};return e["click "+this._selector("close")]=this._close,e},_close:function(e){e.stopPropagation(),this._toggleOpenedStatus(!1)},_toggleOpenedStatus:function(t){var n=this.options._isMobile?e(window).width()-48:376;this.$el.css({width:t?n:0,padding:t?16:0,opacity:t?1:0,zIndex:t?10001:9999})},_setOptions:function(t){var r=n.template(e("#info-block-template").html(),t);this.$el.html()&&this.$el.html(""),this.$el.html(r)},initialize:function(){this._super(),this.$el.height(this.options.height)}});return r}),define("elements/Chat/LiveChat",["jquery","BackboneX","underscore"],function(e,t,n){var r=t.View.extend({_selectors:function(){return n.defaults({close:".js-livechat-close",activate:".js-livechat-activate"},this._super())},events:function(){var e={};return e["click "+this._selector("close")]=this._close,e["click "+this._selector("activate")]=this._activate,e},_initProperties:function(){this._super(),this.config=window.config;var e=this.$el.data();if(!e)return;this.locale=e.locale;var t=e.user;this.livechatData={prefill:{name:{value:t.firstNameOriginal},email:{value:t.email},phone:{value:t.phone}},tags:this.getTags(t,e.lang),departments:{enabled:this.getEnabledDepartments(),select:this.getSelectedDepartment()}}},getTags:function(e,t){var n=["MyAlpari",t[this.locale],window.location.href];return e.clientId&&n.push(e.clientId.toString()),e.phone&&n.push(e.phone),e.email&&n.push(e.email),e.irisAssignedUser&&n.push(e.irisAssignedUser),n},getEnabledDepartments:function(){var e=this.config.onlineChat.mainDepartments,t=this.config.onlineChat.enabledDepartaments[this.locale];if(t&&t.length)return t;var n=[];for(var r in e)n.push(e[r]);return n},getSelectedDepartment:function(){var e=this.config.onlineChat.selectedDepartament[this.locale];return e?e:this.config.onlineChat.mainDepartments[this.locale]},_close:function(e){e.stopPropagation(),this._toggleOpenedStatus(!1)},_toggleOpenedStatus:function(t){var n=this.options._isMobile?e(window).width()-48:310;this.$el.css({width:t?n:0,opacity:t?1:0,zIndex:t?10001:9999})},_activate:function(){zE.activate({hideOnClose:!0}),zE("webWidget","prefill",this.livechatData.prefill),zE("webWidget","updateSettings",{webWidget:{chat:{departments:this.livechatData.departments,tags:this.livechatData.tags}}}),this.hidePopoutTool()},hidePopoutTool:function(){var e=document.querySelector("#webWidget"),t=e?e.contentDocument.querySelector('[aria-label="Popout"]'):null;t&&t.setAttribute("style","display: none")},initialize:function(){this._super(),zE("webWidget","setLocale",this.locale)}});return r}),define("elements/Chat/IconList",["jquery","BackboneX","underscore","./InfoBlock","./LiveChat"],function(e,t,n,r,i){var s=t.View.extend({_selectors:function(){return n.defaults({close:".js-chat-widget-close",icon:".js-icon"},this._super())},events:function(){var e={};return e["click "+this._selector("close")]=this._close,e["click "+this._selector("icon")]=this._itemAction,e},_close:function(e){e.stopPropagation(),this._toggleOpenedStatus(!1)},_toggleOpenedStatus:function(e){var t=this._isMobile?16:32;this.$el.css({height:e?this._getHeightIconList(t):0,opacity:e?1:0})},_itemAction:function(t){var n=e(t.currentTarget),r=n.data(),i=r?r.options:null;switch(i.name){case"viber":case"telegram":this._showItemInfo(i);break;case"whatsapp":this.activateWhatsApp(i);break;case"vk":this.activateVK();break;case"messenger":this.activateFB();break;case"livechat":this.activateLiveChat()}},_showItemInfo:function(e){this.info._toggleOpenedStatus(!0),this.info._setOptions(e)},activateLiveChat:function(){this.livechat._activate()},activateVK:function(){window.open(window.config.vkLink,"_blank")},activateFB:function(){window.open(window.config.messengerLink,"_blank")},activateWhatsApp:function(e){window.open(window.config.whatsAppLink[e.locale],"_blank")},_getHeightIconList:function(e){var t=this.$el.children().length,n=this._isMobile?48:56,r=e||0;return t*n+(t-1)*16+r},initialize:function(){this._super(),this._isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),this._initInfoBlock();try{this._initLiveChat()}catch(e){console.log(e)}},_initInfoBlock:function(){this.info=new r({el:".info-block",height:this._getHeightIconList(),_isMobile:this._isMobile})},_initLiveChat:function(){this.livechat=new i({el:".livechat",_isMobile:this._isMobile})}});return s}),define("elements/Chat/ChatWidget",["jquery","BackboneX","underscore","./IconList"],function(e,t,n,r){var i=t.View.extend({events:function(){var e={};return e.click=this._openIconList,e},_openIconList:function(e){e.stopPropagation(),this.iconList._toggleOpenedStatus(!0)},initialize:function(){this._super(),this._initIconList()},_initIconList:function(){this.iconList=new r({el:".chat-widget__icon-list"})}});return i}),define("global/PageClasses/PageWithGrid",["underscore","vendors/Backbone/Mixin"],function(e,t){var n=new t({initialize:function(){this._super(),this._initGrid()},_classes:function(){return e.defaults({grid:"grid-tool_active_yes"},this._super())},_initGrid:e.once(function(){this._$document.on("keydown",function(e){e.altKey==1&&e.shiftKey==1&&e.ctrlKey==1&&this._toggleGrid()}.bind(this))}),_toggleGrid:function(){this._$body.toggleClass(this._class("grid"))}});return n}),function(e){typeof define=="function"&&define.amd?define("datepicker",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o))):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}function i(e){var t,n;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){n=parseInt(e.css("zIndex"),10);if(!isNaN(n)&&n!==0)return n}e=e.parent()}return 0}function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",u)}function u(){e.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))}function a(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function o(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r=n==="Width"?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return typeof t!="number"?s["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length){var n=e(this[0]),r,i;while(n.length&&n[0]!==document){r=n.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(n.css("zIndex"),10);if(!isNaN(i)&&i!==0)return i}n=n.parent()}}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}},e.extend(e.ui,{datepicker:{version:"1.11.4"}});var r;e.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return a(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]);if(r.hasClass(this.markerClassName))return;this._attachments(r,n),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);if(r.hasClass(this.markerClassName))return;r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block")},_dialogDatepicker:function(t,n,r,i,s){var o,u,f,l,c,h=this._dialogInst;return h||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),h=this._dialogInst=this._newInst(this._dialogInput,!1),h.settings={},e.data(this._dialogInput[0],"datepicker",h)),a(h.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(h,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(u=document.documentElement.clientWidth,f=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+l,f/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(t){var n,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),n==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(n==="div"||n==="span")&&i.removeClass(this.markerClassName).empty(),r===s&&(r=null)},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,r){var i,s,o,u,f=this._getInst(t);if(arguments.length===2&&typeof n=="string")return n==="defaults"?e.extend({},e.datepicker._defaults):f?n==="all"?e.extend({},f.settings):this._get(f,n):null;i=n||{},typeof n=="string"&&(i={},i[n]=r),f&&(this._curInst===f&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),u=this._getMinMaxDate(f,"max"),a(f.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(f.settings.minDate=this._formatDate(f,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(f.settings.maxDate=this._formatDate(f,u)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),f),this._autoSize(f),this._setDate(f,s),this._updateAlternate(f),this._updateDatepicker(f))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,s,o,u,f,l;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),s=r?r.apply(t,[t,n]):{};if(s===!1)return;a(n.settings,s),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|=e(this).css("position")==="fixed",!o}),u={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),u=e.datepicker._checkOffset(n,u,o),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:u.left+"px",top:u.top+"px"}),n.inline||(f=e.datepicker._get(n,"showAnim"),l=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",i(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[f]?n.dpDiv.show(f,e.datepicker._get(n,"showOptions"),l):n.dpDiv[f||"show"](f?l:null),e.datepicker._shouldFocusInput(n)&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,r=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,i=this._getNumberOfMonths(t),s=i[1],o=17,a=t.dpDiv.find("."+this._dayOverClass+" a");a.length>0&&u.apply(a.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(i[0]!==1||i[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,o=this._curInst;if(!o||t&&o!==e.data(t,"datepicker"))return;this._datepickerShowing&&(n=this._get(o,"showAnim"),r=this._get(o,"duration"),i=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),r,i):o.dpDiv[n==="slideDown"?"slideUp":n==="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=e==="y"?r:1,s=new RegExp("^\\d{"+i+","+r+"}"),o=n.substring(u).match(s);if(!o)throw"Missing number at position "+u;return u+=o[0].length,parseInt(o[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th scope='col'"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2].replace(/'/g,"&#39;")+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new s,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4";var f=e.datepicker}),function(e){typeof define=="function"&&define.amd?define("UIslider",["jquery"],e):e(jQuery)}(function(e){function t(t,r){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap='#"+s+"']")[0],!!o&&n(o))):(/^(input|select|textarea|button|object)$/.test(u)?!t.disabled:"a"===u?t.href||r:r)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(n){return t(n,!isNaN(e.attr(n,"tabindex")))},tabbable:function(n){var r=e.attr(n,"tabindex"),i=isNaN(r);return(i||r>=0)&&t(n,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,n){function o(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r=n==="Width"?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return typeof t!="number"?s["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(n,r){return typeof n=="number"?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),r&&r.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length){var n=e(this[0]),r,i;while(n.length&&n[0]!==document){r=n.css("position");if(r==="absolute"||r==="relative"||r==="fixed"){i=parseInt(n.css("zIndex"),10);if(!isNaN(i)&&i!==0)return i}n=n.parent()}}return 0}}),e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}};var r=0,i=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];return t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix||t:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){var n=i.call(arguments,1),r=0,s=n.length,o,u;for(;r<s;r++)for(o in n[r])u=n[r][o],n[r].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,n){var r=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=i.call(arguments,1),a=this;return o?this.each(function(){var n,i=e.data(this,r);if(s==="instance")return a=i,!1;if(!i)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(i[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=i[s].apply(i,u);if(n!==i&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new n(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=r++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(n).undelegate(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var s=e.widget,o=!1;e(document).mouseup(function(){o=!1});var u=e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(o)return;this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which===1,i=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),o=!0,!0},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}if(t.which||t.button)this._mouseMoved=!0;return this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),o=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),a=e.widget("ui.slider",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",o=[];n=r.values&&r.values.length||1,i.length>n&&(i.slice(n).remove(),i=i.slice(0,n));for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),!this.range||!this.range.length?(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"):this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}),this.range.addClass(n+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;t==="range"&&this.options.range===!0&&(n==="min"?(this.options.value=this._values(0),this.options.values=null):n==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(i=this.options.values.length),t==="disabled"&&this.element.toggleClass("ui-state-disabled",!!n),this._super(t,n);switch(t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css(n==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;if(this.options.values&&this.options.values.length){n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step,r=Math.floor(+(e-t).toFixed(this._precision())/n)*n;e=r+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return this.options.min!==null&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var n,r,i,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),n=this._start(t,o);if(n===!1)return}}s=this.options.step,this.options.values&&this.options.values.length?r=i=this.values(o):r=i=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:i=this._valueMin();break;case e.ui.keyCode.END:i=this._valueMax();break;case e.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-s)}this._slide(t,o,i)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}),jQuery.cookie=function(e,t,n){if(typeof t=="undefined"){var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=jQuery.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}return a}n=n||{},t===null&&(t="",n.expires=-1);var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;typeof n.expires=="number"?(i=new Date,i.setTime(i.getTime()+n.expires*24*60*60*1e3)):i=n.expires,r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"",o=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")},define("vendors/jquery/plugins/jquery.cookie",function(){}),define("global/PageClasses/PageWithAppModeSwitcher",["jquery","underscore","vendors/Backbone/Mixin","datepicker","UIslider","vendors/jquery/plugins/jquery.cookie"],function(e,t,n){var r=new n({_selectors:function(){return t.defaults({appModeSwitcher:".js-app-mode-switcher"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("appModeSwitcher")]=this._onAppModeSwitcherClick,e},initialize:function(){this._super(),this._initAppMode()},_initAppMode:function(){var t=e.cookie("app_mode");t&&this._setAppModeCookie(t)},_onAppModeSwitcherClick:function(t){var n=e(t.currentTarget).data("appMode");this._setAppModeCookie(n),window.location.reload()},_setAppModeCookie:function(t){e.cookie("app_mode",t,{expires:30,path:"/",domain:"."+location.host.split(".").slice(-2).join(".")})}});return r}),define("global/SiteUrls",["BackboneX","underscore","jquery"],function(e,t,n){var r=e.Object.extend({_initProperties:function(){this._super(),this._routes=this.options.routes},hasRoute:function(e){return!!this._routes[e]},get:function(e,r,i){if(!this._routes[e])throw new Error('undefined route "'+e+'"');var s=decodeURI(this._routes[e]);return s=t(s).s(r),i&&(t.isObject(i)&&(i=n.param(i)),s+="#"+i),encodeURI(s)},goTo:function(e,t,n){window.location=this.get.apply(this,arguments)}});return r}),define("global/PageClasses/PageWithSiteUrls",["vendors/Backbone/Mixin","global/SiteUrls","global/elements/ServiceManager/WithServiceManager"],function(e,t,n){var r=new e({dependencies:[n]},{initialize:function(){this._super(),this._initSiteUrls()},_initSiteUrls:function(){this._getServiceManager().setService("urls",new t({routes:SITE_URLS}))}});return r}),function(e,t,n){if(e.PushStream)return;var r={},i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(e){return(e<10?"0":"")+e};r.dateToUTCString=function(e){var t=o(e.getUTCHours())+":"+o(e.getUTCMinutes())+":"+o(e.getUTCSeconds());return i[e.getUTCDay()]+", "+o(e.getUTCDate())+" "+s[e.getUTCMonth()]+" "+e.getUTCFullYear()+" "+t+" GMT"};var u=function(){var e=arguments[0]||{};for(var t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)if(!n.hasOwnProperty||n.hasOwnProperty(r))e[r]=n[r]}return e},a=/^[\],:{}\s]*$/,f=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,l=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,c=/(?:^|:|,)(?:\s*\[)+/g,h=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")};r.parseJSON=function(t){if(!t||!b(t))return null;t=h(t);if(e.JSON&&e.JSON.parse)try{return e.JSON.parse(t)}catch(n){throw"Invalid JSON: "+t}if(a.test(t.replace(f,"@").replace(l,"]").replace(c,"")))return(new Function("return "+t))();throw"Invalid JSON: "+t};var p=function(e){var t={};return t[e.tagArgument]="",t[e.timeArgument]="",t[e.eventIdArgument]="",e.messagesControlByArgument&&(t[e.tagArgument]=Number(e._etag),e._lastModified?t[e.timeArgument]=e._lastModified:e._lastEventId&&(t[e.eventIdArgument]=e._lastEventId)),t},d=function(){return(new Date).getTime()},v=function(){return{_:d()}},m=function(t){var n=t;if(typeof t=="object"){n="";for(var r in t)if(!t.hasOwnProperty||t.hasOwnProperty(r))n+="&"+r+"="+e.escape(t[r]);n=n.substring(1)}return n||""},g=function(e,t){return e+(e.indexOf("?")<0?"?":"&")+m(t)},y=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},b=function(e){return Object.prototype.toString.call(e)==="[object String]"},w=function(e){return Object.prototype.toString.call(e)==="[object Date]"},E={logger:null,debug:function(){I.LOG_LEVEL==="debug"&&E._log.apply(E._log,arguments)},info:function(){(I.LOG_LEVEL==="info"||I.LOG_LEVEL==="debug")&&E._log.apply(E._log,arguments)},error:function(){E._log.apply(E._log,arguments)},_initLogger:function(){var t=e.console;t&&t.log&&(t.log.apply?E.logger=t.log:typeof t.log=="object"&&Function.prototype.bind?E.logger=Function.prototype.bind.call(t.log,t):typeof t.log=="object"&&Function.prototype.call&&(E.logger=function(){Function.prototype.call.call(t.log,t,Array.prototype.slice.call(arguments))}))},_log:function(){E.logger||E._initLogger();if(E.logger)try{E.logger.apply(e.console,arguments)}catch(n){E._initLogger(),E.logger&&E.logger.apply(e.console,arguments)}var r=t.getElementById(I.LOG_OUTPUT_ELEMENT_ID);if(r){var i="";for(var s=0;s<arguments.length;s++)i+=arguments[s]+" ";r.innerHTML+=i+"\n";var o=r.innerHTML.split("\n");o.length>100&&(r.innerHTML=o.slice(-100).join("\n"))}}},S={_getXHRObject:function(){var t=!1;try{t=new e.XMLHttpRequest}catch(n){try{t=new e.XDomainRequest}catch(r){try{t=new e.ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{t=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(s){t=!1}}}}return t},_send:function(t,r){t=t||{},t.timeout=t.timeout||3e4;var i=S._getXHRObject();if(!i||!t.url)return;S.clear(t),i.onreadystatechange=function(){i.readyState===4&&(S.clear(t),t.afterReceive&&t.afterReceive(i),i.status===200?t.success&&t.success(i.responseText):t.error&&t.error(i.status))},t.beforeOpen&&t.beforeOpen(i);var s={},o=null,a="GET";r?(o=m(t.data),a="POST"):s=t.data||{},i.open(a,g(t.url,u({},s,v())),!0),t.beforeSend&&t.beforeSend(i);var f=function(){try{i.onreadystatechange=n,i.abort()}catch(e){}S.clear(t),t.error(304)};return r?(i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")):t.timeoutId=e.setTimeout(f,t.timeout+2e3),i.send(o),i},_clear_script:function(e){e&&(e.onerror=e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e))},_clear_timeout:function(e){e.timeoutId=O(e.timeoutId)},clear:function(e){S._clear_timeout(e),S._clear_script(t.getElementById(e.scriptId))},jsonp:function(n){n.timeout=n.timeout||3e4,S.clear(n);var r=t.head||t.getElementsByTagName("head")[0],i=t.createElement("script"),s=d(),o=function(){S.clear(n);var t=n.data.callback;t&&(e[t]=function(){e[t]=null});var r=d();n.error(r-s>n.timeout/2?304:0)},a=function(){S.clear(n),n.load()};i.onerror=o,i.onload=i.onreadystatechange=function(e){(!i.readyState||/loaded|complete/.test(i.readyState))&&a()},n.beforeOpen&&n.beforeOpen({}),n.beforeSend&&n.beforeSend({}),n.timeoutId=e.setTimeout(o,n.timeout+2e3),n.scriptId=n.scriptId||d();var f=n.data.callback;return f&&(e[f]=function(){e[f]=null}),n.data.callback=n.scriptId+"_onmessage_"+d(),e[n.data.callback]=n.success,i.setAttribute("src",g(n.url,u({},n.data,v()))),i.setAttribute("async","async"),i.setAttribute("id",n.scriptId),r.insertBefore(i,r.firstChild),n},load:function(e){return S._send(e,!1)},post:function(e){return S._send(e,!0)}},x=function(t){return t?e.escape(t):""},T=function(t){return t?e.unescape(t):""};r.parseMessage=function(e,t){var n=e;b(e)&&(n=r.parseJSON(e));var i={id:n[t.jsonIdKey],channel:n[t.jsonChannelKey],text:b(n[t.jsonTextKey])?T(n[t.jsonTextKey]):n[t.jsonTextKey],tag:n[t.jsonTagKey],time:n[t.jsonTimeKey],eventid:n[t.jsonEventIdKey]||""};return i};var N=function(e){return e.backtrack?".b"+Number(e.backtrack):""},C=function(e,t){var n="";for(var r in e)if(!e.hasOwnProperty||e.hasOwnProperty(r))n+="/"+r+(t?N(e[r]):"");return n},k=function(e,t,n,r){var i=e.wrapper.type===P.TYPE,s=e.useSSL,o=i?s?"wss://":"ws://":s?"https://":"http://";o+=e.host,o+=!s&&e.port===80||s&&e.port===443?"":":"+e.port,o+=t;var a=C(e.channels,r);if(e.channelsByArgument){var f={};f[e.channelsArgument]=a.substring(1),n=u({},n,f)}else o+=a;return g(o,n)},L=function(e){var t="",n=e.useSSL?"https://":"http://";n+=e.host,n+=e.port!==80&&e.port!==443?":"+e.port:"",n+=e.urlPrefixPublisher;for(var r in e.channels)if(!e.channels.hasOwnProperty||e.channels.hasOwnProperty(r)){t=r;break}return n+="?id="+t,n};r.extract_xss_domain=function(e){if(e.match(/^(\d{1,3}\.){3}\d{1,3}$/))return e;var t=e.split("."),n=Math.max(t.length-1,e.match(/(\w{4,}\.\w{2}|\.\w{3,})$/)?2:3);return t.slice(-1*n).join(".")};var A=function(e,t){return function(){return e.apply(t,arguments)}},O=function(t){return t&&e.clearTimeout(t),null},M=function(e){E.info("["+this.type+"] message received",arguments);var t=r.parseMessage(e.data,this.pushstream);t.tag&&(this.pushstream._etag=t.tag),t.time&&(this.pushstream._lastModified=t.time),t.eventid&&(this.pushstream._lastEventId=t.eventid),this.pushstream._onmessage(t.text,t.id,t.channel,t.eventid,!0)},_=function(){this.pushstream._onopen(),E.info("["+this.type+"] connection opened")},D=function(t){E.info("["+this.type+"] error (disconnected by server):",t);if(this.pushstream.readyState===I.OPEN&&this.type===H.TYPE&&t.type==="error"&&this.connection.readyState===e.EventSource.CONNECTING)return;this._closeCurrentConnection(),this.pushstream._onerror({type:t&&(t.type==="load"||t.type==="close")||this.pushstream.readyState===I.CONNECTING?"load":"timeout"})},P=function(t){if(!e.WebSocket&&!e.MozWebSocket)throw"WebSocket not supported";this.type=P.TYPE,this.pushstream=t,this.connection=null};P.TYPE="WebSocket",P.prototype={connect:function(){this._closeCurrentConnection();var t=u({},this.pushstream.extraParams(),v(),p(this.pushstream)),n=k(this.pushstream,this.pushstream.urlPrefixWebsocket,t,!this.pushstream._useControlArguments());this.connection=e.WebSocket?new e.WebSocket(n):new e.MozWebSocket(n),this.connection.onerror=A(D,this),this.connection.onclose=A(D,this),this.connection.onopen=A(_,this),this.connection.onmessage=A(M,this),E.info("[WebSocket] connecting to:",n)},disconnect:function(){this.connection&&(E.debug("[WebSocket] closing connection to:",this.connection.URL),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(e){}this.connection=null}},sendMessage:function(e){this.connection&&this.connection.send(e)}};var H=function(t){if(!e.EventSource)throw"EventSource not supported";this.type=H.TYPE,this.pushstream=t,this.connection=null};H.TYPE="EventSource",H.prototype={connect:function(){this._closeCurrentConnection();var t=u({},this.pushstream.extraParams(),v(),p(this.pushstream)),n=k(this.pushstream,this.pushstream.urlPrefixEventsource,t,!this.pushstream._useControlArguments());this.connection=new e.EventSource(n),this.connection.onerror=A(D,this),this.connection.onopen=A(_,this),this.connection.onmessage=A(M,this),E.info("[EventSource] connecting to:",n)},disconnect:function(){this.connection&&(E.debug("[EventSource] closing connection to:",this.connection.URL),this.connection.onclose=null,this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){if(this.connection){try{this.connection.close()}catch(e){}this.connection=null}}};var B=function(e){this.type=B.TYPE,this.pushstream=e,this.connection=null,this.url=null,this.frameloadtimer=null,this.pingtimer=null,this.iframeId="PushStreamManager_"+e.id};B.TYPE="Stream",B.prototype={connect:function(){this._closeCurrentConnection();var e=r.extract_xss_domain(this.pushstream.host);try{t.domain=e}catch(n){E.error("[Stream] (warning) problem setting document.domain = "+e+" (OBS: IE8 does not support set IP numbers as domain)")}var i=u({},this.pushstream.extraParams(),v(),{streamid:this.pushstream.id},p(this.pushstream));this.url=k(this.pushstream,this.pushstream.urlPrefixStream,i,!this.pushstream._useControlArguments()),E.debug("[Stream] connecting to:",this.url),this.loadFrame(this.url)},disconnect:function(){this.connection&&(E.debug("[Stream] closing connection to:",this.url),this._closeCurrentConnection(),this.pushstream._onclose())},_clear_iframe:function(){var e=t.getElementById(this.iframeId);e&&(e.onload=null,e.src="about:blank",e.parentNode&&e.parentNode.removeChild(e))},_closeCurrentConnection:function(){this._clear_iframe(),this.connection&&(this.pingtimer=O(this.pingtimer),this.frameloadtimer=O(this.frameloadtimer),this.connection=null,this.transferDoc=null,typeof e.CollectGarbage=="function"&&e.CollectGarbage())},loadFrame:function(n){this._clear_iframe();try{var r=new e.ActiveXObject("htmlfile");r.open(),r.write('<html><script>document.domain="'+t.domain+'";</script></html>'),r.parentWindow.PushStream=I,r.close();var i=r.createElement("div");r.appendChild(i),i.innerHTML='<iframe src="'+n+'"></iframe>',this.connection=i.getElementsByTagName("IFRAME")[0],this.connection.onload=A(D,this),this.transferDoc=r}catch(s){var o=t.createElement("IFRAME");o.style.width="1px",o.style.height="1px",o.style.border="none",o.style.position="absolute",o.style.top="-10px",o.style.marginTop="-10px",o.style.zIndex="-20",o.PushStream=I,t.body.appendChild(o),o.setAttribute("src",n),o.onload=A(D,this),this.connection=o}this.connection.setAttribute("id",this.iframeId),this.frameloadtimer=e.setTimeout(A(D,this),this.pushstream.timeout)},register:function(e){this.frameloadtimer=O(this.frameloadtimer),e.p=A(this.process,this),this.connection.onload=A(this._onframeloaded,this),this.pushstream._onopen(),this.setPingTimer(),E.info("[Stream] frame registered")},process:function(e,t,n,r,i,s){this.pingtimer=O(this.pingtimer),E.info("[Stream] message received",arguments),e!==-1&&(s&&(this.pushstream._etag=s),i&&(this.pushstream._lastModified=i),r&&(this.pushstream._lastEventId=r)),this.pushstream._onmessage(T(n),e,t,r||"",!0),this.setPingTimer()},_onframeloaded:function(){E.info("[Stream] frame loaded (disconnected by server)"),this.connection.onload=null,this.disconnect()},setPingTimer:function(){this.pingtimer&&O(this.pingtimer),this.pingtimer=e.setTimeout(A(D,this),this.pushstream.pingtimeout)}};var j=function(e){this.type=j.TYPE,this.pushstream=e,this.connection=null,this.opentimer=null,this.messagesQueue=[],this._linkedInternalListen=A(this._internalListen,this),this.xhrSettings={timeout:this.pushstream.timeout,data:{},url:null,success:A(this.onmessage,this),error:A(this.onerror,this),load:A(this.onload,this),beforeSend:A(this.beforeSend,this),afterReceive:A(this.afterReceive,this)}};j.TYPE="LongPolling",j.prototype={connect:function(){this.messagesQueue=[],this._closeCurrentConnection(),this.urlWithBacktrack=k(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!0),this.urlWithoutBacktrack=k(this.pushstream,this.pushstream.urlPrefixLongpolling,{},!1),this.xhrSettings.url=this.urlWithBacktrack;var t=r.extract_xss_domain(this.pushstream.host),n=r.extract_xss_domain(e.location.hostname),i=this.pushstream.port,s=e.location.port?Number(e.location.port):this.pushstream.useSSL?443:80;this.useJSONP=t!==n||i!==s||this.pushstream.useJSONP,this.xhrSettings.scriptId="PushStreamManager_"+this.pushstream.id,this.useJSONP&&(this.pushstream.messagesControlByArgument=!0),this._internalListen(),this.opentimer=e.setTimeout(A(_,this),100),E.info("[LongPolling] connecting to:",this.xhrSettings.url)},_listen:function(){this._internalListenTimeout&&O(this._internalListenTimeout),this._internalListenTimeout=e.setTimeout(this._linkedInternalListen,100)},_internalListen:function(){this.pushstream._keepConnected&&(this.xhrSettings.url=this.pushstream._useControlArguments()?this.urlWithoutBacktrack:this.urlWithBacktrack,this.xhrSettings.data=u({},this.pushstream.extraParams(),this.xhrSettings.data,p(this.pushstream)),this.useJSONP?this.connection=S.jsonp(this.xhrSettings):this.connection=S.load(this.xhrSettings))},disconnect:function(){this.connection&&(E.debug("[LongPolling] closing connection to:",this.xhrSettings.url),this._closeCurrentConnection(),this.pushstream._onclose())},_closeCurrentConnection:function(){this.opentimer=O(this.opentimer);if(this.connection){try{this.connection.abort()}catch(e){try{S.clear(this.connection)}catch(t){}}this.connection=null,this.xhrSettings.url=null}},beforeSend:function(e){this.pushstream.messagesControlByArgument||(e.setRequestHeader("If-None-Match",this.pushstream._etag),e.setRequestHeader("If-Modified-Since",this.pushstream._lastModified))},afterReceive:function(e){this.pushstream.messagesControlByArgument||(this.pushstream._etag=e.getResponseHeader("Etag"),this.pushstream._lastModified=e.getResponseHeader("Last-Modified")),this.connection=null},onerror:function(e){this.pushstream._keepConnected&&(e===304?this._listen():(E.info("[LongPolling] error (disconnected by server):",e),this._closeCurrentConnection(),this.pushstream._onerror({type:e===403||this.pushstream.readyState===I.CONNECTING?"load":"timeout"})))},onload:function(){this._listen()},onmessage:function(e){this._internalListenTimeout&&O(this._internalListenTimeout),E.info("[LongPolling] message received",e);var t=null,n=y(e)?e:e.replace(/\}\{/g,"}\r\n{").split("\r\n");for(var i=0;i<n.length;i++)n[i]&&(t=r.parseMessage(n[i],this.pushstream),this.messagesQueue.push(t),this.pushstream.messagesControlByArgument&&t.time&&(this.pushstream._etag=t.tag,this.pushstream._lastModified=t.time));this._listen();while(this.messagesQueue.length>0){var s=this.messagesQueue.shift();this.pushstream._onmessage(s.text,s.id,s.channel,s.eventid,this.messagesQueue.length===0)}}};var F=[],I=function(t){t=t||{},this.id=F.push(this)-1,this.useSSL=t.useSSL||!1,this.host=t.host||e.location.hostname,this.port=Number(t.port||(this.useSSL?443:80)),this.timeout=t.timeout||3e4,this.pingtimeout=t.pingtimeout||3e4,this.reconnectOnTimeoutInterval=t.reconnectOnTimeoutInterval||3e3,this.reconnectOnChannelUnavailableInterval=t.reconnectOnChannelUnavailableInterval||6e4,this.lastEventId=t.lastEventId||null,this.messagesPublishedAfter=t.messagesPublishedAfter,this.messagesControlByArgument=t.messagesControlByArgument||!1,this.tagArgument=t.tagArgument||"tag",this.timeArgument=t.timeArgument||"time",this.eventIdArgument=t.eventIdArgument||"eventid",this.useJSONP=t.useJSONP||!1,this._reconnecttimer=null,this._etag=0,this._lastModified=null,this._lastEventId=null,this.urlPrefixPublisher=t.urlPrefixPublisher||"/pub",this.urlPrefixStream=t.urlPrefixStream||"/sub",this.urlPrefixEventsource=t.urlPrefixEventsource||"/ev",this.urlPrefixLongpolling=t.urlPrefixLongpolling||"/lp",this.urlPrefixWebsocket=t.urlPrefixWebsocket||"/ws",this.jsonIdKey=t.jsonIdKey||"id",this.jsonChannelKey=t.jsonChannelKey||"channel",this.jsonTextKey=t.jsonTextKey||"text",this.jsonTagKey=t.jsonTagKey||"tag",this.jsonTimeKey=t.jsonTimeKey||"time",this.jsonEventIdKey=t.jsonEventIdKey||"eventid",this.modes=(t.modes||"eventsource|websocket|stream|longpolling").split("|"),this.wrappers=[],this.wrapper=null,this.onchanneldeleted=t.onchanneldeleted||null,this.onmessage=t.onmessage||null,this.onerror=t.onerror||null,this.onstatuschange=t.onstatuschange||null,this.extraParams=t.extraParams||function(){return{}},this.channels={},this.channelsCount=0,this.channelsByArgument=t.channelsByArgument||!1,this.channelsArgument=t.channelsArgument||"channels";for(var n=0;n<this.modes.length;n++)try{var r=null;switch(this.modes[n]){case"websocket":r=new P(this);break;case"eventsource":r=new H(this);break;case"longpolling":r=new j(this);break;case"stream":r=new B(this)}this.wrappers[this.wrappers.length]=r}catch(i){E.info(i)}this.readyState=0};I.LOG_LEVEL="error",I.LOG_OUTPUT_ELEMENT_ID="Log4jsLogOutput",I.CLOSED=0,I.CONNECTING=1,I.OPEN=2,I.prototype={addChannel:function(e,t){if(x(e)!==e)throw"Invalid channel name! Channel has to be a set of [a-zA-Z0-9]";E.debug("entering addChannel");if(typeof this.channels[e]!="undefined")throw"Cannot add channel "+e+": already subscribed";t=t||{},E.info("adding channel",e,t),this.channels[e]=t,this.channelsCount++,this.readyState!==I.CLOSED&&this.connect(),E.debug("leaving addChannel")},removeChannel:function(e){this.channels[e]&&(E.info("removing channel",e),delete this.channels[e],this.channelsCount--)},removeAllChannels:function(){E.info("removing all channels"),this.channels={},this.channelsCount=0},_setState:function(e){this.readyState!==e&&(E.info("status changed",e),this.readyState=e,this.onstatuschange&&this.onstatuschange(this.readyState))},connect:function(){E.debug("entering connect");if(!this.host)throw"PushStream host not specified";if(isNaN(this.port))throw"PushStream port not specified";if(!this.channelsCount)throw"No channels specified";if(this.wrappers.length===0)throw"No available support for this browser";this._keepConnected=!0,this._lastUsedMode=0,this._connect(),E.debug("leaving connect")},disconnect:function(){E.debug("entering disconnect"),this._keepConnected=!1,this._disconnect(),this._setState(I.CLOSED),E.info("disconnected"),E.debug("leaving disconnect")},_useControlArguments:function(){return this.messagesControlByArgument&&(this._lastModified!==null||this._lastEventId!==null)},_connect:function(){this._lastEventId===null&&(this._lastEventId=this.lastEventId);if(this._lastModified===null){var e=this.messagesPublishedAfter;if(!w(e)){var t=Number(this.messagesPublishedAfter);t>0?(e=new Date,e.setTime(e.getTime()-t*1e3)):t<0&&(e=new Date(0))}w(e)&&(this._lastModified=r.dateToUTCString(e))}this._disconnect(),this._setState(I.CONNECTING),this.wrapper=this.wrappers[this._lastUsedMode++%this.wrappers.length];try{this.wrapper.connect()}catch(n){this.wrapper&&this.wrapper.disconnect()}},_disconnect:function(){this._reconnecttimer=O(this._reconnecttimer),this.wrapper&&this.wrapper.disconnect()},_onopen:function(){this._reconnecttimer=O(this._reconnecttimer),this._setState(I.OPEN),this._lastUsedMode>0&&this._lastUsedMode--},_onclose:function(){this._reconnecttimer=O(this._reconnecttimer),this._setState(I.CLOSED),this._reconnect(this.reconnectOnTimeoutInterval)},_onmessage:function(e,t,n,r,i){E.debug("message",e,t,n,r,i),t===-2?this.onchanneldeleted&&this.onchanneldeleted(n):t>0&&this.onmessage&&this.onmessage(e,t,n,r,i)},_onerror:function(e){this._setState(I.CLOSED),this._reconnect(e.type==="timeout"?this.reconnectOnTimeoutInterval:this.reconnectOnChannelUnavailableInterval),this.onerror&&this.onerror(e)},_reconnect:function(t){this._keepConnected&&!this._reconnecttimer&&this.readyState!==I.CONNECTING&&(E.info("trying to reconnect in",t),this._reconnecttimer=e.setTimeout(A(this._connect,this),t))},sendMessage:function(e,t,n){e=x(e),this.wrapper.type===P.TYPE?(this.wrapper.sendMessage(e),t&&t()):S.post({url:L(this),data:e,success:t,error:n})}},I.sendMessage=function(e,t,n,r){S.post({url:e,data:x(t),success:n,error:r})},I.register=function(e){var t=e.window.location.href.match(/streamid=([0-9]*)&?/);t[1]&&F[t[1]]&&F[t[1]].wrapper.register(e)},I.unload=function(){for(var e=0;e<F.length;e++)try{F[e].disconnect()}catch(t){}},e.PushStream=I,e.PushStreamManager=F,e.attachEvent&&e.attachEvent("onunload",I.unload),e.addEventListener&&e.addEventListener.call(e,"unload",I.unload,!1)}(window,document),define("vendors/pushstream",function(e){return function(){var t,n;return t||e.PushStream}}(this)),define("mobile/elements/PushNotificator/PushNotificatorModel",["BackboneX","underscore","vendors/pushstream","global/errorReporter"],function(e,t,n,r){var i=e.Model.extend({defaults:function(){return{count:0}},_initProperties:function(){this._super(),this._pushstream=null},createConnection:function(e,t){try{var i=this._pushstream=new n(e);i.onmessage=this._onMessage.bind(this),i.addChannel(t),i.connect()}catch(s){r(s)}return this},_onMessage:function(e){var t=this.get("count")<e.countNew;t&&this.trigger("newMessages",this),this.set({count:e.countNew})},readMessage:function(){return this.set({count:this.get("count")-1}),this}});return i}),define("mobile/elements/PushNotificator/PushNotificatorView",["BackboneX","underscore","./PushNotificatorModel"],function(e,t,n){var r=e.View.extend({_selectors:function(){return t.defaults({counter:".menu-main__unread-message-count"},this._super())},initialize:function(){this._super(),this._data.channel&&this._initModel()},_initModel:function(){this.model=new n({count:parseInt(this.$el.text(),10)||0}),this.model.createConnection({jsonTextKey:"data",urlPrefixLongpolling:this._data.longPolling,urlPrefixWebsocket:this._data.webSocket,modes:this._data.modes||"websocket|longpolling",useSSL:!0},this._data.channel),this.model.on("change",this.render,this)},render:function(){var e=this.model.get("count");this._toggleClass("hidden",!e).text(e)}});return r}),define("mobile/elements/PushNotificator/PageWithPushNotificator",["underscore","vendors/Backbone/Mixin","./PushNotificatorView"],function(e,t,n){var r=new t({_selectors:function(){return e.defaults({pushNotificator:".js-push-notification"},this._super())},initialize:function(){this._super(),this._initPushNotifications()},_initPushNotifications:function(){var e=new n({el:this._elem("pushNotificator")});this._getServiceManager().setService("pushNotificator",e)}});return r}),define("mobile/elements/Menu/MenuItem",["underscore","BackboneX","global/elements/Visibility/VisibilityShowable"],function(e,t,n){var r=t.View.mix(n).extend({focus:function(){return this.$el.focus(),this}});return r}),define("mobile/elements/Menu/MessagesMenuItem",["underscore","global/elements/ServiceManager/WithServiceManager","mobile/pages/all/Menu/MessagesDataListView","./MenuItem"],function(e,t,n,r){var i=r.mix(t).extend({_selectors:function(){return e.defaults({messagesDataList:".js-messages-data-list"},this._super())},_initProperties:function(){this._super(),this._messagesDataList=null},initialize:function(){this._super(),this._initMessagesDataList(),this._initHandlers()},_initMessagesDataList:function(){this._messagesDataList=new n({el:this._elem("messagesDataList")})},_initHandlers:function(){this.on("fetchNewMessages",this._onFetchNewMessages,this),this._getService("pushNotificator").model.on("newMessages",this._onPushNotificatorNewMessages,this)},_onFetchNewMessages:function(){this._messagesDataList.fetchNewMessages()},_onPushNotificatorNewMessages:function(){this._messagesDataList.isVisible()?this.trigger("newMessages"):this._messagesDataList.fetchNewMessages()},show:function(){return this._super(),this._messagesDataList.update(),this}});return i}),define("mobile/elements/Timer/AbstractTimer",["underscore","BackboneX"],function(e,t){var n=t.View.extend({_initProperties:function(){this._super(),this._nextTickTimeoutId=null,this._currentClientTime=0,this._startClientTime=0,this._STEP=1e3},start:function(){return this._startClientTime=this._currentClientTime=Date.now(),this._tick(),this},_tick:function(e){clearTimeout(this._nextTickTimeoutId),this.trigger("tick");if(this._isTimerEnded()){this.trigger("end");return}e=e||0,this._nextTickTimeoutId=setTimeout(this._onTick,this._STEP-e)},_isTimerEnded:function(){return!1},_onTick:e.method.bind(function(){var e=Date.now(),t=(e-this._currentClientTime)%100;this._currentClientTime=e,this._tick(t)}),stop:function(){clearTimeout(this._nextTickTimeoutId)}});return n}),define("mobile/elements/Timer/TimerFormatsView",["underscore","./AbstractTimer","vendors/jquery/plugins/jquery.backgroundPosition","vendors/jquery/plugins/jquery.easing"],function(e,t){var n=t.extend({_selectors:function(){return e.defaults({digits:".js-timer-num",digit:".js-timer-%s"},this._super())},_initProperties:function(){this._super(),this._animationType="easeInOutBack",this._formats=null,this._prevFormats=null,this._digitHeight=this._elem("digits").height(),this._currentTime=0,this._startTime=0,this._updateDigitStrategy=this.options.updateDigitStrategy;if(!this._updateDigitStrategy)throw new Error("TimerView needs an updateDigitStrategy");this._formatStrategy=this.options.formatStrategy;if(!this._formatStrategy)throw new Error("TimerView needs an formatStrategy")},initialize:function(){this._super();var e=this._data.remainingTime;e&&this.start(e)},start:function(e){return this._startTime=this._currentTime=e,this._super()},_updateDigitsPositions:function(){e.each(this._formats,this._updateDigitsPairPositions,this)},_updateDigitsPairPositions:function(e,t){var n;for(var r=0;r<e.length;r++){n=e[r];if(this._prevFormats[t][r]===n)continue;this._updateDigit(this._elem("digit",t).eq(r),n)}},_updateDigit:function(e,t){this._updateDigitStrategy(e,t)},_secondsToFormat:function(e){return this._formatStrategy(e)},_numberToArray:function(e){return e>9?[Math.floor(e/10),e%10]:[0,e]},_tick:function(e){this._currentTime=this._startTime-Math.round((this._currentClientTime-this._startClientTime)/this._STEP),this._formats=this._secondsToFormat(this._currentTime),this._prevFormats=this._prevFormats||this._formats,this._updateDigitsPositions(),this._prevFormats=this._formats,this._super(e)},getFormats:function(){return this._formats},_isTimerEnded:function(){return this._currentTime<=0}});return n}),define("mobile/elements/Timer/contentUpdateDigitStrategy",[],function(){return function(e,t){e.text(t)}}),define("mobile/elements/Timer/formatStrategyMMSS",[],function(){return function(e){var t=Math.floor(e/60),n=e-t*60;return{mm:this._numberToArray(t),ss:this._numberToArray(n)}}}),define("mobile/elements/Menu/ConfirmEmailFormView",["underscore","global_forms/Form/Ajax/AjaxFormView","mobile/elements/Timer/TimerFormatsView","mobile/elements/Timer/contentUpdateDigitStrategy","mobile/elements/Timer/formatStrategyMMSS"],function(e,t,n,r,i){var s=t.extend({_selectors:function(){return e.defaults({timer:".js-timer",repeatWaiting:".js-repeat-waiting",repeatReady:".js-repeat-ready",successMessage:".js-confirm-email-success"},this._super())},_initProperties:function(){this._super(),this._repeatTimer=null,this._repeatLockTime=this._elem("timer").data("lockTime")},initialize:function(){this._super(),this._initRepeatTimer()},_initRepeatTimer:function(){this._repeatTimer=new n({el:this._elem("timer"),updateDigitStrategy:r,formatStrategy:i}),this._repeatTimer.on("end",this._onRepeatTimerEnd,this)},_onRepeatTimerEnd:function(){this.enableSubmitButton(),this._addClass("hidden","repeatWaiting"),this._removeClass("hidden","repeatReady")},_sendForm:function(){this._preventEnableSubmitButton=!1,this._addClass("hidden","repeatReady"),this._super()},_processSaveSuccess:function(e){this._super(e),this._addClass("hidden","repeatReady"),this._removeClass("hidden","repeatWaiting"),this._removeClass("hidden","successMessage"),this._$window.scrollTo(this._elem("successMessage")),this._repeatTimer.start(this._repeatLockTime),this._preventEnableSubmitButton=!0,this.disableSubmitButton()}});return s}),define("mobile/elements/Menu/PersonalDataMenuItem",["underscore","./MenuItem","./ConfirmEmailFormView"],function(e,t,n){var r=t.extend({_selectors:function(){return e.defaults({notification:".notification",closeButton:".notification__close"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("closeButton")]=this._onCloseButtonClick,e},_initProperties:function(){this._super(),this._confirmEmailForm=null},initialize:function(){this._super(),this._initConfirmEmailForm()},_initConfirmEmailForm:function(){this._confirmEmailForm=new n({el:document.forms.confirmEmail})},_onCloseButtonClick:function(){this._addClass("hidden","notification")}});return r}),define("mobile/elements/Menu/Menu",["underscore","jquery","BackboneX","global/Factories/Factory","./MenuItem","./MessagesMenuItem","./PersonalDataMenuItem"],function(e,t,n,r,i,s,o){var u=r.extend({_selectors:function(){return e.defaults({page:".page",menu:".menu",menuItem:".menu__items",menuButton:".menu-main__link",menuItemButton:'.menu-main__link[data-menu="%s"]',menuLink:".menu__sub-item-title",closeButton:".menu-closer"},this._super())},_classes:function(){return e.defaults({menuOpened:"menu-main__root_opened_yes",menuButtonPressed:"menu-main__link_active_yes",closeButtonPressed:"menu-closer_opened_yes"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("closeButton")]=this._onCloseButtonClick,e},_products:function(){return e.defaults({"*":i,MessagesMenuItem:s,PersonalDataMenuItem:o},this._super())},_initProperties:function(){this._super(),this._items={},this._opened=!1,this._current=null,this._scrollTop=0},initialize:function(){this._super(),this._initItems(),this._initReloadLinkWithHash()},_initReloadLinkWithHash:function(){this._elem("menuLink").filter('[href*="#"]').on("click",function(e){var t=e.currentTarget,n=window.location;t.pathname===n.pathname&&(n.href=t.href,n.reload())})},_initItems:function(){this._elem("menuItem").each(this._initItem.bind(this))},_initItem:function(e,n){var r=t(n),i=r.data("name");this._items[i]=this.createInstance(n)},_getSuitableProductDescriptor:function(e){var t=e.data("type");return this._productDescriptors[t]||this._productDescriptors["*"]},getItem:function(e){return this._items[e]||null},show:function(e){return this._current===e?(this.hide(),this):(this._opened||(this._addClass("closeButtonPressed","closeButton"),this._addClass("menuOpened",this._$body),this._scrollTop=this._$window.scrollTop(),this._addClass("hidden","page"),this._$window.scrollTop(0),this._removeClass("hidden","menu")),this._removeClass("menuButtonPressed","menuButton"),this._addClass("menuButtonPressed",this._elem("menuItemButton",e)),this._setCurrentItem(e),n.trigger("change:visibility"),this._opened=!0,this.trigger("show"),this)},hide:function(){return this._removeClass("menuButtonPressed","menuButton"),this._removeClass("closeButtonPressed","closeButton"),this._removeClass("menuOpened",this._$body),this._addClass("hidden","menu"),this._setCurrentItem(null),this._removeClass("hidden","page"),this._$window.scrollTop(this._scrollTop),this._opened=!1,this.trigger("hide"),this},_setCurrentItem:function(e){this._current&&this.getItem(this._current).hide(),this._current=e,e&&this.getItem(e).show().focus()},_onCloseButtonClick:function(){this.hide()}});return u}),define("mobile/elements/Menu/PageWithMenu",["underscore","jquery","vendors/Backbone/Mixin","./Menu"],function(e,t,n,r){var i=new n({_selectors:function(){return e.defaults({menuLink:".js-menu-link"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("menuLink")]=this._onMenuClick,e},_initProperties:function(){this._super(),this._menu=null},initialize:function(){this._super(),this._menu=new r({el:this.$el})},_onMenuClick:function(e){e.preventDefault();var n=t(e.currentTarget);this._menu.show(n.data("menu"))},getMenu:function(){return this._menu}});return i}),define("global/elements/Tabs/Tabs",["BackboneX","underscore","jquery","global/Anchor/Anchor"],function(e,t,n,r){var i=e.View.extend({_classes:function(){return t.defaults({activeHeaderItem:"tabs__title_active_yes",activeBlocksItem:"tabs__body_active_yes"},this._super())},_selectors:function(){return t.defaults({control:".tabs__control",headerItem:".tabs__title",blocksItem:".tabs__body",activeControl:".tabs__title_active_yes .tabs__control"},this._super())},events:function(){return this._getHeaderItems().on("click",this._selector("control"),this._onTabClick.bind(this)),this._super()},initialize:function(){this._super(),this.manager=this.options.manager;var e=this._elem("control"),t=e[0].hash.split("#")[1].split("=");this.name=t[0],this.activeTab=t[1]||t[0],this._preventScroll=!1},_onTabClick:function(e){var i=this,s=e.currentTarget,o=i.activeTab,u=s.href.split("#")[1]||"",a=u.split("=");if(u===i.activeTab){r.get(a[0])===a[1]&&e.preventDefault();return}i.activeTab=u,i.manager.preventChangeOnHashChange=!0,setTimeout(function(){i.manager.preventChangeOnHashChange=!1},200),a.length===2?(e.preventDefault(),r.set(a[0],a[1])):this._preventScroll&&this._changeHashWithoutScroll(e,u,o),i.showTab(u.split("=")[1]||u,s),n.browser.msie&&(n("html").height("auto").height("100%"),t.defer(function(){n("html").height("auto").height("100%")}))},_changeHashWithoutScroll:function(e,t,i){var s=n("a[name="+t+"]:first");if(!s.length)return;s.removeAttr("name"),e.preventDefault(),i&&r.unset(i.split("=")[0],{silent:!0}),r.set(t,null),r.on("hashchange",function(){s.attr("name",t)})},preventScroll:function(){this._preventScroll=!0},getActiveTab:function(){return this.activeTab||(this.activeTab=this._findElem("activeControl")[0].hash.split("#")[1]),this.activeTab.split("=")[1]||this.activeTab},getActiveTabNumber:function(){return this._findElem("activeHeaderItem").eq(0).index()},getActiveTabEl:function(){return this.$activeTab||this._findElem("activeBlocksItem").eq(0)},_getHeaderItems:t.method.once(function(){return this.$(this._selector("headerItem")+":first").parent().children(this._selector("headerItem"))}),_getBlocksItems:t.method.once(function(){return this.$(this._selector("blocksItem")+":first").parent().children(this._selector("blocksItem"))}),showTab:function(t,n){var r=this._getTabsHeaderItem(t,n),i=this._class("activeHeaderItem");if(r.hasClass(i))return;var s=this._getHeaderItems();s.removeClass(i),r.addClass(i);var o=this._getBlocksItems(),u=s.index(r),a=o.eq(u),f=this._class("activeBlocksItem");o.removeClass(f),a.addClass(f),this.$activeTab=a,this.trigger("change",t,a,this.name),e.trigger("change:visibility")},_getTabsHeaderItem:function(e,t){var r;return this._tabsHeaderItems||(this._tabsHeaderItems={}),!t&&!this._tabsHeaderItems[e]?r=this._getLinkEl(e):r=n(t),r&&!this._tabsHeaderItems[e]&&(this._tabsHeaderItems[e]=r.closest(this._selector("headerItem"))),this._tabsHeaderItems[e]},_getLinkEl:function(e){var n='%(control)s[href$="%(tabName)s"],%(control)s[href="#%(tabName)s"]';return this.$el.find(t(n).s({control:this._selector("control"),tabName:e}))},eachTab:function(e,t){this._elem("blocksItem").each(function(r){e.call(t,n(this),r)})}});return i}),define("global/elements/DragAndDrop/Dragging",["underscore","vendors/Backbone/Mixin","vendors/hand","vendors/Backbone/Backbone.MethodUtils"],function(e,t){var n=".dragging",r=new t({_classes:function(){return e.defaults({movingElement:""},this._super())},events:function(){var e=this._super();return e["pointerdown "+this._selector("movingElement")]=this._onPointerDown,e},_initProperties:function(){this._super(),this._startX=null,this._lastX=null,this._startY=null,this._lastY=null,this._verticalMovingPrevented=!1,this._horizontalMovingPrevented=!1,this._moving=!1,this._mouseSupport=!1,this._allowVerticalScroll=!1,this._checkMovingDirection=!1},_preventHorizontalMoving:function(){this._horizontalMovingPrevented=!0},_preventVerticalMoving:function(){this._verticalMovingPrevented=!0},_onPointerDown:function(e){if(!this._mouseSupport&&this._isMouse(e))return;this._startX=this._lastX=e.originalEvent.pageX,this._startY=this._lastY=e.originalEvent.pageY,this._checkMovingDirection=this._allowVerticalScroll,this._$window.off(n).on("pointermove"+n,this._onPointerMove).on("pointerup"+n,this._onPointerUp)},_onPointerMove:e.method.bind(function(e){var t=e.originalEvent.pageX-this._lastX,n=e.originalEvent.pageY-this._lastY,r=e.originalEvent.pageX-this._startX,i=e.originalEvent.pageY-this._startY;if(this._checkMovingDirection){this._checkMovingDirection=!1;if(Math.abs(i*3)>Math.abs(r)){this._moving=!1,this._stopMoving();return}}this._lastX=e.originalEvent.pageX,this._lastY=e.originalEvent.pageY;if(!this._moving){var s=Math.abs(t)<Math.abs(n);if(s&&this._verticalMovingPrevented||!s&&this._horizontalMovingPrevented){this._stopMoving();return}this._startMoving()}e.preventDefault(),this._move(t,n,r,i)}),_startMoving:function(){this._moving=!0},_move:function(e,t,n,r){},_onPointerUp:e.method.bind(function(e){this._$window.off("pointerup"+n);if(!this._moving){this._stopMoving();return}this._moving=!1,this._stopMoving();var t=e.originalEvent.pageX-this._lastX,r=e.originalEvent.pageY-this._lastY,i=e.originalEvent.pageX-this._startX,s=e.originalEvent.pageY-this._startY;this.trigger("touch:end",e,t,r,i,s),this._endMoving(t,r,i,s)}),_endMoving:function(e,t,n,r){},_stopMoving:function(){this._$window.off("pointermove"+n)}});return r}),define("global/elements/Tabs/FloatTabs",["underscore","jquery","global/elements/Tabs/Tabs","global/elements/DragAndDrop/Dragging","vendors/hand"],function(e,t,n,r){var i=n.mix(r).extend({_classes:function(){return e.defaults({disableAnimation:"tabs__deco_type_switch-transition-no"},this._super())},_selectors:function(){return e.defaults({bobber:".tabs__deco:first",movingElement:".tabs__header:first"},this._super())},_initProperties:function(){this._super(),this._tabsCount=this._getHeaderItems().length,this._tabsWidth=null,this._tabWidth=null,this._bobberLeft=0,this._sensitivity=20,this._fastMovingTime=500,this._startMovingDate=0,this._pointerUpTabIndex=null,this._isNotSlidingMoving=!1,this._allowVerticalScroll=!0,this._preventClick=!1,this._directionMoving=window.rtl?"right":"left"},events:function(){var e=this._super();return e["pointerup "+this._selector("headerItem")]=this._onTabPointerUp,e},initialize:function(){this._super(),this._$window.resize(this._onResize.bind(this)),this._updateSizes()},_onTabClick:function(e){if(this._preventClick){this._preventClick=!1,e.preventDefault();return}this._super(e)},_onResize:function(){this._updateSizes()},_updateSizes:function(){this._tabsWidth=this._elem("movingElement").width(),this._tabWidth=this._tabsWidth/this._tabsCount},showTab:function(e,t){this._super(e,t);var n=this.getActiveTabNumber();this._moveBobber(this._tabWidth*n/this._tabsWidth*100+"%")},_moveBobber:function(e){this._elem("bobber").css(this._directionMoving,e)},_moveBobberToTab:function(e){this._moveBobber(this._tabWidth*e/this._tabsWidth*100+"%")},_startMoving:function(){this._super(),this._addClass("disableAnimation","bobber"),this._bobberLeft=parseInt(this._elem("bobber").css(this._directionMoving),10),this._startMovingDate=new Date,this._isNotSlidingMoving=!1,this._pointerUpTabIndex=null},_move:function(e,t,n,r){n=window.rtl?-n:n,this._super(e,t,n,r);var i=this._clampLeft(this._bobberLeft+n);this._isNotSlidingMoving=this._isNotSlidingMoving||e*n<0,this._moveBobber(i+"px")},_endMoving:function(e,t,n,r){n=window.rtl?-n:n,this._super(e,t,n,r),this._removeClass("disableAnimation","bobber");var i=this._getTabIndexAfterMoving(n),s=this._getHeaderItems().eq(i).find(this._selector("control"));this._moveBobberToTab(i),s.click(),this._preventClick=!0,setTimeout(function(){this._preventClick=!1}.bind(this),500)},_getTabIndexAfterMoving:function(t){if(Math.abs(t)<this._sensitivity)return this._pointerUpTabIndex===null?this.getActiveTabNumber():this._pointerUpTabIndex;var n,r=new Date;if(!this._isNotSlidingMoving&&r-this._startMovingDate<=this._fastMovingTime){n=this.getActiveTabNumber(),n+=t>0?1:-1;if(n<0)return 0;var i=this._getHeaderItems().length;return n>=i?i-1:n}var s=this._bobberLeft+t;return s=this._clampLeft(s),n=Math.floor(s/this._tabWidth),n===this._tabsCount-1?n:e.min([n,n+1],function(e){return Math.abs(s-this._tabWidth*e)}.bind(this))},_clampLeft:function(e){if(e<0)return 0;var t=this._tabsWidth-this._tabWidth;return e>t?t:e},_onTabPointerUp:function(e){this._pointerUpTabIndex=t(e.currentTarget).index()}});return i}),define("global/elements/Tabs/FloatTabsWithMemory",["global/elements/Tabs/FloatTabs","global/Mixin/PersonalDataKeeper"],function(e,t){var n=e.mix(t).extend({_initProperties:function(){this._super(),this._personalDataType="tabs"},_getPersonalData:function(){var e={};return e[this.name]={activeTab:this.getActiveTab()},JSON.stringify(e)},showTab:function(e,t){this._super(e,t),this._savePersonalData()}});return n}),define("global/elements/Tabs/TabsManager",["BackboneX","underscore","jquery","global/elements/Tabs/Tabs","global/elements/Tabs/FloatTabs","global/elements/Tabs/FloatTabsWithMemory","global/Anchor/Anchor"],function(e,t,n,r,i,s,o){var u=e.View.extend({collection:{},preventChangeOnHashChange:!1,_TabsClass:r,_classes:function(){return t.defaults({tabs:"tabs"},this._super())},_selectors:function(){return t.defaults({control:'.tabs__control[href="#%s"]'},this._super())},initialize:function(){this._super();var e=this;this._elem("tabs").each(function(t){var n=this.id||t;e._init(this,n),e.collection[n].id=n}),this._bindHashchangeEvent()},_init:function(e,t,r){r=r||this._TabsClass;switch(n(e).data("type")){case"FloatTabs":r=i;break;case"FloatTabsWithMemory":r=s}this.collection[t]=new r({el:e,manager:this})},_bindHashchangeEvent:function(){var e=this,t;t=function(){if(e.preventChangeOnHashChange){e.preventChangeOnHashChange=!1;return}var t=o.pairs();if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)e._getLinkByAnchor(t[n]).click()},o.on("change",t),t()},_getLinkByAnchor:t.memoize(function(e){return e=(e||"").replace(/[^a-z0-9\-_=]/ig,""),this._elem("control",e)}),getByName:function(e){return t(this.collection).find(function(t){return t.name===e})},getFirstCollection:function(){return this.collection[0]}});return u}),define("global/PageClasses/PageWithTabs",["vendors/Backbone/Mixin","global/elements/Tabs/TabsManager"],function(e,t){var n=new e({_initProperties:function(){this._super(),this._tabsManager=null},initialize:function(){this._super(),this._initTabs()},_initTabs:function(){this._tabsManager=new t({el:this.el})}});return n}),define("mobile/PageClasses/PageWithDataLists",["underscore","vendors/Backbone/Mixin","mobile/elements/DataList/dataListFactory"],function(e,t,n){var r=new t({_selectors:function(){return e.defaults({dataList:".js-data-list"},this._super())},_initProperties:function(){this._super(),this._dataLists={}},initialize:function(){this._super(),this._initDataLists()},_initDataLists:function(){e.each(this._elem("dataList"),this._initDataList,this)},_initDataList:function(e){var t=n.createInstance(e);this._dataLists[t.$el.data("name")]=t}});return r}),define("global/elements/Spoiler/Spoilers",["jquery","underscore","BackboneX"],function(e,t,n){var r=n.View.extend({_classes:function(){return t.defaults({spoilerActiveYes:"spoiler_active_yes"},this._super())},_selectors:function(){return t.defaults({spoiler:".js-spoiler"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("spoiler")]=this._onSpoilerClick,e},_onSpoilerClick:function(e){e.preventDefault(),this.toggleSpoiler(e.currentTarget)},toggleSpoiler:function(t){var n=e(t),r=n.data("target");this._toggleClass("hidden",this.$(r)),this._toggleClass("spoilerActiveYes",n)}});return r}),define("global/elements/Spoiler/WithSpoilers",["vendors/Backbone/Mixin","global/elements/ServiceManager/WithServiceManager","./Spoilers"],function(e,t,n){var r=new e({dependencies:[t]},{initialize:function(){this._super(),this._initSpoilersService()},_initSpoilersService:function(){var e=new n({el:this.$el});this._getServiceManager().setService("spoilers",e)}});return r}),define("mobile/pages/all/ProjectPage",["underscore","jquery","global/PageClasses/Page","global/elements/Visibility/Visibility","elements/CsrfProtector/CsrfProtector_All","global/elements/Accordion/accordionsFactory","elements/Accordion/AccordionWithMemory","global/elements/Notification/NotificationManager","mobile/elements/DataList/dataListFactory","mobile/pages/all/Menu/MessagesDataListView","vendors/fastclick/lib/fastclick","mobile/pages/all/fixAnchorTarget","mobile/pages/all/ChangePasswordForm/ChangePasswordFormView","mobile/pages/all/alpariLimitedForm/alpariLimitedForm","elements/Chat/ChatWidget","global/PageClasses/PageWithGrid","global/PageClasses/PageWithAppModeSwitcher","global/elements/ServiceManager/WithServiceManager","global/PageClasses/PageWithSiteUrls","mobile/elements/PushNotificator/PageWithPushNotificator","mobile/elements/Menu/PageWithMenu","global/PageClasses/PageWithTabs","mobile/PageClasses/PageWithDataLists","global/elements/Accordion/WithAccordions","global/elements/Spoiler/WithSpoilers"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){a.addProduct("MessagesDataList",f),s.addProduct("AccordionWithMemory",o);var v=n.mixArguments(arguments).extend({_selectors:function(){return e.defaults({menu:".menu-main",langSwitcher:".js-lang-switcher",newMessages:".js-new-messages",notifications:".js-notifications",alpariLimited:".js-alpari-limited",chatWidget:".js-chat-widget",mParticle:".js-mparticle"},this._super())},events:function(){var e=this._super();return e["click "+this._selector("newMessages")]=this._onNewMessagesClick,e["click "+this._selector("mParticle")]=this._sendMParticleEvent,e},_initProperties:function(){this._super(),this._changePasswordForm=null},initialize:function(){this._super(),this._initLangSwitcher(),this._initAjaxOptions(),this._initCsrfProtector(),this._initNotification(),this._initNewMessages(),this._initVewportService(),this._initFastClick(),this._initChangePassword(),c.init(),r.handleChanges(),this._initForms(),this._initChatWidget()},_initChatWidget:function(){new d({el:this._elem("chatWidget")})},_initForms:function(){var e=this._elem("alpariLimited");e.length&&new p({el:e})},_initNotification:function(){this._getServiceManager().setService("notifications",new u({el:this._elem("notifications")}))},_initNewMessages:function(){this.getMenu().getItem("messages").on("newMessages",this._showNewMessages,this)},_showNewMessages:function(){this._removeClass("hidden","newMessages")},_onNewMessagesClick:function(e){e.preventDefault(),this.getMenu().getItem("messages").trigger("fetchNewMessages"),this._addClass("hidden","newMessages")},_initLangSwitcher:function(){var e=this._elem("langSwitcher"),n=e.val();e.on("change",function(){var e=t(this),r=e.val(),i=new URL(r);e.val(n),window.mParticle.logEvent("language_changed",window.mParticle.EventType.Other,{selected_language:i.pathname.split("/")[1]}),r&&(window.location=r)})},_initAjaxOptions:function(){this._$document.ajaxError(this._onAjaxError.bind(this))},_initCsrfProtector:function(){this._csrfProtector=new i(this._$body.data("csrf")),this._csrfProtector.protect()},_onAjaxError:function(e,t,n,r){t.status===401&&this._insertParamInUrl("session_expired")},_insertParamInUrl:function(t,n){t=encodeURI(t),n=encodeURI(typeof n=="undefined"?"":n);var r=e.compact(document.location.search.substr(1).split("&")),i=r.length,s;while(i--){s=r[i].split("=");if(s[0]==t){s[1]=n,r[i]=s.join("=");break}}i<0&&r.push(n?[t,n].join("="):t),window.location.search=r.join("&")},_initVewportService:function(){t.extend(t.scrollTo.defaults,{axis:"y",offset:-this._elem("menu").height()}),this._getServiceManager().setService("viewport",this._$window)},_initChangePassword:function(){this._changePasswordForm=new h({el:document.forms.changePassword})},_initFastClick:function(){l.attach(document.body)},_sendMParticleEvent:function(e){var t=e.target,n=t.getAttribute("data-event"),r=t.getAttribute("data-event-options")?JSON.parse(t.getAttribute("data-event-options"))||{}:{};return window.mParticle&&window.mParticle.logEvent(n,window.mParticle.EventType.Other,r)}},!1);return v});
// Copyright (c) 2009 Kazuhiko Arase

// Licensed under the MIT license:

//  http://www.opensource.org/licenses/mit-license.php

var QRCode=function(){var e=function(){function o(e,t){if(typeof e.length=="undefined")throw e.length+"/"+t;var n=function(){var n=0;while(n<e.length&&e[n]==0)n+=1;var r=new Array(e.length-n+t);for(var i=0;i<e.length-n;i+=1)r[i]=e[i+n];return r}(),r={};return r.getAt=function(e){return n[e]},r.getLength=function(){return n.length},r.multiply=function(e){var t=new Array(r.getLength()+e.getLength()-1);for(var n=0;n<r.getLength();n+=1)for(var i=0;i<e.getLength();i+=1)t[n+i]^=s.gexp(s.glog(r.getAt(n))+s.glog(e.getAt(i)));return o(t,0)},r.mod=function(e){if(r.getLength()-e.getLength()<0)return r;var t=s.glog(r.getAt(0))-s.glog(e.getAt(0)),n=new Array(r.getLength());for(var i=0;i<r.getLength();i+=1)n[i]=r.getAt(i);for(var i=0;i<e.getLength();i+=1)n[i]^=s.gexp(s.glog(e.getAt(i))+t);return o(n,0).mod(e)},r}var e=function(e,t){var r=236,s=17,p=e,d=n[t],v=null,m=0,y=null,b=[],w={},E=function(e,t){m=p*4+17,v=function(e){var t=new Array(e);for(var n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(m),S(0,0),S(m-7,0),S(0,m-7),N(),T(),k(e,t),p>=7&&C(e),y==null&&(y=O(p,d,b)),L(y,t)},S=function(e,t){for(var n=-1;n<=7;n+=1){if(e+n<=-1||m<=e+n)continue;for(var r=-1;r<=7;r+=1){if(t+r<=-1||m<=t+r)continue;0<=n&&n<=6&&(r==0||r==6)||0<=r&&r<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=r&&r<=4?v[e+n][t+r]=!0:v[e+n][t+r]=!1}}},x=function(){var e=0,t=0;for(var n=0;n<8;n+=1){E(!0,n);var r=i.getLostPoint(w);if(n==0||e>r)e=r,t=n}return t},T=function(){for(var e=8;e<m-8;e+=1){if(v[e][6]!=null)continue;v[e][6]=e%2==0}for(var t=8;t<m-8;t+=1){if(v[6][t]!=null)continue;v[6][t]=t%2==0}},N=function(){var e=i.getPatternPosition(p);for(var t=0;t<e.length;t+=1)for(var n=0;n<e.length;n+=1){var r=e[t],s=e[n];if(v[r][s]!=null)continue;for(var o=-2;o<=2;o+=1)for(var u=-2;u<=2;u+=1)o==-2||o==2||u==-2||u==2||o==0&&u==0?v[r+o][s+u]=!0:v[r+o][s+u]=!1}},C=function(e){var t=i.getBCHTypeNumber(p);for(var n=0;n<18;n+=1){var r=!e&&(t>>n&1)==1;v[Math.floor(n/3)][n%3+m-8-3]=r}for(var n=0;n<18;n+=1){var r=!e&&(t>>n&1)==1;v[n%3+m-8-3][Math.floor(n/3)]=r}},k=function(e,t){var n=d<<3|t,r=i.getBCHTypeInfo(n);for(var s=0;s<15;s+=1){var o=!e&&(r>>s&1)==1;s<6?v[s][8]=o:s<8?v[s+1][8]=o:v[m-15+s][8]=o}for(var s=0;s<15;s+=1){var o=!e&&(r>>s&1)==1;s<8?v[8][m-s-1]=o:s<9?v[8][15-s-1+1]=o:v[8][15-s-1]=o}v[m-8][8]=!e},L=function(e,t){var n=-1,r=m-1,s=7,o=0,u=i.getMaskFunction(t);for(var a=m-1;a>0;a-=2){a==6&&(a-=1);for(;;){for(var f=0;f<2;f+=1)if(v[r][a-f]==null){var l=!1;o<e.length&&(l=(e[o]>>>s&1)==1);var c=u(r,a-f);c&&(l=!l),v[r][a-f]=l,s-=1,s==-1&&(o+=1,s=7)}r+=n;if(r<0||m<=r){r-=n,n=-n;break}}}},A=function(e,t){var n=0,r=0,s=0,u=new Array(t.length),a=new Array(t.length);for(var f=0;f<t.length;f+=1){var l=t[f].dataCount,c=t[f].totalCount-l;r=Math.max(r,l),s=Math.max(s,c),u[f]=new Array(l);for(var h=0;h<u[f].length;h+=1)u[f][h]=255&e.getBuffer()[h+n];n+=l;var p=i.getErrorCorrectPolynomial(c),d=o(u[f],p.getLength()-1),v=d.mod(p);a[f]=new Array(p.getLength()-1);for(var h=0;h<a[f].length;h+=1){var m=h+v.getLength()-a[f].length;a[f][h]=m>=0?v.getAt(m):0}}var g=0;for(var h=0;h<t.length;h+=1)g+=t[h].totalCount;var y=new Array(g),b=0;for(var h=0;h<r;h+=1)for(var f=0;f<t.length;f+=1)h<u[f].length&&(y[b]=u[f][h],b+=1);for(var h=0;h<s;h+=1)for(var f=0;f<t.length;f+=1)h<a[f].length&&(y[b]=a[f][h],b+=1);return y},O=function(e,t,n){var o=u.getRSBlocks(e,t),f=a();for(var l=0;l<n.length;l+=1){var c=n[l];f.put(c.getMode(),4),f.put(c.getLength(),i.getLengthInBits(c.getMode(),e)),c.write(f)}var h=0;for(var l=0;l<o.length;l+=1)h+=o[l].dataCount;if(f.getLengthInBits()>h*8)throw"code length overflow. ("+f.getLengthInBits()+">"+h*8+")";f.getLengthInBits()+4<=h*8&&f.put(0,4);while(f.getLengthInBits()%8!=0)f.putBit(!1);for(;;){if(f.getLengthInBits()>=h*8)break;f.put(r,8);if(f.getLengthInBits()>=h*8)break;f.put(s,8)}return A(f,o)};w.addData=function(e,t){t=t||"Byte";var n=null;switch(t){case"Numeric":n=f(e);break;case"Alphanumeric":n=l(e);break;case"Byte":n=c(e);break;case"Kanji":n=h(e);break;default:throw"mode:"+t}b.push(n),y=null},w.isDark=function(e,t){if(e<0||m<=e||t<0||m<=t)throw e+","+t;return v[e][t]},w.getModuleCount=function(){return m},w.make=function(){if(p<1){var e=1;for(;e<40;e++){var t=u.getRSBlocks(e,d),n=a();for(var r=0;r<b.length;r++){var s=b[r];n.put(s.getMode(),4),n.put(s.getLength(),i.getLengthInBits(s.getMode(),e)),s.write(n)}var o=0;for(var r=0;r<t.length;r++)o+=t[r].dataCount;if(n.getLengthInBits()<=o*8)break}p=e}E(!1,x())},w.createTableTag=function(e,t){e=e||2,t=typeof t=="undefined"?e*4:t;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+t+"px;",n+='">',n+="<tbody>";for(var r=0;r<w.getModuleCount();r+=1){n+="<tr>";for(var i=0;i<w.getModuleCount();i+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=w.isDark(r,i)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>",n},w.createSvgTag=function(e,t,n,r){var i={};typeof arguments[0]=="object"&&(i=arguments[0],e=i.cellSize,t=i.margin,n=i.alt,r=i.title),e=e||2,t=typeof t=="undefined"?e*4:t,n=typeof n=="string"?{text:n}:n||{},n.text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,r=typeof r=="string"?{text:r}:r||{},r.text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var s=w.getModuleCount()*e+t*2,o,u,a,f,l="",c;c="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",l+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',l+=i.scalable?"":' width="'+s+'px" height="'+s+'px"',l+=' viewBox="0 0 '+s+" "+s+'" ',l+=' preserveAspectRatio="xMinYMin meet"',l+=r.text||n.text?' role="img" aria-labelledby="'+M([r.id,n.id].join(" ").trim())+'"':"",l+=">",l+=r.text?'<title id="'+M(r.id)+'">'+M(r.text)+"</title>":"",l+=n.text?'<description id="'+M(n.id)+'">'+M(n.text)+"</description>":"",l+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',l+='<path d="';for(a=0;a<w.getModuleCount();a+=1){f=a*e+t;for(o=0;o<w.getModuleCount();o+=1)w.isDark(a,o)&&(u=o*e+t,l+="M"+u+","+f+c)}return l+='" stroke="transparent" fill="black"/>',l+="</svg>",l},w.createDataURL=function(e,t){e=e||2,t=typeof t=="undefined"?e*4:t;var n=w.getModuleCount()*e+t*2,r=t,i=n-t;return g(n,n,function(t,n){if(r<=t&&t<i&&r<=n&&n<i){var s=Math.floor((t-r)/e),o=Math.floor((n-r)/e);return w.isDark(o,s)?0:1}return 1})},w.createImgTag=function(e,t,n){e=e||2,t=typeof t=="undefined"?e*4:t;var r=w.getModuleCount()*e+t*2,i="";return i+="<img",i+=' src="',i+=w.createDataURL(e,t),i+='"',i+=' width="',i+=r,i+='"',i+=' height="',i+=r,i+='"',n&&(i+=' alt="',i+=M(n),i+='"'),i+="/>",i};var M=function(e){var t="";for(var n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t},_=function(e){var t=1;e=typeof e=="undefined"?t*2:e;var n=w.getModuleCount()*t+e*2,r=e,i=n-e,s,o,u,a,f,l={"██":"█","█ ":"▀"," █":"▄","  ":" "},c={"██":"▀","█ ":"▀"," █":" ","  ":" "},h="";for(s=0;s<n;s+=2){u=Math.floor((s-r)/t),a=Math.floor((s+1-r)/t);for(o=0;o<n;o+=1)f="█",r<=o&&o<i&&r<=s&&s<i&&w.isDark(u,Math.floor((o-r)/t))&&(f=" "),r<=o&&o<i&&r<=s+1&&s+1<i&&w.isDark(a,Math.floor((o-r)/t))?f+=" ":f+="█",h+=e<1&&s+1>=i?c[f]:l[f];h+="\n"}return n%2&&e>0?h.substring(0,h.length-n-1)+Array(n+1).join("▀"):h.substring(0,h.length-1)};return w.createASCII=function(e,t){e=e||1;if(e<2)return _(t);e-=1,t=typeof t=="undefined"?e*2:t;var n=w.getModuleCount()*e+t*2,r=t,i=n-t,s,o,u,a,f=Array(e+1).join("██"),l=Array(e+1).join("  "),c="",h="";for(s=0;s<n;s+=1){u=Math.floor((s-r)/e),h="";for(o=0;o<n;o+=1)a=1,r<=o&&o<i&&r<=s&&s<i&&w.isDark(u,Math.floor((o-r)/e))&&(a=0),h+=a?f:l;for(u=0;u<e;u+=1)c+=h+"\n"}return c.substring(0,c.length-1)},w.renderTo2dContext=function(e,t){t=t||2;var n=w.getModuleCount();for(var r=0;r<n;r++)for(var i=0;i<n;i++)e.fillStyle=w.isDark(r,i)?"black":"white",e.fillRect(r*t,i*t,t,t)},w};e.stringToBytesFuncs={"default":function(e){var t=[];for(var n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(r&255)}return t}},e.stringToBytes=e.stringToBytesFuncs["default"],e.createStringToBytes=function(e,t){var n=function(){var n=v(e),r=function(){var e=n.read();if(e==-1)throw"eof";return e},i=0,s={};for(;;){var o=n.read();if(o==-1)break;var u=r(),a=r(),f=r(),l=String.fromCharCode(o<<8|u),c=a<<8|f;s[l]=c,i+=1}if(i!=t)throw i+" != "+t;return s}(),r="?".charCodeAt(0);return function(e){var t=[];for(var i=0;i<e.length;i+=1){var s=e.charCodeAt(i);if(s<128)t.push(s);else{var o=n[e.charAt(i)];typeof o=="number"?(o&255)==o?t.push(o):(t.push(o>>>8),t.push(o&255)):t.push(r)}}return t}};var t={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,i=7973,u=21522,a={},f=function(e){var t=0;while(e!=0)t+=1,e>>>=1;return t};return a.getBCHTypeInfo=function(e){var t=e<<10;while(f(t)-f(n)>=0)t^=n<<f(t)-f(n);return(e<<10|t)^u},a.getBCHTypeNumber=function(e){var t=e<<12;while(f(t)-f(i)>=0)t^=i<<f(t)-f(i);return e<<12|t},a.getPatternPosition=function(t){return e[t-1]},a.getMaskFunction=function(e){switch(e){case r.PATTERN000:return function(e,t){return(e+t)%2==0};case r.PATTERN001:return function(e,t){return e%2==0};case r.PATTERN010:return function(e,t){return t%3==0};case r.PATTERN011:return function(e,t){return(e+t)%3==0};case r.PATTERN100:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case r.PATTERN101:return function(e,t){return e*t%2+e*t%3==0};case r.PATTERN110:return function(e,t){return(e*t%2+e*t%3)%2==0};case r.PATTERN111:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},a.getErrorCorrectPolynomial=function(e){var t=o([1],0);for(var n=0;n<e;n+=1)t=t.multiply(o([1,s.gexp(n)],0));return t},a.getLengthInBits=function(e,n){if(1<=n&&n<10)switch(e){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw"mode:"+e}else if(n<27)switch(e){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw"mode:"+e}else{if(!(n<41))throw"type:"+n;switch(e){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw"mode:"+e}}},a.getLostPoint=function(e){var t=e.getModuleCount(),n=0;for(var r=0;r<t;r+=1)for(var i=0;i<t;i+=1){var s=0,o=e.isDark(r,i);for(var u=-1;u<=1;u+=1){if(r+u<0||t<=r+u)continue;for(var a=-1;a<=1;a+=1){if(i+a<0||t<=i+a)continue;if(u==0&&a==0)continue;o==e.isDark(r+u,i+a)&&(s+=1)}}s>5&&(n+=3+s-5)}for(var r=0;r<t-1;r+=1)for(var i=0;i<t-1;i+=1){var f=0;e.isDark(r,i)&&(f+=1),e.isDark(r+1,i)&&(f+=1),e.isDark(r,i+1)&&(f+=1),e.isDark(r+1,i+1)&&(f+=1);if(f==0||f==4)n+=3}for(var r=0;r<t;r+=1)for(var i=0;i<t-6;i+=1)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(var i=0;i<t;i+=1)for(var r=0;r<t-6;r+=1)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var l=0;for(var i=0;i<t;i+=1)for(var r=0;r<t;r+=1)e.isDark(r,i)&&(l+=1);var c=Math.abs(100*l/t/t-50)/5;return n+=c*10,n},a}(),s=function(){var e=new Array(256),t=new Array(256);for(var n=0;n<8;n+=1)e[n]=1<<n;for(var n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(var n=0;n<255;n+=1)t[e[n]]=n;var r={};return r.glog=function(e){if(e<1)throw"glog("+e+")";return t[e]},r.gexp=function(t){while(t<0)t+=255;while(t>=256)t-=255;return e[t]},r}(),u=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},r={},i=function(t,r){switch(r){case n.L:return e[(t-1)*4+0];case n.M:return e[(t-1)*4+1];case n.Q:return e[(t-1)*4+2];case n.H:return e[(t-1)*4+3];default:return undefined}};return r.getRSBlocks=function(e,n){var r=i(e,n);if(typeof r=="undefined")throw"bad rs block @ typeNumber:"+e+"/errorCorrectionLevel:"+n;var s=r.length/3,o=[];for(var u=0;u<s;u+=1){var a=r[u*3+0],f=r[u*3+1],l=r[u*3+2];for(var c=0;c<a;c+=1)o.push(t(f,l))}return o},r}(),a=function(){var e=[],t=0,n={};return n.getBuffer=function(){return e},n.getAt=function(t){var n=Math.floor(t/8);return(e[n]>>>7-t%8&1)==1},n.put=function(e,t){for(var r=0;r<t;r+=1)n.putBit((e>>>t-r-1&1)==1)},n.getLengthInBits=function(){return t},n.putBit=function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1},n},f=function(e){var n=t.MODE_NUMBER,r=e,i={};i.getMode=function(){return n},i.getLength=function(e){return r.length},i.write=function(e){var t=r,n=0;while(n+2<t.length)e.put(s(t.substring(n,n+3)),10),n+=3;n<t.length&&(t.length-n==1?e.put(s(t.substring(n,n+1)),4):t.length-n==2&&e.put(s(t.substring(n,n+2)),7))};var s=function(e){var t=0;for(var n=0;n<e.length;n+=1)t=t*10+o(e.charAt(n));return t},o=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return i},l=function(e){var n=t.MODE_ALPHA_NUM,r=e,i={};i.getMode=function(){return n},i.getLength=function(e){return r.length},i.write=function(e){var t=r,n=0;while(n+1<t.length)e.put(s(t.charAt(n))*45+s(t.charAt(n+1)),11),n+=2;n<t.length&&e.put(s(t.charAt(n)),6)};var s=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return i},c=function(n){var r=t.MODE_8BIT_BYTE,i=n,s=e.stringToBytes(n),o={};return o.getMode=function(){return r},o.getLength=function(e){return s.length},o.write=function(e){for(var t=0;t<s.length;t+=1)e.put(s[t],8)},o},h=function(n){var r=t.MODE_KANJI,i=n,s=e.stringToBytesFuncs.SJIS;if(!s)throw"sjis not supported.";!function(e,t){var n=s(e);if(n.length!=2||(n[0]<<8|n[1])!=t)throw"sjis not supported."}("友",38726);var o=s(n),u={};return u.getMode=function(){return r},u.getLength=function(e){return~~(o.length/2)},u.write=function(e){var t=o,n=0;while(n+1<t.length){var r=(255&t[n])<<8|255&t[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=(r>>>8&255)*192+(r&255),e.put(r,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)},u},p=function(){var e=[],t={};return t.writeByte=function(t){e.push(t&255)},t.writeShort=function(e){t.writeByte(e),t.writeByte(e>>>8)},t.writeBytes=function(e,n,r){n=n||0,r=r||e.length;for(var i=0;i<r;i+=1)t.writeByte(e[i+n])},t.writeString=function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},t.toByteArray=function(){return e},t.toString=function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+="]",t},t},d=function(){var e=0,t=0,n=0,r="",i={},s=function(e){r+=String.fromCharCode(o(e&63))},o=function(e){if(!(e<0)){if(e<26)return 65+e;if(e<52)return 97+(e-26);if(e<62)return 48+(e-52);if(e==62)return 43;if(e==63)return 47}throw"n:"+e};return i.writeByte=function(r){e=e<<8|r&255,t+=8,n+=1;while(t>=6)s(e>>>t-6),t-=6},i.flush=function(){t>0&&(s(e<<6-t),e=0,t=0);if(n%3!=0){var i=3-n%3;for(var o=0;o<i;o+=1)r+="="}},i.toString=function(){return r},i},v=function(e){var t=e,n=0,r=0,i=0,s={};s.read=function(){while(i<8){if(n>=t.length){if(i==0)return-1;throw"unexpected end of file./"+i}var e=t.charAt(n);n+=1;if(e=="=")return i=0,-1;if(e.match(/^\s$/))continue;r=r<<6|o(e.charCodeAt(0)),i+=6}var s=r>>>i-8&255;return i-=8,s};var o=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(e==43)return 62;if(e==47)return 63;throw"c:"+e};return s},m=function(e,t){var n=e,r=t,i=new Array(e*t),s={};s.setPixel=function(e,t,r){i[t*n+e]=r},s.write=function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=2,i=u(t);e.writeByte(t);var s=0;while(i.length-s>255)e.writeByte(255),e.writeBytes(i,s,255),s+=255;e.writeByte(i.length-s),e.writeBytes(i,s,i.length-s),e.writeByte(0),e.writeString(";")};var o=function(e){var t=e,n=0,r=0,i={};return i.write=function(e,i){if(e>>>i!=0)throw"length over";while(n+i>=8)t.writeByte(255&(e<<n|r)),i-=8-n,e>>>=8-n,r=0,n=0;r=e<<n|r,n+=i},i.flush=function(){n>0&&t.writeByte(r)},i},u=function(e){var t=1<<e,n=(1<<e)+1,r=e+1,s=a();for(var u=0;u<t;u+=1)s.add(String.fromCharCode(u));s.add(String.fromCharCode(t)),s.add(String.fromCharCode(n));var f=p(),l=o(f);l.write(t,r);var c=0,h=String.fromCharCode(i[c]);c+=1;while(c<i.length){var d=String.fromCharCode(i[c]);c+=1,s.contains(h+d)?h+=d:(l.write(s.indexOf(h),r),s.size()<4095&&(s.size()==1<<r&&(r+=1),s.add(h+d)),h=d)}return l.write(s.indexOf(h),r),l.write(n,r),l.flush(),f.toByteArray()},a=function(){var e={},t=0,n={};return n.add=function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},n.size=function(){return t},n.indexOf=function(t){return e[t]},n.contains=function(t){return typeof e[t]!="undefined"},n};return s},g=function(e,t,n){var r=m(e,t);for(var i=0;i<t;i+=1)for(var s=0;s<e;s+=1)r.setPixel(s,i,n(s,i));var o=p();r.write(o);var u=d(),a=o.toByteArray();for(var f=0;f<a.length;f+=1)u.writeByte(a[f]);return u.flush(),"data:image/gif;base64,"+u};return e}();e.stringToBytesFuncs["UTF-8"]=function(e){function t(e){var t=[];for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|r&63):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|r&63):(n++,r=65536+((r&1023)<<10|e.charCodeAt(n)&1023),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63))}return t}return t(e)};var t=function(t,n){typeof n=="string"&&(n={text:n});var r={render:"canvas",width:256,height:256,typeNumber:0,correctLevel:"H",background:"#ffffff",foreground:"#000000",text:null};for(i in r)typeof n[i]!="undefined"&&(r[i]=n[i]);n=r,e.stringToBytes=e.stringToBytesFuncs["UTF-8"];var s=function(){var t=new e(n.typeNumber,n.correctLevel);t.addData(n.text),t.make();var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var i=r.getContext("2d"),s=n.width/t.getModuleCount(),o=n.height/t.getModuleCount();for(var u=0;u<t.getModuleCount();u++)for(var a=0;a<t.getModuleCount();a++){i.fillStyle=t.isDark(u,a)?n.foreground:n.background;var f=Math.ceil((a+1)*s)-Math.floor(a*s),l=Math.ceil((u+1)*o)-Math.floor(u*o);i.fillRect(Math.round(a*s),Math.round(u*o),f,l)}return r},o=function(){var e=new QRCode(n.typeNumber,n.correctLevel);e.addData(n.text),e.make();var t=$("<table></table>").css("width",n.width+"px").css("height",n.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",n.background),r=n.width/e.getModuleCount(),i=n.height/e.getModuleCount();for(var s=0;s<e.getModuleCount();s++){var o=$("<tr></tr>").css("height",i+"px").appendTo(t);for(var u=0;u<e.getModuleCount();u++)$("<td></td>").css("width",r+"px").css("background-color",e.isDark(s,u)?n.foreground:n.background).appendTo(o)}return t},u=n.render==="canvas"?s():o();typeof t=="string"&&(t=document.querySelector(t)),t.append(u),this.element=t,this.renderDownloadLink=function(e,t,n){var r=$(this.element).find("canvas").get(0);if(typeof r=="undefined"){console.error("QR code download link rendering available only for canvas");return}t=typeof t=="undefined"?"qrcode":t;var i=$('<div><a href="'+r.toDataURL("image/png")+'" download="'+t+'.png">'+e+"</a></div>");$(typeof n!="undefined"?n:$(this.element)).append(i)}};return t}();define("1b1cfe3ccaa1a090702fd9934738ec0d",function(){});

(function () {

    var isMobile = {
        Android: function () {
            return navigator.userAgent.match(/Android/i);
        }
    };

    function getCookie(name) {
        let matches = document.cookie.match(new RegExp(
            "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
        ));
        return matches ? decodeURIComponent(matches[1]) : false;
    }

    function seoCookie(href) {
        var seo = "/?pid=myalpari&c=smartbanner&af_sub2=" + location.href;
        var url = new URL(href + seo)
        return url.href;
    }

    function setCookie(name ,minutes) {
        var expires = "";
        let timestamp = ''
        if (minutes) {
            timestamp = Date.now() + (minutes * 60 * 1000);
            expires = "; expires=" + new Date(timestamp);
        }
        document.cookie = name + "=" + (timestamp || "")  + expires + "; path=/";
    }

    let instance = {
        app: false,
        namespace:false,
        state: ['closed', 'installed'],
        self: window.document.body.getElementsByClassName('smartbanner'),
        banner: {
            daysHidden: 30,
            daysReminder: 30,
            minutesOpenNext: 30,
            isOneAppOfDateExpires: true,
            author: 'Alpari Idc Corp',
            store: {
                ios: 'On the App Store',
                android: 'In Google Play',
            },
            price: {
                ios: 'FREE',
                android: 'FREE',
            },
            translate: {
                button: {
                    ru: 'Смотреть',
                    en: 'View',
                    fa: 'نگاه کن',
                    ua: 'Дивитися'
                }
            }
        },
        invest: {
            _: 'invest',
            type: function () {
                let type = '';
                switch (location.host) {
                    case 'some-host.com':
                        type = 'lk';
                        break;
                    default:
                        type = 'default';
                        break;
                }
                return type;
            },
            link: {
                client: 'https://alpari-invest.onelink.me/d5ee',
                lk: 'https://alpari-invest.onelink.me/d5ee/8480d582',
                default: 'https://alpari-invest.onelink.me/d5ee/8480d582',
            },
            alias:{
                'invest':false,
                'mobile':false,
                'options':false,
            },
            title: 'Alpari Invest',
            path: ['invest','pamm','portfolios'],
            icon: {
                client: {
                    ios: '/public/img/pages/smart-banner/invest-ios.svg',
                    android: '/public/img/pages/smart-banner/invest-android.svg',
                },
                lk: {
                    ios: '/img_mobile/interface/smart-banner/invest_ios.svg',
                    android: '/img_mobile/interface/smart-banner/invest_android.svg',
                },
                default: {
                    ios: '/img_mobile/interface/smart-banner/invest_ios.svg',
                    android: '/img_mobile/interface/smart-banner/invest_android.svg',
                }
            },
        },
        options: {
            _: 'options',
            type: function () {
                let type = '';
                switch (location.host) {
                    case 'some-host.com':
                        type = 'lk';
                        break;
                    default:
                        type = 'default';
                        break;
                }
                return type;
            },
            link: {
                client: 'https://alparioptions.onelink.me/2396208183',
                lk: 'https://alparioptions.onelink.me/2396208183/8e16909f',
                default: 'https://alparioptions.onelink.me/2396208183/8e16909f',
            },
            alias: {
                'options':false,
                'mobile':false,
                'invest':false,
            },
            title: 'Alpari Fix Contracts',
            path: ['fix-contracts'],
            icon: {
                client: {
                    ios: '/public/img/pages/smart-banner/options-ios.svg',
                    android: '/public/img/pages/smart-banner/options-android.svg',
                },
                lk: {
                    ios: '/img_mobile/interface/smart-banner/options_ios.svg',
                    android: '/img_mobile/interface/smart-banner/options_android.svg',
                },
                default: {
                    ios: '/img_mobile/interface/smart-banner/options_ios.svg',
                    android: '/img_mobile/interface/smart-banner/options_android.svg',
                }
            },
        },
        mobile: {
            _: 'mobile',
            type: function () {
                let type = '';
                switch (location.host) {
                    case 'some-host.com':
                        type = 'lk';
                        break;
                    default:
                        type = 'default';
                        break;
                }
                return type;
            },
            link: {
                client: 'https://alparimobileanalytics.onelink.me/SZ7T',
                lk: 'https://alparimobileanalytics.onelink.me/SZ7T/accf2441',
                default: 'https://alparimobileanalytics.onelink.me/SZ7T/accf2441',
            },
            alias:{
                'mobile':false,
                'invest':false,
                'options':false,
            },
            title: 'Alpari Mobile',
            path: [],
            icon: {
                client: {
                    ios: '/public/img/pages/smart-banner/mobile-ios.png',
                    android: '/public/img/pages/smart-banner/mobile-android.svg',
                },
                lk: {
                    ios: '/img_mobile/interface/smart-banner/mobile_ios.png',
                    android: '/img_mobile/interface/smart-banner/mobile_android.svg',
                },
                default: {
                    ios: '/img_mobile/interface/smart-banner/mobile_ios.png',
                    android: '/img_mobile/interface/smart-banner/mobile_android.svg',
                },
            },
        },
        default: {
            _: 'mobile',
            type: function () {
                let type = '';
                switch (location.host) {
                    case 'some-host.com':
                        type = 'lk';
                        break;
                    default:
                        type = 'default';
                        break;
                }
                return type;
            },
            link: {
                client: 'https://alparimobileanalytics.onelink.me/SZ7T',
                lk: 'https://alparimobileanalytics.onelink.me/SZ7T/accf2441',
                default: 'https://alparimobileanalytics.onelink.me/SZ7T/accf2441',
            },
            alias:{
                'mobile':false,
                'invest':false,
                'options':false,
            },
            title: 'Alpari Mobile',
            path: [],
            icon: {
                client: {
                    ios: '/public/img/pages/smart-banner/mobile-ios.svg',
                    android: '/public/img/pages/smart-banner/mobile-android.svg',
                },
                lk: {
                    ios: '/img_mobile/interface/smart-banner/mobile_ios.svg',
                    android: '/img_mobile/interface/smart-banner/mobile_android.svg',
                },
                default: {
                    ios: '/img_mobile/interface/smart-banner/mobile_ios.svg',
                    android: '/img_mobile/interface/smart-banner/mobile_android.svg',
                },
            },
        },
    };

    let app = false;
    for(let key in instance) {
        if( key !== 'default' &&
            key !== 'banner' &&
            key !== 'namespace' &&
            key !== 'app' &&
            key !== 'state' &&
            key !== 'self') {
            app = instance[key].path.find(function (path) {
                return window.location.pathname.lastIndexOf(path) !== -1;
            });
        }
        if(app) {
            app = key;
            break;
        }
    }

    app = (!app) ? instance.default : instance[app];
    instance.namespace = app._ ;
    let date_await = getCookie(app._+"-await")
    if(( date_await - Date.now() < 0)) {
        for(let key in app.alias) {
            for(let type in instance.state) {
                if(instance.banner.isOneAppOfDateExpires) {
                    for(let namespace in app.alias) {
                        if(!app.alias[key]) {
                            app.alias[key] = getCookie(namespace +"-"+key+"-smartbanner-"+ instance.state[type])
                        }
                    }
                } else {
                    app.alias[key] = getCookie(app._+"-"+key+"-smartbanner-"+ instance.state[type])
                    if(app.alias[key]) {
                        break;
                    }
                }
            }
        }

        app.alias.keys = Object.keys(app.alias);
        let ua = (isMobile.Android())? isMobile.Android()[0]: false;
        for(let i = app.alias.keys.length -1; i >= 0; i-- ) {
           if(ua !== 'Android' && app.alias.keys[i] === 'options') {

            } else {
               if(!app.alias[app.alias.keys[i]]) {
                   instance.app = app.alias.keys[i];
               }
           }
        }

        if(instance.app) {
            window.SmartBanner.prototype.parseAppId = function () {
                return this.appId = instance.namespace+'-'+instance.app;
            };

            window.SmartBanner.prototype.create = function () {
                let doc = document
                app = instance[instance.app]
                let link = seoCookie(app.link[app.type()]);
                let inStore = this.options.price[this.type] + ' - ' + this.options.store[this.type];
                let icon = app.icon[app.type()][this.type];
                let sb = doc.createElement('div');
                let theme = this.options.theme || this.type;
                let buttonText = instance.banner.translate.button[this.options.appStoreLanguage]
                sb.className = 'smartbanner smartbanner-' + theme + ' smartbanner-' + app._ + ' smartbanner-' + app._+'-'+ theme;
                sb.innerHTML = '<div class="smartbanner-container">' +
                    '<a href="javascript:void(0);" class="smartbanner-close"></a>' +
                    '<span class="smartbanner-icon" style="background-image: url(' + icon + ')"></span>' +
                    '<div class="smartbanner-info">' +
                    '<div class="smartbanner-title">' + this.options.title + '</div>' +
                    '<div class="smartbanner-company">' + this.options.author + '</div>' +
                    '<span class="smartbanner-price">' + inStore + '</span>' +
                    '</div>' +
                    '<p class="smartbanner-button smartbanner-button-' + app._ + '">' + '<a target="_blank" href="' + link + '" class="smartbanner-button-text">' +
                    buttonText +
                    '</a>' + '<p>' +
                    '</div>';
                if (doc.body) {
                    doc.body.appendChild(sb);
                } else if (doc) {
                    doc.addEventListener('DOMContentLoaded', function () {
                        doc.body.appendChild(sb);
                    });
                }
                sb.querySelector('.smartbanner-button').addEventListener('click', this.install.bind(this), false);
                sb.querySelector('.smartbanner-close').addEventListener('click', this.close.bind(this), false);
            };

            if (window.lang === 'ru' || window.lang === 'ua' || window.lang === 'en' || window.lang === 'fa') {
                if(isMobile.Android()) {
                    instance.banner.author = 'Falterona LP';
                }
                new window.SmartBanner({
                    app: instance.app,
                    namespace: instance.namespace,
                    daysHidden: instance.banner.daysHidden,
                    daysReminder: instance.banner.daysReminder,
                    minutesOpenNext: instance.banner.minutesOpenNext,
                    appStoreLanguage: window.lang,
                    title: instance[instance.app].title,
                    author: instance.banner.author,
                    store: {
                        ios: instance.banner.store.ios,
                        android: instance.banner.store.android,
                    },
                    price: {
                        ios: instance.banner.price.ios,
                        android: instance.banner.price.android,
                    },
                    install: function () {
                        setCookie(instance.namespace + "-await", instance.banner.minutesOpenNext);
                    },
                    close: function () {
                        setCookie(instance.namespace + "-await", instance.banner.minutesOpenNext);
                    }
                });
            }
        }
    }
})();

define("92895d79b940459ecd7b0b95bed91632", function(){});

define("CalendarDaysTemplate",["Twig"],function(e){var t;return goog.provide("CalendarDays"),goog.require("twig"),goog.require("twig.filter"),t=function(e){twig.Template.call(this,e)},twig.inherits(t,twig.Template),t.prototype.getParent_=function(e){return!1},t.prototype.render_=function(e,t,n){var r=e;e=new twig.StringBuffer,e.append("\n"),t.shownMonth="shownMonth"in t?twig.filter.def("shownMonth"in t?t.shownMonth:null,this.env_.filter("date",this.env_,"now","Y-m")):this.env_.filter("date",this.env_,"now","Y-m"),e.append("\n"),t._parent=t;var i="calendar"in t?t.calendar:null,s={index0:0,index:1,first:!0};if(twig.countable(i)){var o=twig.count(i);s.revindex0=o-1,s.revindex=o,s.length=o,s.last=1===o}twig.forEach(i,function(n,r){t.week=r,t.rows=n,e.append("    "),t.index=twig.attr(s,"index"),e.append("    <tr>\n        ");var i="rows"in t?t.rows:null,o={parent:s,index0:0,index:1,first:!0};if(twig.countable(i)){var u=twig.count(i);o.revindex0=u-1,o.revindex=u,o.length=u,o.last=1===u}twig.forEach(i,function(n,r){t.col=r,t.day=n,e.append('            <td class="calendar__date'),e.append(twig.filter.escape(this.env_,(("maxDate"in t?t.maxDate:null)<("day"in t?t.day:null)||("minDate"in t?t.minDate:null)>("day"in t?t.day:null)||null!==("availableDays"in t?t.availableDays:null)&&!twig.contains("availableDays"in t?t.availableDays:null,this.env_.filter("date",this.env_,"day"in t?t.day:null,"j"))?" calendar__date_disabled_yes":"")+(this.env_.filter("date",this.env_,"day"in t?t["day"]:null,"Y-m")!=("shownMonth"in t?t["shownMonth"]:null)?" calendar__date_muted_yes":"")+(("day"in t?t["day"]:null)==this.env_.filter("date",this.env_,"now","Y-m-d")?" calendar__date_current_yes":"")+(("day"in t?t["day"]:null)==("date"in t?t["date"]:null)?" calendar__date_selected_yes":""),"html",null,!0)),e.append('" data-date="'),e.append(twig.filter.escape(this.env_,"day"in t?t.day:null,"html",null,!0)),e.append('">'),e.append(twig.filter.escape(this.env_,this.env_.filter("date",this.env_,"day"in t?t.day:null,"j"),"html",null,!0)),e.append("</td>\n        "),++o.index0,++o.index,o.first=!1,o.length&&(--o.revindex0,--o.revindex,o.last=0===o.revindex0)},this),e.append("    </tr>\n"),++s.index0,++s.index,s.first=!1,s.length&&(--s.revindex0,--s.revindex,s.last=0===s.revindex0)},this),e.append("\n"),r.append(twig.spaceless(e.toString())),e=r},t.prototype.getTemplateName=function(){return"CalendarDays"},t.prototype.isTraitable=function(){return!1},t}),define("64b47939e214e008b0df640e56c0f4b0",function(){});
define("FileListTemplate",["Twig"],function(e){var t;return goog.provide("FileList"),goog.require("twig"),goog.require("twig.filter"),t=function(e){twig.Template.call(this,e)},twig.inherits(t,twig.Template),t.prototype.getParent_=function(e){return!1},t.prototype.render_=function(e,t,n){t.default_domain="file",t["delete"]=this.env_.filter("trans",t,"## delete");if("items"in t?twig.filter.def("items"in t?t.items:null,!1):!1){e.append('    <ol class="file__list list list_type_decimal">\n        '),t._parent=t;var r="items"in t?t.items:null,i={index0:0,index:1,first:!0};if(twig.countable(r)){var s=twig.count(r);i.revindex0=s-1,i.revindex=s,i.length=s,i.last=1===s}twig.forEach(r,function(n,r){t._key=r,t.item=n,e.append('            <li class="file__title">\n                <span dir="ltr" class="file__name">'),e.append(twig.filter.escape(this.env_,twig.attr("item"in t?t.item:null,"name"),"html",null,!0)),e.append('</span>\n                <a href="#" class="file__cleaner" data-input-index="'),e.append(twig.filter.escape(this.env_,twig.attr("item"in t?t.item:null,"index"),"html",null,!0)),e.append('">'),e.append(twig.filter.escape(this.env_,"delete"in t?t["delete"]:null,"html",null,!0)),e.append("</a>\n            </li>\n        "),++i.index0,++i.index,i.first=!1,i.length&&(--i.revindex0,--i.revindex,i.last=0===i.revindex0)},this),e.append("    </ol>\n")}else e.append('    <div class="file__list"></div>\n')},t.prototype.getTemplateName=function(){return"FileList"},t.prototype.isTraitable=function(){return!1},t}),define("40c0128d6077c13c5f33db13e34983e2",function(){});